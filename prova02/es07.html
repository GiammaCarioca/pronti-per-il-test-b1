<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
    <title>Prova 1 | Esercizio 7</title>
    <link rel="stylesheet" href="../styles/output.css" />
  </head>

  <body>
    <div class="container wrapper lg:w-2/3 md:p-20">
      <header class="my-6">
        <h1 class="hidden">Prova 2: Scuola</h1>
        <p class="hidden" role="doc-subtitle">Grammatica</p>
        <p
          role="doc-subtitle"
          aria-roledescription="consegna dell'esercizio"
          class="instructions md:text-2xl"
        >
          7. Completa i messaggi con la parola opportuna.
        </p>
      </header>

      <form action="#" id="esercizio07" autocomplete="off">
        <div class="space-y-6">
          <section>
            <p class="py-1 leading-relaxed">
              A. Domani non riesco a portare i bambini a scuola.
              <input
                class="gap-pronoun"
                aria-label="fill the gap"
                type="text"
                name="answer01"
                id="answer01"
              />
              puoi portare tu?
            </p>
          </section>
          <section>
            <p class="py-1 leading-relaxed">
              B. La prossima settimana mia figlia inizia la scuola elementare.
              <input
                class="gap-pronoun"
                aria-label="fill the gap"
                type="text"
                name="answer02"
                id="answer02"
              />
              devo comprare un astuccio.
            </p>
          </section>
          <section>
            <p class="py-1 leading-relaxed">
              C. — Hai detto ai tuoi genitori di firmare il diario?
            </p>
            <p class="py-1 leading-relaxed">
              — Sì,
              <input
                class="gap-pronoun"
                aria-label="fill the gap"
                type="text"
                name="answer03"
                id="answer03"
              />
              ho detto.
            </p>
          </section>
          <section>
            <p class="py-1 leading-relaxed">
              D. — Mamma, mi compri questi due evidenziatori?
            </p>
            <p class="py-1 leading-relaxed">
              — No, te
              <input
                class="gap-pronoun"
                aria-label="fill the gap"
                type="text"
                name="answer04"
                id="answer04"
              />
              compro uno solo.
            </p>
          </section>
          <section>
            <p class="py-1 leading-relaxed">
              E. — Per fare l’iscrizione dovete andare in segreteria, su al
              primo piano.
            </p>
            <p class="py-1 leading-relaxed">
              — Va bene,
              <input
                class="gap-pronoun"
                aria-label="fill the gap"
                type="text"
                name="answer05"
                id="answer05"
              />
              andiamo domani.
            </p>
          </section>

          <section>
            <p class="py-1 leading-relaxed">
              F. Cari mamma e papà,
              <input
                class="gap-pronoun"
                aria-label="fill the gap"
                type="text"
                name="answer01"
                id="answer01"
              />
              voglio molto bene!
            </p>
          </section>

          <section>
            <p class="py-1 leading-relaxed">
              G. — Signora, quanto prosciutto cotto vuole?
            </p>
            <p class="py-1 leading-relaxed">
              —
              <input
                class="gap-pronoun"
                aria-label="fill the gap"
                type="text"
                name="answer03"
                id="answer03"
              />
              prendo due etti, grazie.
            </p>
          </section>

          <section>
            <p class="py-1 leading-relaxed">
              H. Sono in ritardo! Mio marito non può andare a prendere i bambini
              a scuola e devo andar
              <input
                class="gap-pronoun"
                aria-label="fill the gap"
                type="text"
                name="answer01"
                id="answer01"
              />
              io!
            </p>
          </section>

          <section>
            <p class="py-1 leading-relaxed">
              I. — Secondo te, Romina vieni alla festa domani?
            </p>
            <p class="py-1 leading-relaxed">
              — Guarda, è lì, chiedi
              <input
                class="gap-pronoun"
                aria-label="fill the gap"
                type="text"
                name="answer03"
                id="answer03"
              />
              .
            </p>
          </section>

          <section>
            <p class="py-1 leading-relaxed">
              L. Adoro quel film!
              <input
                class="gap-pronoun"
                aria-label="fill the gap"
                type="text"
                name="answer01"
                id="answer01"
              />
              ho già visto tre volte!
            </p>
          </section>
        </div>

        <div class="flex justify-center">
          <button class="btn" type="submit">Controlla la tua risposta</button>
        </div>
      </form>

      <nav class="mt-6">
        <ol class="flex justify-between">
          <li>
            <a class="nav-link hover:underline" href="./es06.html">Indietro</a>
          </li>
          <li>
            <a class="nav-link hover:underline" href="./index.html"
              >Pagina iniziale</a
            >
          </li>
          <li>
            <a class="nav-link hover:underline" href="./es08.html">Avanti</a>
          </li>
        </ol>
      </nav>
    </div>
    <script>
      const solutions = [
        "li",
        "le",
        "gliel'",
        "ne",
        "ci",
        "vi",
        "ne",
        "ci",
        "glielo",
        "l'",
      ];

      const esercizio07 = document.getElementById("esercizio07");

      esercizio07.addEventListener("submit", (e) => {
        e.preventDefault();

        const fields = Array.from(
          esercizio07.querySelectorAll("input[type='text']")
        );
        const answers = fields.map((field) => field.value);

        const normalizeAnswer = (answer) => {
          return answer.trim().toLowerCase();
        };

        const checkAnswer = (answer, idx) => {
          // if (answer === "" || answer === "Scrivi la tua risposta") {
          //   fields[idx].value = "Scrivi la tua risposta";
          //   return;
          // }

          const rawAnswer = normalizeAnswer(answer);

          if (rawAnswer === solutions[idx]) {
            fields[idx].style.border = "1px solid green";
            // console.log("👍");
          } else {
            fields[idx].style.border = "1px solid red";
            // console.log("👎");
          }
        };

        answers.forEach((answer, idx) => checkAnswer(answer, idx));
      });
    </script>
  </body>
</html>
