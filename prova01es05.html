<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
    <title>Esercizio 5</title>
    <link rel="stylesheet" href="/output.css" />
  </head>

  <body>
    <form action="" id="esercizio05" autocomplete="off">
      <h1>
        5. Scegli il verbo adatto e coniugalo nella forma corretta (passato
        prossimo o imperfetto):
      </h1>

      <div>
        esistere * potere * usare * essere * telefonare * arrivare * scrivere *
        aspettare * essere
      </div>

      <p>
        Oggi quasi tutte le persone possiedono uno smartphone, ma un tempo non
        <label class="visuallyhidden" for="answer01"
          ><input type="text" name="answer01" id="answer01"
        /></label>
        cos√¨. I primi cellulari
        <label class="visuallyhidden" for="answer02"
          ><input type="text" name="answer02" id="answer02"
        /></label>
        in Italia intorno al 1983. Non erano come quelli a cui siamo abituati
        adesso:
        <label class="visuallyhidden" for="answer03"
          ><input type="text" name="answer03" id="answer03"
        /></label>
        molto pi√π grandi e ingombranti.
      </p>

      <p>
        Quando non
        <label class="visuallyhidden" for="answer04"
          ><input type="text" name="answer04" id="answer04"
        /></label>
        i cellulari, le persone
        <label class="visuallyhidden" for="answer05"
          ><input type="text" name="answer05" id="answer05"
        /></label>
        il telefono fisso,
        <label class="visuallyhidden" for="answer06"
          ><input type="text" name="answer06" id="answer06"
        /></label>
        le lettere e se erano fuori casa
        <label class="visuallyhidden" for="answer07"
          ><input type="text" name="answer07" id="answer07"
        /></label>
        da una cabina pubblica.
      </p>

      <p>
        Se facevi tardi a un appuntamento, non
        <label class="visuallyhidden" for="answer08"
          ><input type="text" name="answer08" id="answer08"
        /></label>
        avvisare. Mi ricordo che una volta
        <label class="visuallyhidden" for="answer09"
          ><input type="text" name="answer09" id="answer09"
        /></label>
        un mio amico per due ore: aveva perso il treno.
      </p>

      <button type="submit">Controlla le tue risposte</button>
    </form>

    <a href="./prova01es03.html">Indietro</a>
    <a href="./index.html">Pagina iniziale</a>
    <a href="./prova01es06.html">Avanti</a>

    <script>
      const solutions = [
        "era",
        "sono arrivati",
        "erano",
        "esistevano",
        "usavano",
        "scrivevano",
        "telefonavano",
        "potevi",
        "ho aspettato",
      ];

      const esercizio05 = document.getElementById("esercizio05");

      esercizio05.addEventListener("submit", (e) => {
        e.preventDefault();

        const fields = Array.from(
          esercizio05.querySelectorAll("input[type='text']")
        );
        const answers = fields.map((field) => field.value);

        const normalizeAnswer = (answer) => {
          return answer.trim().toLowerCase();
        };

        const checkAnswer = (answer, idx) => {
          if (answer === "" || answer === "Scrivi la tua risposta") {
            fields[idx].value = "scrivi la tua risposta";
            return;
          }

          const rawAnswer = normalizeAnswer(answer);

          if (rawAnswer === solutions[idx]) {
            fields[idx].style.border = "3px solid green";
            console.log("üëç");
          } else {
            fields[idx].style.border = "3px solid red";
            console.log("üëé");
          }
        };

        answers.forEach((answer, idx) => checkAnswer(answer, idx));
      });
    </script>
  </body>
</html>
