<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
    <title>Esercizio 8</title>
    <link rel="stylesheet" href="/output.css" />
  </head>

  <body>
    <form action="#" id="esercizio08" autocomplete="off">
      <h1>
        8. Ascolta i testi. Poi completa le frasi: scegli una delle tre proposte
        di completamento.
      </h1>

      <div>
        <p>1. L'hotel Elizabeth</p>
        <ol>
          <span data-risp="">
            <li>
              <label for="1a">√® in via Puccini.</label>
              <input type="radio" name="answer01" value="a" id="1a" />
            </li>
            <li>
              <label for="1b">√® a cinque fermate di autobus.</label>
              <input type="radio" name="answer01" value="b" id="1b" />
            </li>
            <li>
              <label for="1c">
                √® raggiungibile a piedi in un quarto d'ora.
              </label>
              <input type="radio" name="answer01" value="c" id="1c" />
            </li>
          </span>
        </ol>
      </div>

      <div>
        <p>2. Il biglietto giornaliero</p>
        <ol>
          <span data-risp="">
            <li>
              <label for="2a">costa quanto il biglietto singolo.</label>
              <input type="radio" name="answer02" value="a" id="2a" />
            </li>
            <li>
              <label for="2b">si deve timbrare una sola volta.</label>
              <input type="radio" name="answer02" value="b" id="2b" />
            </li>
            <li>
              <label for="2c">
                √® pi√π conveniente se si fanno almeno tre viaggi.
              </label>
              <input type="radio" name="answer02" value="c" id="2c" />
            </li>
          </span>
        </ol>
      </div>

      <div>
        <p>3. Il corso di nuoto</p>
        <ol>
          <span data-risp="">
            <li>
              <label for="3a">√® una volta alla settimana. </label>
              <input type="radio" name="answer03" value="a" id="3a" />
            </li>
            <li>
              <label for="3b">√® in estate.</label
              ><input type="radio" name="answer03" value="b" id="3b" />
            </li>
            <li>
              <label for="3c">costa 120 euro in totale. </label>
              <input type="radio" name="answer03" value="c" id="3c" />
            </li>
          </span>
        </ol>
      </div>

      <div>
        <p>4. Elena</p>
        <ol>
          <span data-risp="">
            <li>
              <label for="4a">
                non vuole andare al concerto perch√© non le piace la musica
                classica.
              </label>
              <input type="radio" name="answer04" value="a" id="4a" />
            </li>
            <li>
              <label for="4b">preferisce fare shopping.</label>
              <input type="radio" name="answer04" value="b" id="4b" />
            </li>
            <li>
              <label for="4c">deve comprare un vestito.</label>
              <input type="radio" name="answer04" value="c" id="4c" />
            </li>
          </span>
        </ol>
      </div>

      <div>
        <p>5. L'annuncio dice che</p>
        <ol>
          <span data-risp="">
            <li>
              <label for="5a">
                paghi lo stesso prezzo in qualsiasi momento della giornata.
              </label>
              <input type="radio" name="answer05" value="a" id="5a" />
            </li>
            <li>
              <label for="5b">puoi attivare l'offerta su internet.</label>
              <input type="radio" name="answer05" value="b" id="5b" />
            </li>
            <li>
              <label for="5c">
                paghi lo stesso prezzo per chiamare i telefoni fissi o i
                cellulari.
              </label>
              <input type="radio" name="answer05" value="c" id="5c" />
            </li>
          </span>
        </ol>
      </div>

      <div>
        <p>6. L'avviso</p>
        <ol>
          <span data-risp="">
            <li>
              <label for="6a">
                comunica che a causa di un guasto non ci sono treni diretti a
                Bergamo.
              </label>
              <input type="radio" name="answer06" value="a" id="6a" />
            </li>
            <li>
              <label for="6b">√® rivolto a tutti i viaggiatori.</label>
              <input type="radio" name="answer06" value="b" id="6b" />
            </li>
            <li>
              <label for="6c">
                comunica che c'√® un treno alternativo per raggiungere la
                stazione di Bergamo.
              </label>
              <input type="radio" name="answer06" value="c" id="6c" />
            </li>
          </span>
        </ol>
      </div>

      <div>
        <p>7. Questa notizia dice che</p>
        <ol>
          <span data-risp="">
            <li>
              <label for="7a">
                per combattere il caldo bisogna cambiare lo stile di vita.
              </label>
              <input type="radio" name="answer07" value="a" id="7a" />
            </li>
            <li>
              <label for="7b">
                per combattere il caldo non bisogna uscire di casa al mattino.
              </label>
              <input type="radio" name="answer07" value="b" id="7b" />
            </li>
            <li>
              <label for="7c">
                per combattere il caldo bisogna mettere abiti neri.
              </label>
              <input type="radio" name="answer07" value="c" id="7c" />
            </li>
          </span>
        </ol>
      </div>

      <div>
        <p>8. Gli studenti</p>
        <ol>
          <span data-risp="">
            <li>
              <label for="8a">non vogliono andare a scuola.</label>
              <input type="radio" name="answer08" value="a" id="8a" />
            </li>
            <li>
              <label for="8b">
                hanno pulito le strade dopo la manifestazione.
              </label>
              <input type="radio" name="answer08" value="b" id="8b" />
            </li>
            <li>
              <label for="8c">
                hanno scioperato contro i tagli alla scuola.
              </label>
              <input type="radio" name="answer08" value="c" id="8c" />
            </li>
          </span>
        </ol>
      </div>

      <button type="submit">Controlla le tue risposte</button>
    </form>

    <a href="./prova01es07.html">Indietro</a>
    <a href="./index.html">Pagina iniziale</a>
    <a href="./prova01es09.html">Avanti</a>

    <script>
      const solutions = ["c", "c", "b", "c", "a", "c", "a", "b"];

      const esercizio08 = document.getElementById("esercizio08");

      esercizio08.addEventListener("submit", (e) => {
        e.preventDefault();

        const fields = Array.from(
          esercizio08.querySelectorAll("input[type='radio']")
        );

        // if field.checked pass value to the parent
        fields.forEach((field, idx) => {
          field.checked
            ? (field.parentNode.parentNode.dataset.risp = field.value)
            : "";
        });

        const attrs = Array.from(
          esercizio08.querySelectorAll("span[data-risp]")
        );

        const answers = attrs.map((item) => item.dataset.risp);

        const checkAnswer = (answer, idx) => {
          if (answer == solutions[idx].toString()) {
            console.log("üëç", answer, solutions[idx]);
            return true;
          } else {
            console.log("üëé", answer, solutions[idx]);
            return false;
          }
        };

        attrs
          .map((item) => item.dataset.risp)
          .forEach((answer, idx) => {
            if (!answer) return;

            checkAnswer(answer, idx)
              ? attrs[idx]
                  .querySelector(`input[value="${answer}"]`)
                  .parentNode.classList.add("right")
              : attrs[idx]
                  .querySelector(`input[value="${answer}"]`)
                  .parentNode.classList.add("error");
          });
      });
    </script>
  </body>
</html>
