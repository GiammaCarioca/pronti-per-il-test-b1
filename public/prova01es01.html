<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
    <title>Esercizio 1</title>
    <link rel="stylesheet" href="/public/output.css" />
  </head>

  <body class="text-gray-800 bg-gray-100">
    <div class="container p-6 mx-auto lg:w-2/3 md:p-20">
      <h1 class="text-xl font-bold md:text-3xl">
        1. Leggi il testo e rispondi alla domanda.
      </h1>
      <h2
        class="px-4 py-3 my-6 text-lg font-bold tracking-wide text-blue-700 bg-blue-100 shadow-lg"
      >
        Gli adolescenti sono i pi√π attenti a riciclo e ambiente.
      </h2>
      <p class="py-1 leading-relaxed">
        Publicati i risultati di una ricerca: gli adolescenti tra i 15 e i 19
        anni sono impegnati e informati.
      </p>
      <p class="py-1 leading-relaxed">
        Gli adolescenti italiani fanno la raccolta differenziata e sono
        preparati sui temi ambientali, tanto da adottare stili di vita pi√π
        sostenibili e comunque attenti a consumi e risorse: 8 su 10 sono
        preoccupati per il futuro del loro pianeta.
      </p>
      <p class="py-1 leading-relaxed">
        I giovani si informano attraverso la famiglia e gli amici (65 per cento
        degli intervistati) e attraverso internet. Quasi tutti i ragazzi
        affermano di aver ricevuto una educazione ambientale (86 per cento), e
        oltre la met√† (54 per cento) dice di averla ricevuta in famiglia, prima
        ancora che a scuola.
      </p>

      <form class="py-6" action="#" id="esercizio01" autocomplete="off">
        <h3 class="pb-3 font-bold text-l">Secondo la ricerca</h3>
        <ol>
          <span class="space-y-1" data-risp="">
            <li class="p-2">
              <label for="1a">
                A. gli adolescenti non parlano di ambiente in famiglia.
              </label>
              <input
                class="w-6 h-6 form-checkbox"
                type="radio"
                name="answer"
                value="a"
                id="1a"
              />
            </li>
            <li class="p-2">
              <label for="1b">
                B. il 54% degli adolescenti √® preoccupato per il futuro del
                pianeta.
              </label>
              <input
                class="w-6 h-6 form-checkbox"
                type="radio"
                name="answer"
                value="b"
                id="1b"
              />
            </li>
            <li class="p-2">
              <label for="1c">
                C. la maggior parte degli adolescenti ha ricevuto un'educazione
                ambientale in famiglia.
              </label>
              <input
                class="w-6 h-6 form-checkbox"
                type="radio"
                name="answer"
                value="c"
                id="1c"
              />
            </li>
          </span>
        </ol>
        <button
          class="px-4 py-2 my-8 font-bold text-blue-700 bg-transparent border-2 border-blue-700 border-solid rounded shadow-lg hover:text-blue-100 hover:bg-blue-700"
          type="submit"
        >
          Controlla la tua risposta
        </button>
      </form>

      <nav class="flex justify-between">
        <a class="px-4 py-2 text-blue-700 hover:underline" href="./index.html"
          >Indietro</a
        >
        <a class="px-4 py-2 text-blue-700 hover:underline" href="./index.html"
          >Pagina iniziale</a
        >
        <a
          class="px-4 py-2 text-blue-700 hover:underline"
          href="./prova01es02.html"
          >Avanti</a
        >
      </nav>
    </div>

    <script>
      const solutions = ["c"];

      const esercizio01 = document.getElementById("esercizio01");

      esercizio01.addEventListener("submit", (e) => {
        e.preventDefault();

        const fields = Array.from(
          esercizio01.querySelectorAll("input[type='radio']")
        );

        // if field.checked pass value to the parent
        fields.forEach((field, idx) => {
          field.checked
            ? (field.parentNode.parentNode.dataset.risp = field.value)
            : "";
        });

        const attrs = Array.from(
          esercizio01.querySelectorAll("span[data-risp]")
        );

        const answers = attrs.map((item) => item.dataset.risp);

        const checkAnswer = (answer, idx) => {
          if (answer === solutions[idx].toString()) {
            console.log("üëç", answer, solutions[idx]);
            return true;
          } else {
            console.log("üëé", answer, solutions[idx]);
            return false;
          }
        };

        attrs
          .map((item) => item.dataset.risp)
          .forEach((answer, idx) => {
            if (!answer) return;

            checkAnswer(answer, idx)
              ? attrs[idx]
                  .querySelector(`input[value="${answer}"]`)
                  .parentNode.classList.add("right")
              : attrs[idx]
                  .querySelector(`input[value="${answer}"]`)
                  .parentNode.classList.add("error");
          });
      });
    </script>
  </body>
</html>
