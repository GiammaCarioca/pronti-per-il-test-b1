<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="data:;base64,iVBORw0KGgo=" />
    <title>Esercizio 7</title>
    <link rel="stylesheet" href="/output.css" />
  </head>

  <body>
    <h1>7. Completa i messaggi con la parola opportuna.</h1>
    <form action="#" id="esercizio07" autocomplete="off">
      <ol>
        <li>
          <p>– Dove butto la bottiglia di plastica?</p>
          <p>
            – Butta<input
              aria-label="fill the gap"
              type="text"
              name="answer01"
              id="answer01"
            />
            nel sacco giallo.
          </p>
        </li>
        <li>
          <p>
            Le mie figlie non hanno ancora imparato a fare la raccolta
            differenziata: ogni volta
            <input
              aria-label="fill the gap"
              type="text"
              name="answer02"
              id="answer02"
            />
            devo spiegare tutto di nuovo.
          </p>
        </li>
        <li>
          <p>
            Marco
            <input
              aria-label="fill the gap"
              type="text"
              name="answer03"
              id="answer03"
            />
            ha detto di andare in discarica a portare l'olio, ma ora non posso!
          </p>
        </li>
        <li>
          <p>– I medicinali scaduti vanno portati in farmacia!</p>
          <p>
            – Non preoccuparti! Per questa volta
            <input
              aria-label="fill the gap"
              type="text"
              name="answer04"
              id="answer04"
            />
            penso io.
          </p>
        </li>
        <li>
          <p>
            Quel sacco è troppo pieno di plastica,
            <input
              aria-label="fill the gap"
              type="text"
              name="answer05"
              id="answer05"
            />
            hai messa troppa.
          </p>
        </li>
      </ol>
      <button type="submit">Controlla le tue risposte</button>
    </form>

    <a href="./prova01es06.html">Indietro</a>
    <a href="./index.html">Pagina iniziale</a>
    <a href="./prova01es08.html">Avanti</a>

    <script>
      const solutions = ["la", "gli", "mi", "ci", "ne"];

      const esercizio07 = document.getElementById("esercizio07");

      esercizio07.addEventListener("submit", (e) => {
        e.preventDefault();

        const fields = Array.from(
          esercizio07.querySelectorAll("input[type='text']")
        );
        const answers = fields.map((field) => field.value);

        const normalizeAnswer = (answer) => {
          return answer.trim().toLowerCase();
        };

        const checkAnswer = (answer, idx) => {
          if (answer === "" || answer === "Scrivi la tua risposta") {
            fields[idx].value = "Scrivi la tua risposta";
            return;
          }

          const rawAnswer = normalizeAnswer(answer);

          if (rawAnswer === solutions[idx]) {
            fields[idx].style.border = "3px solid green";
            console.log("👍");
          } else {
            fields[idx].style.border = "3px solid red";
            console.log("👎");
          }
        };

        answers.forEach((answer, idx) => checkAnswer(answer, idx));
      });
    </script>
  </body>
</html>
