{"version":3,"sources":["../data.js","../node_modules/xstate/es/_virtual/_tslib.js","../node_modules/xstate/es/constants.js","../node_modules/xstate/es/environment.js","../node_modules/xstate/es/utils.js","../node_modules/xstate/es/mapState.js","../node_modules/xstate/es/types.js","../node_modules/xstate/es/actionTypes.js","../node_modules/xstate/es/actions.js","../node_modules/xstate/es/stateUtils.js","../node_modules/xstate/es/State.js","../node_modules/xstate/es/serviceScope.js","../node_modules/xstate/es/Actor.js","../node_modules/xstate/es/invokeUtils.js","../node_modules/xstate/es/StateNode.js","../node_modules/xstate/es/Machine.js","../node_modules/xstate/es/scheduler.js","../node_modules/xstate/es/registry.js","../node_modules/xstate/es/devTools.js","../node_modules/xstate/es/interpreter.js","../node_modules/xstate/es/match.js","../node_modules/xstate/es/index.js","scripts/machine.js","scripts/service.js","index.js","scripts/handleMultipleChoice.js"],"names":["prova01","es01","answer01","es02","answer02","answer03","answer04","answer05","answer06","answer07","answer08","answer09","answer10","answer11","answer12","es03","answer13","answer14","answer15","answer16","answer17","answer18","answer19","answer20","es04","es05","es06","es07","es08","es09","prova02","es10","prova03","prova04","prova05","prova06","__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__values","o","m","Symbol","iterator","next","value","done","__read","r","ar","push","error","__spread","concat","STATE_DELIMITER","EMPTY_ACTIVITY_MAP","DEFAULT_GUARD_TYPE","TARGETLESS_KEY","IS_PRODUCTION","keys","matchesState","parentStateId","childStateId","delimiter","parentStateValue","toStateValue","childStateValue","isString","every","key","getEventType","event","type","Error","toStatePath","stateId","isArray","toString","split","isStateLike","state","stateValue","pathToStateValue","statePath","marker","mapValues","collection","iteratee","result","collectionKeys","mapFilterValues","predicate","e_1","_a","_b","_c","item","e_1_1","return","path","props","object","e_2","props_1","props_1_1","e_2_1","nestedPath","accessorProp","e_3","props_2","props_2_1","prop","e_3_1","toStatePaths","flatten","map","subStateValue","subPath","array","toArrayStrict","toArray","undefined","mapContext","mapper","context","_event","e_5","isFunction","data","subMapper","e_5_1","isBuiltInEvent","eventType","test","isPromiseLike","Promise","then","partition","items","e_6","truthy","falsy","items_1","items_1_1","e_6_1","updateHistoryStates","hist","states","subHist","current","updateHistoryValue","updateContext","assignActions","updatedContext","warn","reduce","acc","assignAction","e_7","assignment","meta","action","partialUpdate","propAssignment","e_7_1","Array","toGuard","condition","guardMap","name","isObservable","subscribe","message","console","args","symbolObservable","observable","isMachine","uniqueId","currentId","toEventObject","payload","toSCXMLEvent","scxmlEvent","$$type","eventObject","toTransitionConfigArray","configLike","transitions","transitionLike","target","normalizeTarget","reportUnhandledExceptionOnInvocation","originalError","currentError","id","originalStackTrace","stack","stackTrace","evaluateGuard","machine","guard","guards","options","guardMeta","cond","condFn","toInvokeSource","src","mapState","stateMap","foundStateId","mappedStateId","ActionTypes","SpecialTargets","start","Start","stop","Stop","raise","Raise","send","Send","cancel","Cancel","nullEvent","NullEvent","Assign","after","After","doneState","DoneState","log","Log","init","Init","invoke","Invoke","errorExecution","ErrorExecution","errorPlatform","ErrorPlatform","ErrorCustom","update","Update","choose","Choose","pure","Pure","initEvent","getActionFunction","actionType","actionFunctionMap","toActionObject","actionObject","exec","defineProperty","enumerable","configurable","toActionObjects","subAction","toActivityDefinition","raise$1","to","Internal","resolveRaise","send$1","delay","resolveSend","ctx","delaysMap","resolvedDelay","resolvedEvent","configDelay","resolvedTarget","sendParent","Parent","sendUpdate","respond","_","__","origin","defaultLogExpr","expr","label","log$1","resolveLog","sendId","cancel$1","activity","activityDef","actorRef","resolveStop","actorRefOrString","resolvedActorRef","assign$1","delayRef","idSuffix","doneInvoke","DoneInvoke","getActions","get","forwardTo","escalate","errorData","error$1","conds","resolveActions","currentState","currentContext","actions","otherActions","sendAction","delays","choose$1","matchedActions","find","resolved","pure$1","stop$1","isLeafNode","stateNode","getChildren","getAllStateNodes","stateNodes","getConfiguration","prevStateNodes","e_4","_d","prevAdjList","getAdjList","Set","configuration","configuration_1","configuration_1_1","parent","has","add","adjList","configuration_2","configuration_2_1","_e","_f","child","forEach","sn","initialStateNodes","configuration_3","configuration_3_1","e_4_1","getValueFromAdj","baseNode","childStateNodes","childStateNode","csn","Map","configuration_4","configuration_4_1","set","getValue","rootNode","iterable","some","member","nextEvents","ownEvents","isInFinalState","stateValuesEqual","a","b","aKeys","bKeys","isState","bindActionToState","boundAction","State","config","_this","activities","events","_sessionid","historyValue","history","matches","bind","toStrings","children","from","create","inert","valueKeys","toJSON","jsonValues","serviceStack","provide","service","fn","pop","consume","createNullActor","unsubscribe","createInvocableActor","invokeDefinition","invokeSrc","serviceCreator","services","resolvedData","tempActor","createDeferredActor","entity","deferred","withContext","initialState","isActor","simpleSrc","toInvokeDefinition","invokeConfig","onDone","onError","invokeDef","NULL_EVENT","STATE_IDENTIFIER","WILDCARD","EMPTY_OBJECT","isStateId","str","createDefaultOptions","validateArrayifiedTransitions","hasNonLastUnguardedTarget","slice","transition","eventText","StateNode","order","__xstatenode","__cache","relativeValue","initialStateValue","on","candidates","delayedTransitions","idMap","_parent","_key","join","version","parallel","initial","stateConfig","dfs","_transient","always","strict","onEntry","entry","onExit","exit","doneData","invokeSource","_init","withConfig","definition","getDelayedTransitions","formatTransitions","getCandidates","eventName","transient","filter","sameEventType","afterConfig","mutateEntryExit","configTransition","resolvedTransition","isNaN","delayedTransition","formatTransition","getStateNodes","getStateNode","subStateKeys","subStateNodes","subStateKey","allSubStateNodes","subStateNode","handles","includes","resolveState","resolve","transitionLeafNode","transitionCompoundNode","_transition","transitionParallelNode","transitionMap","stateTransitions","enabledTransitions","st","entryNodes","entrySet","exitSet","source","selectedTransition","nextStateNodes","candidate","stateIn","in","resolvedContext","isInState","getStateNodeById","guardPassed","err","allNextStateNodes","getRelativeStateNodes","isInternal","internal","nodesFromChild","escapes","nodes","prevState","prevConfig","resolvedConfig","resolvedConfig_1","resolvedConfig_1_1","prevConfig_1","prevConfig_1_1","doneEvents","grandparent","parentNode","sort","entryStates","exitStates","entryActions","exitActions","resolvedStateValue","getResolvedPath","stateTransition","resolveTransition","resolveRaisedTransition","originalEvent","currentActions","unshift","actions_1","actions_1_1","start$1","resolvedActions","raisedEvents","nonRaisedActions","resolvedConfiguration","isDone","nextState","didUpdateContext","changed","maybeNextState","raisedEvent","shift","stateKey","resolvedStateId","getStateNodeByPath","arrayStatePath","currentStateNode","stateIdentifier","getInitialState","historyConfig","relativeStateId","resolveHistory","initialStateNodePaths","initialPath","getFromRelativePath","relativePath","childStatePath","relativeStateValue","historyTarget","relativeChildPath","subHistoryValue","subStatePath","childStateIds","stateIds","e_8","event_1","e_8_1","resolveTarget","_target","isInternalTarget","targetStateNode","transitionConfig","normalizedTarget","e_9","onConfig","wildcardConfigs","strictTransitionConfigs_1","transitionConfigArray","eventlessConfig","doneConfig","String","settleTransitions","formattedTransitions","delayedTransitions_1","delayedTransitions_1_1","e_9_1","Machine","initialContext","resolvedInitialContext","createMachine","defaultOptions","deferEvents","Scheduler","processingEvent","queue","initialized","initialize","callback","schedule","process","flushEvents","task","clear","nextCallback","sessionIdIndex","registry","bookId","register","actor","free","delete","getDevTools","w","window","__xstate__","registerService","devTools","InterpreterStatus","DEFAULT_SPAWN_OPTIONS","sync","autoForward","Interpreter","scheduler","delayedEventsMap","listeners","contextListeners","stopListeners","doneListeners","eventListeners","sendListeners","status","NotStarted","batch","Stopped","JSON","stringify","Running","forward","_state","sendTo","isParent","sessionId","resolvedOptions","clock","logger","resolvedId","_initialState","execute","actionsConfig","listener","_g","_h","_j","_k","contextListener","finalChildStateNode","_l","_m","onTransition","nextListenerOrObserver","completeListener","resolvedCompleteListener","complete","onEvent","onSend","onChange","onStop","off","resolvedState","attachDev","e_10","_o","e_11","e_11_1","_p","_q","clearTimeout","e_10_1","e_12","batchChanged","batchedActions","_loop_1","events_1","events_1_1","e_12_1","sender","nextEvent","e_13","e_13_1","defer","setTimeout","actionOrExec","spawnPromise","spawnCallback","spawnObservable","spawnMachine","spawnActivity","stopChild","removeChild","childId","spawn","spawnActor","childService","doneEvent","promise","canceled","response","errorEvent","handleError","unsubscribed","callbackStop","receivers","newListener","receiver","subscription","implementation","dispose","spawnEffect","__REDUX_DEVTOOLS_EXTENSION__","devToolsOptions","connect","autoPause","stateSanitizer","features","jump","skip","global","ms","self","interpret","resolveSpawnOptions","nameOrOptions","isLazyEntity","interpreter","matchState","patterns","defaultValue","patterns_1","patterns_1_1","unanswered","INPUT","answered","SUBMIT","corrected","document","querySelector","classList","setAttribute","remove","removeAttribute","location","pathname","getDirectoryPathFromURL","pathArray","directoryPath","getFilePathFromURL","filePath","substring","solutions","allSolutions","form","esercizio","getElementById","answers","checkAnswers","fields","checkedFields","querySelectorAll","field","checked","addEventListener","preventDefault"],"mappings":";AAAe,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAAA,IAAA,EAAA,CACbA,QAAS,CACPC,KAAM,CAAEC,SAAU,KAClBC,KAAM,CACJD,SAAU,OACVE,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QACVC,SAAU,OACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QAEZC,KAAM,CACJb,SAAU,MACVE,SAAU,SACVC,SAAU,eACVC,SAAU,MACVC,SAAU,QACVC,SAAU,QACVC,SAAU,kBACVC,SAAU,UACVC,SAAU,WACVC,SAAU,WACVC,SAAU,YACVC,SAAU,QACVE,SAAU,cACVC,SAAU,MACVC,SAAU,SACVC,SAAU,YACVC,SAAU,UACVC,SAAU,mBACVC,SAAU,cACVC,SAAU,eAEZC,KAAM,CACJtB,SAAU,MACVE,SAAU,gBACVC,SAAU,QACVC,SAAU,aACVC,SAAU,UACVC,SAAU,aACVC,SAAU,eACVC,SAAU,SACVC,SAAU,gBAEZc,KAAM,CACJvB,SAAU,IACVE,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,KAEZc,KAAM,CACJxB,SAAU,KACVE,SAAU,MACVC,SAAU,KACVC,SAAU,KACVC,SAAU,MAEZoB,KAAM,CACJzB,SAAU,IACVE,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,KAEZkB,KAAM,CACJ1B,SAAU,QACVE,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QAEZiB,KAAM,CACJ3B,SAAU,OACVE,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,SAGdoB,QAAS,CACP7B,KAAM,CAAEC,SAAU,KAClBC,KAAM,CACJD,SAAU,QACVE,SAAU,QACVC,SAAU,OACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QACVC,SAAU,OACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QAEZC,KAAM,CACJb,SAAU,KACVE,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,MAEZgB,KAAM,CACJtB,SAAU,KACVE,SAAU,MACVC,SAAU,MACVC,SAAU,KACVC,SAAU,KACVC,SAAU,MAEZiB,KAAM,CACJvB,SAAU,SACVE,SAAU,QACVC,SAAU,SACVC,SAAU,OACVC,SAAU,SACVC,SAAU,SAEZkB,KAAM,CACJxB,SAAU,IACVE,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,KAEZe,KAAM,CACJzB,SAAU,KACVE,SAAU,KACVC,SAAU,SACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,SACVC,SAAU,MAEZgB,KAAM,CACJ1B,SAAU,IACVE,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,KAEZmB,KAAM,CACJ3B,SAAU,OACVE,SAAU,QACVC,SAAU,QACVC,SAAU,QACVC,SAAU,OACVC,SAAU,OACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QACVC,SAAU,QAEZmB,KAAM,CACJ7B,SAAU,QACVE,SAAU,OACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,SAGdsB,QAAS,CACP/B,KAAM,CAAEC,SAAU,KAClBC,KAAM,CACJD,SAAU,OACVE,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QAEZC,KAAM,CACJb,SAAU,mBACVE,SAAU,kBACVC,SAAU,oCACVC,SAAU,uBACVC,SAAU,qBACVC,SAAU,gBACVC,SAAU,gCACVC,SAAU,6BACVC,SAAU,qCACVC,SAAU,8BACVC,SAAU,6BAEZW,KAAM,CACJtB,SAAU,KACVE,SAAU,KACVC,SAAU,MACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,QACVC,SAAU,KACVE,SAAU,UAEZS,KAAM,CACJvB,SAAU,IACVE,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,KAEZc,KAAM,CACJxB,SAAU,KACVE,SAAU,MACVC,SAAU,SACVC,SAAU,KACVC,SAAU,MAEZoB,KAAM,CACJzB,SAAU,IACVE,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,KAEZkB,KAAM,CACJ1B,SAAU,QACVE,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QAEZe,KAAM,CACJ3B,SAAU,QACVE,SAAU,QACVC,SAAU,OACVC,SAAU,OACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,UAGduB,QAAS,CACPhC,KAAM,CAAEC,SAAU,KAClBC,KAAM,CACJD,SAAU,OACVE,SAAU,QACVC,SAAU,QACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QAEZC,KAAM,CACJb,SAAU,eACVE,SAAU,gCACVC,SAAU,eACVC,SAAU,kBACVC,SAAU,aACVC,SAAU,+BAEZgB,KAAM,CACJtB,SAAU,KACVE,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,MAEZa,KAAM,CACJvB,SAAU,IACVE,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,KAEZc,KAAM,CACJxB,SAAU,KACVE,SAAU,KACVC,SAAU,KACVC,SAAU,OACVC,SAAU,MAEZoB,KAAM,CACJzB,SAAU,IACVE,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,IACVC,SAAU,KAEZkB,KAAM,CACJ1B,SAAU,QACVE,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QACVC,SAAU,OACVC,SAAU,OACVC,SAAU,QAEZe,KAAM,CACJ3B,SAAU,QACVE,SAAU,OACVC,SAAU,QACVC,SAAU,QACVC,SAAU,OACVC,SAAU,OACVC,SAAU,QACVC,SAAU,SAGdwB,QAAS,CACPnB,KAAM,CACJb,SAAU,KACVE,SAAU,QACVC,SAAU,KACVC,SAAU,QACVC,SAAU,IACVC,SAAU,QACVC,SAAU,KACVC,SAAU,KACVC,SAAU,MACVC,SAAU,QACVC,SAAU,MAEZW,KAAM,CACJtB,SAAU,OACVE,SAAU,QACVC,SAAU,QACVC,SAAU,QACVC,SAAU,KACVC,SAAU,QACVC,SAAU,MACVC,SAAU,QACVC,SAAU,OACVC,SAAU,QAEZa,KAAM,CACJvB,SAAU,OACVE,SAAU,QACVC,SAAU,MACVC,SAAU,MACVC,SAAU,QACVC,SAAU,QACVC,SAAU,QACVC,SAAU,MACVC,SAAU,KACVC,SAAU,OACVC,SAAU,QACVC,SAAU,QAEZa,KAAM,CACJzB,SAAU,KACVE,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,SACVC,SAAU,KACVC,SAAU,KACVC,SAAU,KACVC,SAAU,SACVC,SAAU,OAGduB,QAAS,CACPR,KAAM,CACJzB,SAAU,KACVE,SAAU,QACVC,SAAU,KACVC,SAAU,KACVC,SAAU,QA9bD,QAAA,QAAA;;ACmFd,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,EAAA,QAAA,OAAA,EAAA,QAAA,SAAA,EAAA,QAAA,SAAA,EAAA,QAAA,cAAA,EArED,IAAI6B,EAAW,WAWNA,OAVPA,QAAAA,SAAAA,EAAWC,OAAOC,QAAU,SAAkBC,GACvC,IAAA,IAAIC,EAAGC,EAAI,EAAGC,EAAIC,UAAUC,OAAQH,EAAIC,EAAGD,IAGzC,IAAA,IAAII,KAFTL,EAAIG,UAAUF,GAEOJ,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,KAAIN,EAAEM,GAAKL,EAAEK,IAGrEN,OAAAA,GAGFH,EAASa,MAAM,KAAMN,YAG9B,SAASO,EAAOV,EAAGW,GACbZ,IAAAA,EAAI,GAEH,IAAA,IAAIM,KAAKL,EAAOH,OAAOS,UAAUC,eAAeC,KAAKR,EAAGK,IAAMM,EAAEC,QAAQP,GAAK,IAAGN,EAAEM,GAAKL,EAAEK,IAE1FL,GAAK,MAALA,GAAqD,mBAAjCH,OAAOgB,sBAA2C,CAAA,IAAIZ,EAAI,EAAb,IAAgBI,EAAIR,OAAOgB,sBAAsBb,GAAIC,EAAII,EAAED,OAAQH,IAClIU,EAAEC,QAAQP,EAAEJ,IAAM,GAAKJ,OAAOS,UAAUQ,qBAAqBN,KAAKR,EAAGK,EAAEJ,MAAKF,EAAEM,EAAEJ,IAAMD,EAAEK,EAAEJ,KAEzFF,OAAAA,EAGT,SAASgB,EAASC,GACZC,IAAAA,EAAsB,mBAAXC,QAAyBF,EAAEE,OAAOC,UAC7ClB,EAAI,EACJgB,OAAAA,EAAUA,EAAET,KAAKQ,GACd,CACLI,KAAM,WAEG,OADHJ,GAAKf,GAAKe,EAAEZ,SAAQY,OAAI,GACrB,CACLK,MAAOL,GAAKA,EAAEf,KACdqB,MAAON,KAMf,SAASO,EAAOP,EAAGd,GACbe,IAAAA,EAAsB,mBAAXC,QAAyBF,EAAEE,OAAOC,UAC7C,IAACF,EAAG,OAAOD,EACXf,IACAuB,EAEAb,EAHAV,EAAIgB,EAAET,KAAKQ,GAEXS,EAAK,GAGL,IACK,WAAO,IAANvB,GAAgBA,KAAM,MAAQsB,EAAIvB,EAAEmB,QAAQE,MAAMG,EAAGC,KAAKF,EAAEH,OACpE,MAAOM,GACPhB,EAAI,CACFgB,MAAOA,GAED,QACJ,IACEH,IAAMA,EAAEF,OAASL,EAAIhB,EAAC,SAAagB,EAAET,KAAKP,GACtC,QACJU,GAAAA,EAAG,MAAMA,EAAEgB,OAIZF,OAAAA,EAGT,SAASG,IACF,IAAA,IAAIH,EAAK,GAAIxB,EAAI,EAAGA,EAAIE,UAAUC,OAAQH,IAAKwB,EAAKA,EAAGI,OAAON,EAAOpB,UAAUF,KAE7EwB,OAAAA,EACR,QAAA,SAAA;;AChFD,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,QAAA,gBAAA,QAAA,mBAAA,QAAA,wBAAA,EAHA,IAAIK,EAAkB,IAGtB,QAAA,gBAAA,EAFA,IAAIC,EAAqB,GAEzB,QAAA,mBAAA,EADA,IAAIC,EAAqB,eACzB,QAAA,mBAAA,EAAA,IAAIC,EAAiB,GAArB,QAAA,eAAA;;ACHA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,mBAAA,EAAA,IAAIC,GAAgB,EAApB,QAAA,cAAA;;ACqlBC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,cAAA,EAAA,QAAA,QAAA,EAAA,QAAA,aAAA,EAAA,QAAA,QAAA,EAAA,QAAA,eAAA,EAAA,QAAA,WAAA,EAAA,QAAA,UAAA,EAAA,QAAA,aAAA,EAAA,QAAA,cAAA,EAAA,QAAA,YAAA,EAAA,QAAA,SAAA,EAAA,QAAA,KAAA,EAAA,QAAA,WAAA,EAAA,QAAA,gBAAA,EAAA,QAAA,UAAA,EAAA,QAAA,aAAA,EAAA,QAAA,WAAA,EAAA,QAAA,gBAAA,EAAA,QAAA,UAAA,EAAA,QAAA,iBAAA,EAAA,QAAA,qCAAA,EAAA,QAAA,QAAA,EAAA,QAAA,cAAA,EAAA,QAAA,cAAA,EAAA,QAAA,QAAA,EAAA,QAAA,eAAA,EAAA,QAAA,aAAA,EAAA,QAAA,YAAA,EAAA,QAAA,aAAA,EAAA,QAAA,aAAA,EAAA,QAAA,wBAAA,EAAA,QAAA,cAAA,EAAA,QAAA,oBAAA,EAAA,QAAA,mBAAA,EAAA,QAAA,KAAA,QAAA,SAAA,QAAA,iBAAA,QAAA,UAAA,EArlBD,IAAA,EAAA,QAAA,wBACA,EAAA,QAAA,kBACA,EAAA,QAAA,oBAEA,SAASC,EAAKd,GACLxB,OAAAA,OAAOsC,KAAKd,GAGrB,SAASe,EAAaC,EAAeC,EAAcC,QAC/B,IAAdA,IACFA,EAAYT,EAAZ,iBAGEU,IAAAA,EAAmBC,EAAaJ,EAAeE,GAC/CG,EAAkBD,EAAaH,EAAcC,GAE7CI,OAAAA,EAASD,KACPC,EAASH,IACJE,IAAoBF,EAO3BG,EAASH,GACJA,KAAoBE,EAGtBP,EAAKK,GAAkBI,MAAM,SAAUC,GACxC,OAAEA,KAAOH,GAINN,EAAaI,EAAiBK,GAAMH,EAAgBG,MAI/D,SAASC,EAAaC,GAChB,IACKJ,OAAAA,EAASI,IAA2B,iBAAVA,EAAqB,GAAKA,EAAQA,EAAMC,KACzE,MAAOrC,GACD,MAAA,IAAIsC,MAAM,yEAIpB,SAASC,EAAYC,EAASZ,GACxB,IACEa,OAAAA,EAAQD,GACHA,EAGFA,EAAQE,WAAWC,MAAMf,GAChC,MAAO5B,GACD,MAAA,IAAIsC,MAAM,IAAME,EAAU,iCAIpC,SAASI,EAAYC,GACZ,MAAiB,iBAAVA,GAAsB,UAAWA,GAAS,YAAaA,GAAS,UAAWA,GAAS,WAAYA,EAGhH,SAASf,EAAagB,EAAYlB,GAC5BgB,OAAAA,EAAYE,GACPA,EAAWpC,MAGhB+B,EAAQK,GACHC,EAAiBD,GAGA,iBAAfA,EACFA,EAIFC,EADSR,EAAYO,EAAYlB,IAI1C,SAASmB,EAAiBC,GACpBA,GAAqB,IAArBA,EAAUvD,OACLuD,OAAAA,EAAU,GAMd,IAHDtC,IAAAA,EAAQ,GACRuC,EAASvC,EAEJpB,EAAI,EAAGA,EAAI0D,EAAUvD,OAAS,EAAGH,IACpCA,IAAM0D,EAAUvD,OAAS,EAC3BwD,EAAOD,EAAU1D,IAAM0D,EAAU1D,EAAI,IAErC2D,EAAOD,EAAU1D,IAAM,GACvB2D,EAASA,EAAOD,EAAU1D,KAIvBoB,OAAAA,EAGT,SAASwC,EAAUC,EAAYC,GAIxB,IAHDC,IAAAA,EAAS,GACTC,EAAiB9B,EAAK2B,GAEjB7D,EAAI,EAAGA,EAAIgE,EAAe7D,OAAQH,IAAK,CAC1C4C,IAAAA,EAAMoB,EAAehE,GACzB+D,EAAOnB,GAAOkB,EAASD,EAAWjB,GAAMA,EAAKiB,EAAY7D,GAGpD+D,OAAAA,EAGT,SAASE,EAAgBJ,EAAYC,EAAUI,GACzCC,IAAAA,EAAKC,EAELL,EAAS,GAET,IACG,IAAA,IAAIM,GAAK,EAASnC,EAAAA,UAAAA,EAAK2B,IAAcS,EAAKD,EAAGlD,QAASmD,EAAGjD,KAAMiD,EAAKD,EAAGlD,OAAQ,CAC9EyB,IAAAA,EAAM0B,EAAGlD,MACTmD,EAAOV,EAAWjB,GAEjBsB,EAAUK,KAIfR,EAAOnB,GAAOkB,EAASS,EAAM3B,EAAKiB,KAEpC,MAAOW,GACPL,EAAM,CACJzC,MAAO8C,GAED,QACJ,IACEF,IAAOA,EAAGjD,OAAS+C,EAAKC,EAAGI,SAASL,EAAG7D,KAAK8D,GACxC,QACJF,GAAAA,EAAK,MAAMA,EAAIzC,OAIhBqC,OAAAA,EAQT,IAAIW,EAAO,SAAUC,GACZ,OAAA,SAAUC,GACXC,IAAAA,EAAKT,EAELL,EAASa,EAET,IACG,IAAA,IAAIE,GAAU,EAASH,EAAAA,UAAAA,GAAQI,EAAYD,EAAQ3D,QAAS4D,EAAU1D,KAAM0D,EAAYD,EAAQ3D,OAAQ,CAE3G4C,EAASA,EADEgB,EAAU3D,QAGvB,MAAO4D,GACPH,EAAM,CACJnD,MAAOsD,GAED,QACJ,IACED,IAAcA,EAAU1D,OAAS+C,EAAKU,EAAQL,SAASL,EAAG7D,KAAKuE,GAC3D,QACJD,GAAAA,EAAK,MAAMA,EAAInD,OAIhBqC,OAAAA,IASX,SAASkB,EAAWN,EAAOO,GAClB,OAAA,SAAUN,GACXO,IAAAA,EAAKf,EAELL,EAASa,EAET,IACG,IAAA,IAAIQ,GAAU,EAAST,EAAAA,UAAAA,GAAQU,EAAYD,EAAQjE,QAASkE,EAAUhE,KAAMgE,EAAYD,EAAQjE,OAAQ,CACvGmE,IAAAA,EAAOD,EAAUjE,MACrB2C,EAASA,EAAOmB,GAAcI,IAEhC,MAAOC,GACPJ,EAAM,CACJzD,MAAO6D,GAED,QACJ,IACEF,IAAcA,EAAUhE,OAAS+C,EAAKgB,EAAQX,SAASL,EAAG7D,KAAK6E,GAC3D,QACJD,GAAAA,EAAK,MAAMA,EAAIzD,OAIhBqC,OAAAA,GAIX,SAASyB,EAAahC,GAChB,OAACA,EAIDd,EAASc,GACJ,CAAC,CAACA,IAGEiC,EAAQvD,EAAKsB,GAAYkC,IAAI,SAAU9C,GAC9C+C,IAAAA,EAAgBnC,EAAWZ,GAE3B,MAAyB,iBAAlB+C,GAAgCA,GAAkB/F,OAAOsC,KAAKyD,GAAexF,OAIjFqF,EAAahC,EAAWZ,IAAM8C,IAAI,SAAUE,GAC1C,MAAA,CAAChD,GAAKhB,OAAOgE,KAJb,CAAC,CAAChD,OAXJ,CAAC,IAqBZ,SAAS6C,EAAQI,GACXzB,IAAAA,EAEG,OAACA,EAAK,IAAIxC,OAAOpB,MAAM4D,GAAI,EAASyB,EAAAA,UAAAA,IAG7C,SAASC,EAAc1E,GACjB+B,OAAAA,EAAQ/B,GACHA,EAGF,CAACA,GAGV,SAAS2E,EAAQ3E,GACXA,YAAU4E,IAAV5E,EACK,GAGF0E,EAAc1E,GAGvB,SAAS6E,EAAWC,EAAQC,EAASC,GAC/BC,IAAAA,EAAKjC,EAELkC,GAAAA,EAAWJ,GACNA,OAAAA,EAAOC,EAASC,EAAOG,MAG5BxC,IAAAA,EAAS,GAET,IACG,IAAA,IAAIM,GAAK,EAASzE,EAAAA,UAAAA,OAAOsC,KAAKgE,IAAU5B,EAAKD,EAAGlD,QAASmD,EAAGjD,KAAMiD,EAAKD,EAAGlD,OAAQ,CACjFyB,IAAAA,EAAM0B,EAAGlD,MACToF,EAAYN,EAAOtD,GAEnB0D,EAAWE,GACbzC,EAAOnB,GAAO4D,EAAUL,EAASC,EAAOG,MAExCxC,EAAOnB,GAAO4D,GAGlB,MAAOC,GACPJ,EAAM,CACJ3E,MAAO+E,GAED,QACJ,IACEnC,IAAOA,EAAGjD,OAAS+C,EAAKC,EAAGI,SAASL,EAAG7D,KAAK8D,GACxC,QACJgC,GAAAA,EAAK,MAAMA,EAAI3E,OAIhBqC,OAAAA,EAGT,SAAS2C,EAAeC,GACf,MAAA,kBAAkBC,KAAKD,GAGhC,SAASE,EAAczF,GACjBA,OAAAA,aAAiB0F,WAKP,OAAV1F,IAAmBkF,EAAWlF,IAA2B,iBAAVA,IAAuBkF,EAAWlF,EAAM2F,OAO7F,SAASC,EAAUC,EAAO/C,GACpBgD,IAAAA,EAAK9C,EAELC,GAAK,EAAO,EAAA,QAAA,CAAC,GAAI,IAAK,GACtB8C,EAAS9C,EAAG,GACZ+C,EAAQ/C,EAAG,GAEX,IACG,IAAA,IAAIgD,GAAU,EAASJ,EAAAA,UAAAA,GAAQK,EAAYD,EAAQlG,QAASmG,EAAUjG,KAAMiG,EAAYD,EAAQlG,OAAQ,CACvGoD,IAAAA,EAAO+C,EAAUlG,MAEjB8C,EAAUK,GACZ4C,EAAO1F,KAAK8C,GAEZ6C,EAAM3F,KAAK8C,IAGf,MAAOgD,GACPL,EAAM,CACJxF,MAAO6F,GAED,QACJ,IACED,IAAcA,EAAUjG,OAAS+C,EAAKiD,EAAQ5C,SAASL,EAAG7D,KAAK8G,GAC3D,QACJH,GAAAA,EAAK,MAAMA,EAAIxF,OAIhB,MAAA,CAACyF,EAAQC,GAGlB,SAASI,EAAoBC,EAAMjE,GAC1BI,OAAAA,EAAU6D,EAAKC,OAAQ,SAAUC,EAAS/E,GAC3C,GAAC+E,EAAD,CAIAhC,IAAAA,GAAiBjD,EAASc,QAAcwC,EAAYxC,EAAWZ,MAAU+E,EAAUA,EAAQC,aAAU5B,GAErG,GAACL,EAIE,MAAA,CACLiC,QAASjC,EACT+B,OAAQF,EAAoBG,EAAShC,OAK3C,SAASkC,EAAmBJ,EAAMjE,GACzB,MAAA,CACLoE,QAASpE,EACTkE,OAAQF,EAAoBC,EAAMjE,IAItC,SAASsE,EAAc3B,EAASC,EAAQ2B,EAAexE,GAwC9CyE,OAvCF/F,EAAL,eACEgG,IAAO9B,EAAS,0CAGGA,EAAU4B,EAAcG,OAAO,SAAUC,EAAKC,GAC7DC,IAAAA,EAAKjE,EAELkE,EAAaF,EAAaE,WAC1BC,EAAO,CACThF,MAAOA,EACPiF,OAAQJ,EACRhC,OAAQA,GAENqC,EAAgB,GAEhBnC,GAAAA,EAAWgC,GACbG,EAAgBH,EAAWH,EAAK/B,EAAOG,KAAMgC,QAEzC,IACG,IAAA,IAAIlE,GAAK,EAASnC,EAAAA,UAAAA,EAAKoG,IAAchE,EAAKD,EAAGlD,QAASmD,EAAGjD,KAAMiD,EAAKD,EAAGlD,OAAQ,CAC9EyB,IAAAA,EAAM0B,EAAGlD,MACTsH,EAAiBJ,EAAW1F,GAChC6F,EAAc7F,GAAO0D,EAAWoC,GAAkBA,EAAeP,EAAK/B,EAAOG,KAAMgC,GAAQG,GAE7F,MAAOC,GACPN,EAAM,CACJ3G,MAAOiH,GAED,QACJ,IACErE,IAAOA,EAAGjD,OAAS+C,EAAKC,EAAGI,SAASL,EAAG7D,KAAK8D,GACxC,QACJgE,GAAAA,EAAK,MAAMA,EAAI3G,OAKlB9B,OAAAA,OAAOC,OAAO,GAAIsI,EAAKM,IAC7BtC,GAAWA,EAqMf,QAAA,KAAA,EAhMD,IAAI8B,EAAO,aAuBX,SAAS9E,EAAQ/B,GACRwH,OAAAA,MAAMzF,QAAQ/B,GAIvB,SAASkF,EAAWlF,GACX,MAAiB,mBAAVA,EAGhB,SAASsB,EAAStB,GACT,MAAiB,iBAAVA,EAchB,SAASyH,EAAQC,EAAWC,GACtB,GAACD,EAIDpG,OAAAA,EAASoG,GACJ,CACL/F,KAAMhB,EADD,mBAELiH,KAAMF,EACN5E,UAAW6E,EAAWA,EAASD,QAAa9C,GAI5CM,EAAWwC,GACN,CACL/F,KAAMhB,EADD,mBAELiH,KAAMF,EAAUE,KAChB9E,UAAW4E,GAIRA,EAGT,SAASG,EAAa7H,GAChB,IACK,MAAA,cAAeA,GAASkF,EAAWlF,EAAM8H,WAChD,MAAOxI,GACA,OAAA,GAqHV,QAAA,KAAA,EA9LIuB,EAAL,gBACEgG,QAAAA,KAAAA,EAAO,SAAUa,EAAWK,GACtBzH,IAAAA,EAAQoH,aAAqB9F,MAAQ8F,OAAY9C,EAEjD,IAACtE,IAASoH,SAIE9C,IAAZoD,QAAuB,CACrBC,IAAAA,EAAO,CAAC,YAAcF,GAEtBzH,GACF2H,EAAK5H,KAAKC,GAIZ0H,QAAQnB,KAAKzH,MAAM4I,QAASC,MA6DlC,IAAIC,EAAgC,WAC3B,MAAkB,mBAAXrI,QAAyBA,OAAOsI,YAAc,eAD1B,GAIpC,SAASC,EAAUpI,GACb,IACK,MAAA,iBAAkBA,EACzB,MAAOV,GACA,OAAA,GAyGV,QAAA,iBAAA,EArGD,IAAI+I,EAAwB,WACtBC,IAAAA,EAAY,EACT,OAAA,WAEEA,SADPA,GACiBtG,SAAS,KAJF,GAQ5B,SAASuG,EAAc7G,EAAO8G,GAExBlH,OAAAA,EAASI,IAA2B,iBAAVA,GACrB,EAAS,EAAA,UAAA,CACdC,KAAMD,GACL8G,GAGE9G,EAGT,SAAS+G,EAAa/G,EAAOgH,GACvB,IAACpH,EAASI,IAAU,WAAYA,GAA0B,UAAjBA,EAAMiH,OAC1CjH,OAAAA,EAGLkH,IAAAA,EAAcL,EAAc7G,GACzB,OAAA,EAAS,EAAA,UAAA,CACdkG,KAAMgB,EAAYjH,KAClBwD,KAAMyD,EACND,OAAQ,QACRhH,KAAM,YACL+G,GAGL,SAASG,EAAwBnH,EAAOoH,GAa/BC,OAZWrE,EAAcoE,GAAYxE,IAAI,SAAU0E,GACpD,YAA0B,IAAnBA,GAA4D,iBAAnBA,GAA+BZ,EAAUY,GACpF,CACLC,OAAQD,EACRtH,MAAOA,IAIJ,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIsH,GAAiB,CAC5CtH,MAAOA,MAMb,SAASwH,EAAgBD,GACnBA,QAAWrE,IAAXqE,GAAwBA,IAAWrI,EAAvC,eAIO+D,OAAAA,EAAQsE,GAGjB,SAASE,EAAqCC,EAAeC,EAAcC,GACrE,IAACzI,EAAL,cAAoB,CACd0I,IAAAA,EAAqBH,EAAcI,MAAQ,oBAAsBJ,EAAcI,MAAQ,IAAM,GAE7FJ,GAAAA,IAAkBC,EAEpBrB,QAAQ1H,MAAM,2CAA6CgJ,EAAK,iBAAmBF,EAAgB,KAAOG,OACrG,CACDE,IAAAA,EAAaJ,EAAaG,MAAQ,oBAAsBH,EAAaG,MAAQ,IAAM,GAEvFxB,QAAQ1H,MAAM,wFAA0FgJ,EAAK,uBAA+BF,EAAgB,MAAQG,EAAqB,sBAAwBF,EAAe,KAAOI,KAK7O,SAASC,EAAcC,EAASC,EAAO7E,EAASC,EAAQ7C,GAClD0H,IAAAA,EAASF,EAAQG,QAAQD,OACzBE,EAAY,CACd5H,MAAOA,EACP6H,KAAMJ,EACN5E,OAAQA,GAGN4E,GAAAA,EAAMjI,OAAShB,EAAnB,mBACSiJ,OAAAA,EAAM9G,UAAUiC,EAASC,EAAOG,KAAM4E,GAG3CE,IAAAA,EAASJ,EAAOD,EAAMjI,MAEtB,IAACsI,EACG,MAAA,IAAIrI,MAAM,UAAYgI,EAAMjI,KAAO,oCAAsCgI,EAAQL,GAAK,MAGvFW,OAAAA,EAAOlF,EAASC,EAAOG,KAAM4E,GAGtC,SAASG,EAAeC,GAClB,MAAe,iBAARA,EACF,CACLxI,KAAMwI,GAIHA,EACR,QAAA,SAAA;;ACxjBA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,SAAA,EA7BD,IAAA,EAAA,QAAA,wBACA,EAAA,QAAA,cAEA,SAASC,EAASC,EAAUvI,GACtBiB,IAAAA,EAAKC,EAELsH,EAEA,IACG,IAAA,IAAIrH,GAAK,EAAS,EAAA,WAAA,EAAKoH,EAAAA,MAAAA,IAAYnH,EAAKD,EAAGlD,QAASmD,EAAGjD,KAAMiD,EAAKD,EAAGlD,OAAQ,CAC5EwK,IAAAA,EAAgBrH,EAAGlD,OAEnB,EAAauK,EAAAA,cAAAA,EAAezI,MAAcwI,GAAgBxI,EAAQ/C,OAASuL,EAAavL,UAC1FuL,EAAeC,IAGnB,MAAOnH,GACPL,EAAM,CACJzC,MAAO8C,GAED,QACJ,IACEF,IAAOA,EAAGjD,OAAS+C,EAAKC,EAAGI,SAASL,EAAG7D,KAAK8D,GACxC,QACJF,GAAAA,EAAK,MAAMA,EAAIzC,OAIhB+J,OAAAA,EAASC;;ACDlB,aA3BA,IAAIE,EAyBAC,EAEJ,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,QAAA,iBAAA,EAAA,QAAA,YAAA,EAzBA,SAAWD,GACTA,EAAW,MAAY,eACvBA,EAAW,KAAW,cACtBA,EAAW,MAAY,eACvBA,EAAW,KAAW,cACtBA,EAAW,OAAa,gBACxBA,EAAW,UAAgB,GAC3BA,EAAW,OAAa,gBACxBA,EAAW,MAAY,eACvBA,EAAW,UAAgB,aAC3BA,EAAW,WAAiB,cAC5BA,EAAW,IAAU,aACrBA,EAAW,KAAW,cACtBA,EAAW,OAAa,gBACxBA,EAAW,eAAqB,kBAChCA,EAAW,mBAAyB,sBACpCA,EAAW,cAAoB,iBAC/BA,EAAW,YAAkB,eAC7BA,EAAW,OAAa,gBACxBA,EAAW,KAAW,cACtBA,EAAW,OAAa,gBApB1B,CAqBGA,IAAgBA,QAAAA,YAAAA,EAAc,KAIjC,QAAA,eAAA,EAAA,SAAWC,GACTA,EAAc,OAAa,WAC3BA,EAAc,SAAe,aAF/B,CAGGA,IAAmBA,QAAAA,eAAAA,EAAiB;;ACXvC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,OAAA,QAAA,KAAA,QAAA,MAAA,QAAA,KAAA,QAAA,MAAA,QAAA,KAAA,QAAA,UAAA,QAAA,IAAA,QAAA,OAAA,QAAA,KAAA,QAAA,cAAA,QAAA,eAAA,QAAA,MAAA,QAAA,UAAA,QAAA,OAAA,QAAA,OAAA,QAAA,OAAA,QAAA,WAAA,EAnBA,IAAA,EAAA,QAAA,cAEIC,EAAQF,EAAYG,YAAAA,MAiBxB,QAAA,MAAA,EAhBA,IAAIC,EAAOJ,EAAYK,YAAAA,KAgBvB,QAAA,KAAA,EAfA,IAAIC,EAAQN,EAAYO,YAAAA,MAexB,QAAA,MAAA,EAdA,IAAIC,EAAOR,EAAYS,YAAAA,KAcvB,QAAA,KAAA,EAbA,IAAIC,EAASV,EAAYW,YAAAA,OAazB,QAAA,OAAA,EAZA,IAAIC,EAAYZ,EAAYa,YAAAA,UAY5B,QAAA,UAAA,EAXA,IAAI5M,EAAS+L,EAAYc,YAAAA,OAWzB,QAAA,OAAA,EAVA,IAAIC,EAAQf,EAAYgB,YAAAA,MAUxB,QAAA,MAAA,EATA,IAAIC,EAAYjB,EAAYkB,YAAAA,UAS5B,QAAA,UAAA,EARA,IAAIC,EAAMnB,EAAYoB,YAAAA,IAQtB,QAAA,IAAA,EAPA,IAAIC,EAAOrB,EAAYsB,YAAAA,KAOvB,QAAA,KAAA,EANA,IAAIC,EAASvB,EAAYwB,YAAAA,OAMzB,QAAA,OAAA,EALA,IAAIC,EAAiBzB,EAAY0B,YAAAA,eAKjC,QAAA,eAAA,EAJA,IAAIC,EAAgB3B,EAAY4B,YAAAA,cAIhC,QAAA,cAAA,EAHA,IAAI9L,EAAQkK,EAAY6B,YAAAA,YAGxB,QAAA,MAAA,EAFA,IAAIC,EAAS9B,EAAY+B,YAAAA,OAEzB,QAAA,OAAA,EADA,IAAIC,EAAShC,EAAYiC,YAAAA,OACzB,QAAA,OAAA,EAAA,IAAIC,EAAOlC,EAAYmC,YAAAA,KAAvB,QAAA,KAAA;;ACudC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,MAAA,EAAA,QAAA,OAAA,EAAA,QAAA,KAAA,EAAA,QAAA,WAAA,EAAA,QAAA,MAAA,EAAA,QAAA,SAAA,EAAA,QAAA,UAAA,EAAA,QAAA,kBAAA,EAAA,QAAA,IAAA,EAAA,QAAA,KAAA,EAAA,QAAA,MAAA,EAAA,QAAA,eAAA,EAAA,QAAA,aAAA,EAAA,QAAA,YAAA,EAAA,QAAA,YAAA,EAAA,QAAA,QAAA,EAAA,QAAA,KAAA,EAAA,QAAA,WAAA,EAAA,QAAA,WAAA,EAAA,QAAA,MAAA,EAAA,QAAA,KAAA,EAAA,QAAA,eAAA,EAAA,QAAA,qBAAA,EAAA,QAAA,gBAAA,QAAA,WAAA,QAAA,UAAA,QAAA,OAAA,QAAA,YAAA,EA1eD,IAAA,EAAA,QAAA,wBACA,EAAA,QAAA,oBACA,EAAA,QAAA,cACA,EAAA,QAAA,cACA,EAAA,QAAA,oBACIC,GAAyB,EAAa,EAAA,cAAA,CACxCjL,KAAMkK,EAAAA,OAGR,SAASgB,EAAkBC,EAAYC,GAC9BA,OAAAA,GAAoBA,EAAkBD,SAA2BlI,EAG1E,SAASoI,EAAe5F,EAAQ2F,GAC1BE,IAAAA,EAEA,IAAA,EAAS7F,EAAAA,UAAAA,IAA6B,iBAAXA,EAAqB,CAC9C8F,IAAAA,EAAOL,EAAkBzF,EAAQ2F,GAGnCE,GADE,EAAWC,EAAAA,YAAAA,GACE,CACbvL,KAAMyF,EACN8F,KAAMA,GAECA,GAGM,CACbvL,KAAMyF,EACN8F,UAAMtI,QAGL,IAAI,EAAWwC,EAAAA,YAAAA,GACpB6F,EAAe,CAEbtL,KAAMyF,EAAOQ,MAAQR,EAAOpF,WAC5BkL,KAAM9F,OAEH,CACD8F,EAAOL,EAAkBzF,EAAOzF,KAAMoL,GAEtC,IAAA,EAAWG,EAAAA,YAAAA,GACbD,GAAe,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAI7F,GAAS,CAC5C8F,KAAMA,SAEH,GAAIA,EAAM,CACXJ,IAAAA,EAAaI,EAAKvL,MAAQyF,EAAOzF,KACrCsL,GAAe,EAAS,EAAA,WAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIC,GAAO9F,GAAS,CAC5DzF,KAAMmL,SAGRG,EAAe7F,EAWZ6F,OAPPzO,OAAO2O,eAAeF,EAAc,WAAY,CAC9CjN,MAAO,WACEiN,OAAAA,EAAatL,MAEtByL,YAAY,EACZC,cAAc,IAETJ,EA4aR,QAAA,UAAA,EAzaD,IAAIK,EAAkB,SAAUlG,EAAQ2F,GAClC,OAAC3F,IAIS,EAAQA,EAAAA,SAAAA,GAAUA,EAAS,CAACA,IAC3B9C,IAAI,SAAUiJ,GACpBP,OAAAA,EAAeO,EAAWR,KAL1B,IASX,SAASS,EAAqBpG,GACxB6F,IAAAA,EAAeD,EAAe5F,GAC3B,OAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,CACvBkC,IAAI,EAASlC,EAAAA,UAAAA,GAAUA,EAAS6F,EAAa3D,IAC5C2D,GAAe,CAChBtL,KAAMsL,EAAatL,OAWvB,SAASmJ,EAAMpJ,GACT,OAAC,EAASA,EAAAA,UAAAA,GAMP,CACLC,KAAM8L,EADD,MAEL/L,MAAOA,GAPAsJ,EAAKtJ,EAAO,CACjBgM,GAAIjD,EAAekD,eAAAA,WAUzB,SAASC,EAAaxG,GACb,MAAA,CACLzF,KAAM8L,EADD,MAELzI,QAAQ,EAAaoC,EAAAA,cAAAA,EAAO1F,QAehC,SAASsJ,EAAKtJ,EAAOoI,GACZ,MAAA,CACL4D,GAAI5D,EAAUA,EAAQ4D,QAAK9I,EAC3BjD,KAAMkM,EAFD,KAGLnM,OAAO,EAAWA,EAAAA,YAAAA,GAASA,GAAQ,EAAcA,EAAAA,eAAAA,GACjDoM,MAAOhE,EAAUA,EAAQgE,WAAQlJ,EACjC0E,GAAIQ,QAA0BlF,IAAfkF,EAAQR,GAAmBQ,EAAQR,IAAK,EAAW5H,EAAAA,YAAAA,GAASA,EAAMkG,MAAO,EAAalG,EAAAA,cAAAA,IAIzG,SAASqM,EAAY3G,EAAQ4G,EAAKhJ,EAAQiJ,GACpC9G,IAKA+G,EALA/G,EAAO,CACTnC,OAAQA,GAGNmJ,GAAgB,EAAa,EAAA,eAAA,EAAW/G,EAAAA,YAAAA,EAAO1F,OAAS0F,EAAO1F,MAAMsM,EAAKhJ,EAAOG,KAAMgC,GAAQC,EAAO1F,OAGtG,IAAA,EAAS0F,EAAAA,UAAAA,EAAO0G,OAAQ,CACtBM,IAAAA,EAAcH,GAAaA,EAAU7G,EAAO0G,OAChDI,GAAgB,EAAWE,EAAAA,YAAAA,GAAeA,EAAYJ,EAAKhJ,EAAOG,KAAMgC,GAAQiH,OAEhFF,GAAgB,EAAW9G,EAAAA,YAAAA,EAAO0G,OAAS1G,EAAO0G,MAAME,EAAKhJ,EAAOG,KAAMgC,GAAQC,EAAO0G,MAGvFO,IAAAA,GAAiB,EAAWjH,EAAAA,YAAAA,EAAOsG,IAAMtG,EAAOsG,GAAGM,EAAKhJ,EAAOG,KAAMgC,GAAQC,EAAOsG,GACjF,OAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAItG,GAAS,CACpCsG,GAAIW,EACJrJ,OAAQmJ,EACRzM,MAAOyM,EAAchJ,KACrB2I,MAAOI,IAWX,SAASI,EAAW5M,EAAOoI,GAClBkB,OAAAA,EAAKtJ,GAAO,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIoI,GAAU,CACjD4D,GAAIjD,EAAe8D,eAAAA,UAQvB,SAASC,IACAF,OAAAA,EAAWhC,EAAD,QAUnB,SAASmC,EAAQ/M,EAAOoI,GACfkB,OAAAA,EAAKtJ,GAAO,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIoI,GAAU,CACjD4D,GAAI,SAAUgB,EAAGC,EAAI3L,GAEZgC,OADMhC,EAAGgC,OACF4J,WA6SnB,QAAA,gBAAA,EAxSD,IAAIC,EAAiB,SAAU9J,EAASrD,GAC/B,MAAA,CACLqD,QAASA,EACTrD,MAAOA,IAaX,SAASiK,EAAImD,EAAMC,GAKV,YAJM,IAATD,IACFA,EAAOD,GAGF,CACLlN,KAAMqN,EADD,IAELD,MAAOA,EACPD,KAAMA,GAIV,IAAIG,EAAa,SAAU7H,EAAQ4G,EAAKhJ,GAC/B,OAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIoC,GAAS,CACpCpH,OAAO,EAASoH,EAAAA,UAAAA,EAAO0H,MAAQ1H,EAAO0H,KAAO1H,EAAO0H,KAAKd,EAAKhJ,EAAOG,KAAM,CACzEH,OAAQA,OAyQb,QAAA,WAAA,EA5PD,IAAIkG,EAAS,SAAUgE,GACd,MAAA,CACLvN,KAAMwN,EADD,OAELD,OAAQA,IAUZ,SAASxE,EAAM0E,GACTC,IAAAA,EAAc7B,EAAqB4B,GAChC,MAAA,CACLzN,KAAM6I,EAAYG,YAAAA,MAClByE,SAAUC,EACVnC,UAAMtI,GAUV,SAASgG,EAAK0E,GACRF,IAAAA,GAAW,EAAWE,EAAAA,YAAAA,GAAYA,EAAW9B,EAAqB8B,GAC/D,MAAA,CACL3N,KAAM6I,EAAYK,YAAAA,KAClBuE,SAAUA,EACVlC,UAAMtI,GAIV,SAAS2K,EAAYnI,EAAQrC,EAASC,GAChCwK,IAAAA,GAAmB,EAAWpI,EAAAA,YAAAA,EAAOgI,UAAYhI,EAAOgI,SAASrK,EAASC,EAAOG,MAAQiC,EAAOgI,SAChGK,EAA+C,iBAArBD,EAAgC,CAC5DlG,GAAIkG,GACFA,EAKGvC,MAJY,CACjBtL,KAAM6I,EAAYK,YAAAA,KAClBuE,SAAUK,GAgNb,QAAA,OAAA,EArMD,IAAIhR,EAAS,SAAUyI,GACd,MAAA,CACLvF,KAAM+N,EADD,OAELxI,WAAYA,IAYhB,SAASqE,EAAMoE,EAAUrG,GACnBsG,IAAAA,EAAWtG,EAAK,IAAMA,EAAK,GACxBkB,OAAAA,EAAYgB,YAAAA,MAAQ,IAAMmE,EAAW,IAAMC,EAWpD,SAAS3P,EAAKqJ,EAAInE,GACZxD,IAAAA,EAAO6I,EAAYkB,YAAAA,UAAY,IAAMpC,EACrCV,EAAc,CAChBjH,KAAMA,EACNwD,KAAMA,EAGRyD,SAAuB,WACdjH,OAAAA,IAGFiH,OAAAA,EAaT,SAASiH,EAAWvG,EAAInE,GAClBxD,IAAAA,EAAO6I,EAAYsF,YAAAA,WAAa,IAAMxG,EACtCV,EAAc,CAChBjH,KAAMA,EACNwD,KAAMA,EAGRyD,SAAuB,WACdjH,OAAAA,IAGFiH,OAAAA,EAGT,SAAStI,EAAMgJ,EAAInE,GACbxD,IAAAA,EAAO6I,EAAY4B,YAAAA,cAAgB,IAAM9C,EACzCV,EAAc,CAChBjH,KAAMA,EACNwD,KAAMA,EAGRyD,SAAuB,WACdjH,OAAAA,IAGFiH,OAAAA,EAGT,SAAS8D,EAAKqD,GACL,MAAA,CACLpO,KAAM6I,EAAYmC,YAAAA,KAClBqD,IAAKD,GAWT,SAASE,EAAUhH,EAAQa,GAClBkB,OAAAA,EAAK,SAAU0D,EAAGhN,GAChBA,OAAAA,IACN,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIoI,GAAU,CACjC4D,GAAIzE,KAYR,SAASiH,EAASC,EAAWrG,GACpBwE,OAAAA,EAAW,SAAUvJ,EAASrD,EAAOyF,GACnC,MAAA,CACLxF,KAAMyO,EADD,MAELjL,MAAM,EAAWgL,EAAAA,YAAAA,GAAaA,EAAUpL,EAASrD,EAAOyF,GAAQgJ,KAEjE,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIrG,GAAU,CACjC4D,GAAIjD,EAAe8D,eAAAA,UAIvB,SAAS/B,EAAO6D,GACP,MAAA,CACL1O,KAAM6I,EAAYiC,YAAAA,OAClB4D,MAAOA,GAIX,SAASC,EAAe3G,EAAS4G,EAAcC,EAAgBxL,EAAQyL,GACjEzN,IAAAA,GAAK,EAAO,EAAA,SAAA,EAAUyN,EAAAA,WAAAA,EAAS,SAAUrJ,GACpCA,OAAAA,EAAOzF,OAAS+N,EAAvB,SACE,GACA/I,EAAgB3D,EAAG,GACnB0N,EAAe1N,EAAG,GAElB4D,EAAiBD,EAAc5H,QAAS,EAAcyR,EAAAA,eAAAA,EAAgBxL,EAAQ2B,EAAe4J,GAAgBC,EA6D1G,MAAA,EA5De,EAAQE,EAAAA,SAAAA,EAAapM,IAAI,SAAU2I,GACnDjK,IAAAA,EAEIiK,OAAAA,EAAatL,MACd8L,KAAAA,EAAL,MACSG,OAAAA,EAAaX,GAEjBY,KAAAA,EAAL,KACM8C,IAAAA,EAAa5C,EAAYd,EAAcrG,EAAgB5B,EAAQ2E,EAAQG,QAAQ8G,QAQ5ED,OANF9P,EAAL,gBAEO,EAAA,EAAA,QAAC,EAASoM,EAAAA,UAAAA,EAAaa,QAAsC,iBAArB6C,EAAW7C,MACVb,4CAAAA,EAAaa,MAAQ,2BAA6BnE,EAAQL,GAAK,KAGxGqH,EAEJ3B,KAAAA,EAAL,IACSC,OAAAA,EAAWhC,EAAcrG,EAAgB5B,GAE7C6L,KAAAA,EAAL,OAQQ,KALAC,EAGI,QAHc9N,EADHiK,EACqBoD,MAAMU,KAAK,SAAUrJ,GACvDkC,IAAAA,GAAQ,EAAQlC,EAAAA,SAAAA,EAAUsC,KAAML,EAAQG,QAAQD,QAC7C,OAACD,IAAS,EAAcD,EAAAA,eAAAA,EAASC,EAAOhD,EAAgB5B,EAAQuL,YAClD,IAAPvN,OAAgB,EAASA,EAAGyN,SAGnC,MAAA,GAGLO,IAAAA,EAAWV,EAAe3G,EAAS4G,EAAc3J,EAAgB5B,EAAQsI,GAAgB,EAAQwD,EAAAA,SAAAA,GAAiBnH,EAAQG,QAAQ2G,UAE/HO,OADPpK,EAAiBoK,EAAS,GACnBA,EAAS,GAGfC,KAAAA,EAAL,KAEQH,IAAAA,EAEA,KAFAA,EAAiB7D,EAAa+C,IAAIpJ,EAAgB5B,EAAOG,OAGpD,MAAA,GAGL6L,EAAWV,EAAe3G,EAAS4G,EAAc3J,EAAgB5B,EAAQsI,GAAgB,EAAQwD,EAAAA,SAAAA,GAAiBnH,EAAQG,QAAQ2G,UAE/HO,OADPpK,EAAiBoK,EAAS,GACnBA,EAAS,GAGfE,KAAAA,EAAL,KAEW3B,OAAAA,EAAYtC,EAAcrG,EAAgB5B,GAGrD,QACSgI,OAAAA,EAAeC,EAActD,EAAQG,QAAQ2G,aAGjC7J,GAC1B,QAAA,OAAA;;ACnPA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,WAAA,EAAA,QAAA,iBAAA,EAAA,QAAA,YAAA,EAAA,QAAA,iBAAA,EAAA,QAAA,SAAA,EAAA,QAAA,IAAA,EAAA,QAAA,eAAA,EAAA,QAAA,WAAA,EAAA,QAAA,gBAAA,EAvPD,IAAA,EAAA,QAAA,wBACA,EAAA,QAAA,cAEIuK,EAAa,SAAUC,GAClBA,MAAmB,WAAnBA,EAAUzP,MAAwC,UAAnByP,EAAUzP,MAGlD,SAAS0P,EAAYD,GACZ,OAAA,EAAKA,EAAAA,MAAAA,EAAU9K,QAAQhC,IAAI,SAAU9C,GACnC4P,OAAAA,EAAU9K,OAAO9E,KAI5B,SAAS8P,EAAiBF,GACpBG,IAAAA,EAAa,CAACH,GAEdD,OAAAA,EAAWC,GACNG,EAGFA,EAAW/Q,QAAO,EAAQ6Q,EAAAA,SAAAA,EAAYD,GAAW9M,IAAIgN,KAG9D,SAASE,EAAiBC,EAAgBF,GACpCxO,IAAAA,EAAKC,EAAIS,EAAKR,EAAIc,EAAKb,EAAIwO,EAAKC,EAGhCC,EAAcC,EADM,IAAIC,IAAIL,IAE5BM,EAAgB,IAAID,IAAIP,GAExB,IAEG,IAAA,IAAIS,GAAkB,EAASD,EAAAA,UAAAA,GAAgBE,EAAoBD,EAAgBjS,QAASkS,EAAkBhS,KAAMgS,EAAoBD,EAAgBjS,OAIpJH,IAHHjB,IACAiB,GADAjB,EAAIsT,EAAkBjS,OAChBkS,OAEHtS,IAAMmS,EAAcI,IAAIvS,IAC7BmS,EAAcK,IAAIxS,GAClBA,EAAIA,EAAEsS,OAGV,MAAO9O,GACPL,EAAM,CACJzC,MAAO8C,GAED,QACJ,IACE6O,IAAsBA,EAAkBhS,OAAS+C,EAAKgP,EAAgB3O,SAASL,EAAG7D,KAAK6S,GACnF,QACJjP,GAAAA,EAAK,MAAMA,EAAIzC,OAInB+R,IAAAA,EAAUR,EAAWE,GAErB,IAEG,IAAA,IAAIO,GAAkB,EAASP,EAAAA,UAAAA,GAAgBQ,EAAoBD,EAAgBvS,QAASwS,EAAkBtS,KAAMsS,EAAoBD,EAAgBvS,OAAQ,CAG/JpB,GAAW,cAFXA,EAAI4T,EAAkBvS,OAEpB2B,MAAyB0Q,EAAQrC,IAAIrR,IAAO0T,EAAQrC,IAAIrR,GAAGI,QAW3DJ,GAAW,aAAXA,EAAEgD,KACA,IACG,IAAA,IAAI6Q,GAAMzO,OAAM,GAAQ,EAASsN,EAAAA,UAAAA,EAAY1S,KAAM8T,EAAKD,EAAGzS,QAAS0S,EAAGxS,KAAMwS,EAAKD,EAAGzS,OAAQ,CAC5F2S,IAAAA,EAAQD,EAAGzS,MAEI,YAAf0S,EAAM/Q,OAILoQ,EAAcI,IAAIO,KACrBX,EAAcK,IAAIM,GAEdd,EAAY5B,IAAI0C,GAClBd,EAAY5B,IAAI0C,GAAOC,QAAQ,SAAUC,GAChCb,OAAAA,EAAcK,IAAIQ,KAG3BF,EAAMG,kBAAkBF,QAAQ,SAAUC,GACjCb,OAAAA,EAAcK,IAAIQ,QAKjC,MAAOzO,GACPJ,EAAM,CACJzD,MAAO6D,GAED,QACJ,IACEsO,IAAOA,EAAGxS,OAASiD,EAAKsP,EAAGnP,SAASH,EAAG/D,KAAKqT,GACxC,QACJzO,GAAAA,EAAK,MAAMA,EAAIzD,aAzCrBsR,EAAY5B,IAAIrR,GAClBiT,EAAY5B,IAAIrR,GAAGgU,QAAQ,SAAUC,GAC5Bb,OAAAA,EAAcK,IAAIQ,KAG3BjU,EAAEkU,kBAAkBF,QAAQ,SAAUC,GAC7Bb,OAAAA,EAAcK,IAAIQ,MAyCjC,MAAOhP,GACPH,EAAM,CACJnD,MAAOsD,GAED,QACJ,IACE2O,IAAsBA,EAAkBtS,OAASgD,EAAKqP,EAAgBjP,SAASJ,EAAG9D,KAAKmT,GACnF,QACJ7O,GAAAA,EAAK,MAAMA,EAAInD,OAInB,IAEG,IAAA,IAAIwS,GAAkB,EAASf,EAAAA,UAAAA,GAAgBgB,EAAoBD,EAAgB/S,QAASgT,EAAkB9S,KAAM8S,EAAoBD,EAAgB/S,OACvJpB,CAAAA,IAAAA,EAGGiB,IAFHA,GADAjB,EAAIoU,EAAkB/S,OAChBkS,OAEHtS,IAAMmS,EAAcI,IAAIvS,IAC7BmS,EAAcK,IAAIxS,GAClBA,EAAIA,EAAEsS,QAGV,MAAOc,GACPtB,EAAM,CACJpR,MAAO0S,GAED,QACJ,IACED,IAAsBA,EAAkB9S,OAAS0R,EAAKmB,EAAgBzP,SAASsO,EAAGxS,KAAK2T,GACnF,QACJpB,GAAAA,EAAK,MAAMA,EAAIpR,OAIhByR,OAAAA,EAGT,SAASkB,EAAgBC,EAAUb,GAC7Bc,IAAAA,EAAkBd,EAAQrC,IAAIkD,GAE9B,IAACC,EACI,MAAA,GAGLD,GAAkB,aAAlBA,EAASvR,KAAqB,CAC5ByR,IAAAA,EAAiBD,EAAgB,GAEjCC,IAAAA,EAKK,MAAA,GAJHjC,GAAAA,EAAWiC,GACNA,OAAAA,EAAe5R,IAOxBY,IAAAA,EAAa,GAIVA,OAHP+Q,EAAgBR,QAAQ,SAAUU,GAChCjR,EAAWiR,EAAI7R,KAAOyR,EAAgBI,EAAKhB,KAEtCjQ,EAGT,SAASyP,EAAWE,GACd9M,IAAAA,EAAKjC,EAELqP,EAAU,IAAIiB,IAEd,IACG,IAAA,IAAIC,GAAkB,EAASxB,EAAAA,UAAAA,GAAgByB,EAAoBD,EAAgBxT,QAASyT,EAAkBvT,KAAMuT,EAAoBD,EAAgBxT,OAAQ,CAC/JpB,IAAAA,EAAI6U,EAAkBxT,MAErBqS,EAAQF,IAAIxT,IACf0T,EAAQoB,IAAI9U,EAAG,IAGbA,EAAEuT,SACCG,EAAQF,IAAIxT,EAAEuT,SACjBG,EAAQoB,IAAI9U,EAAEuT,OAAQ,IAGxBG,EAAQrC,IAAIrR,EAAEuT,QAAQ7R,KAAK1B,KAG/B,MAAO0G,GACPJ,EAAM,CACJ3E,MAAO+E,GAED,QACJ,IACEmO,IAAsBA,EAAkBvT,OAAS+C,EAAKuQ,EAAgBlQ,SAASL,EAAG7D,KAAKoU,GACnF,QACJtO,GAAAA,EAAK,MAAMA,EAAI3E,OAIhB+R,OAAAA,EAGT,SAASqB,EAASC,EAAU5B,GAEnBkB,OAAAA,EAAgBU,EAAU9B,EADpBL,EAAiB,CAACmC,GAAW5B,KAI5C,SAASI,EAAIyB,EAAUzQ,GACjBqE,OAAAA,MAAMzF,QAAQ6R,GACTA,EAASC,KAAK,SAAUC,GACtBA,OAAAA,IAAW3Q,IAIlByQ,aAAoB9B,KACf8B,EAASzB,IAAIhP,GAMxB,SAAS4Q,EAAWhC,GACX,OAAA,EAAQ,EAAA,UAAA,EAAS,EAAA,UAAA,IAAID,IAAIC,EAAczN,IAAI,SAAUsO,GACnDA,OAAAA,EAAGoB,eAId,SAASC,EAAelC,EAAeX,GACjCA,MAAmB,aAAnBA,EAAUzP,KACL0P,EAAYD,GAAWyC,KAAK,SAAUlV,GACpCA,MAAW,UAAXA,EAAEgD,MAAoBwQ,EAAIJ,EAAepT,KAI7B,aAAnByS,EAAUzP,MACL0P,EAAYD,GAAW7P,MAAM,SAAUqR,GACrCqB,OAAAA,EAAelC,EAAea,KAK1C,QAAA,WAAA;;ACrMD,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,kBAAA,EAAA,QAAA,QAAA,EAAA,QAAA,iBAAA,EAAA,QAAA,WAAA,EAlDA,IAAA,EAAA,QAAA,wBACA,EAAA,QAAA,kBACA,EAAA,QAAA,cACA,EAAA,QAAA,mBACA,EAAA,QAAA,gBAEA,SAASsB,EAAiBC,EAAGC,GACvBD,GAAAA,IAAMC,EACD,OAAA,EAGLD,QAAMvP,IAANuP,QAAyBvP,IAANwP,EACd,OAAA,EAGL,IAAA,EAASD,EAAAA,UAAAA,KAAM,EAASC,EAAAA,UAAAA,GACnBD,OAAAA,IAAMC,EAGXC,IAAAA,GAAQ,EAAKF,EAAAA,MAAAA,GACbG,GAAQ,EAAKF,EAAAA,MAAAA,GACVC,OAAAA,EAAMtV,SAAWuV,EAAMvV,QAAUsV,EAAM9S,MAAM,SAAUC,GACrD0S,OAAAA,EAAiBC,EAAE3S,GAAM4S,EAAE5S,MAItC,SAAS+S,EAAQpS,GACX,QAAA,EAASA,EAAAA,UAAAA,KAIN,UAAWA,GAAS,YAAaA,GAG1C,SAASqS,EAAkBpN,EAAQjF,GAC7B+K,IAAAA,EAAO9F,EAAO8F,KAYXuH,OAVW,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIrN,GAAS,CAC/C8F,UAAetI,IAATsI,EAAqB,WAClBA,OAAAA,EAAK/K,EAAM4C,QAAS5C,EAAMT,MAAO,CACtC0F,OAAQA,EACRjF,MAAOA,EACP6C,OAAQ7C,EAAM6C,eAEdJ,IAMR,IAAI8P,EAIJ,WAaWA,SAAAA,EAAMC,GACTC,IAAAA,EAAQ,KAEPnE,KAAAA,QAAU,GACVoE,KAAAA,WAAanU,EAAlB,mBACKyG,KAAAA,KAAO,GACP2N,KAAAA,OAAS,GACT9U,KAAAA,MAAQ2U,EAAO3U,MACf+E,KAAAA,QAAU4P,EAAO5P,QACjBC,KAAAA,OAAS2P,EAAO3P,OAChB+P,KAAAA,WAAaJ,EAAOI,WACpBrT,KAAAA,MAAQ,KAAKsD,OAAOG,KACpB6P,KAAAA,aAAeL,EAAOK,aACtBC,KAAAA,QAAUN,EAAOM,QACjBxE,KAAAA,QAAUkE,EAAOlE,SAAW,GAC5BoE,KAAAA,WAAaF,EAAOE,YAAcnU,EAAvC,mBACKyG,KAAAA,KAAOwN,EAAOxN,MAAQ,GACtB2N,KAAAA,OAASH,EAAOG,QAAU,GAC1BI,KAAAA,QAAU,KAAKA,QAAQC,KAAK,MAC5BC,KAAAA,UAAY,KAAKA,UAAUD,KAAK,MAChCpD,KAAAA,cAAgB4C,EAAO5C,cACvBhJ,KAAAA,YAAc4L,EAAO5L,YACrBsM,KAAAA,SAAWV,EAAOU,SAClBpV,KAAAA,OAAS0U,EAAO1U,KACrBzB,OAAO2O,eAAe,KAAM,aAAc,CACxC6C,IAAK,WACI,OAAA,EAAW4E,EAAAA,YAAAA,EAAM7C,kBA0IvB2C,OA/HPA,EAAMY,KAAO,SAAUlT,EAAY2C,GAC7B3C,OAAAA,aAAsBsS,EACpBtS,EAAW2C,UAAYA,EAClB,IAAI2P,EAAM,CACf1U,MAAOoC,EAAWpC,MAClB+E,QAASA,EACTC,OAAQ5C,EAAW4C,OACnB+P,WAAY,KACZC,aAAc5S,EAAW4S,aACzBC,QAAS7S,EAAW6S,QACpBxE,QAAS,GACToE,WAAYzS,EAAWyS,WACvB1N,KAAM,GACN2N,OAAQ,GACR/C,cAAe,GACfhJ,YAAa,GACbsM,SAAU,KAIPjT,EAIF,IAAIsS,EAAM,CACf1U,MAAOoC,EACP2C,QAASA,EACTC,OAJW4H,EAAb,UAKEmI,WAAY,KACZC,kBAAcpQ,EACdqQ,aAASrQ,EACT6L,QAAS,GACToE,gBAAYjQ,EACZuC,UAAMvC,EACNkQ,OAAQ,GACR/C,cAAe,GACfhJ,YAAa,GACbsM,SAAU,MASdX,EAAMa,OAAS,SAAUZ,GAChB,OAAA,IAAID,EAAMC,IASnBD,EAAMc,MAAQ,SAAUpT,EAAY2C,GAC9B3C,GAAAA,aAAsBsS,EAAO,CAC3B,IAACtS,EAAWqO,QAAQ1R,OACfqD,OAAAA,EAGL4C,IAAAA,EAAS4H,EAAb,UACO,OAAA,IAAI8H,EAAM,CACf1U,MAAOoC,EAAWpC,MAClB+E,QAASA,EACTC,OAAQA,EACR+P,WAAY,KACZC,aAAc5S,EAAW4S,aACzBC,QAAS7S,EAAW6S,QACpBJ,WAAYzS,EAAWyS,WACvB9C,cAAe3P,EAAW2P,cAC1BhJ,YAAa,GACbsM,SAAU,KAIPX,OAAAA,EAAMY,KAAKlT,EAAY2C,IAShC2P,EAAMzV,UAAUmW,UAAY,SAAUhT,EAAYlB,GAC5C0T,IAAAA,EAAQ,KAUR,QARe,IAAfxS,IACFA,EAAa,KAAKpC,YAGF,IAAdkB,IACFA,EAAY,MAGV,EAASkB,EAAAA,UAAAA,GACJ,MAAA,CAACA,GAGNqT,IAAAA,GAAY,EAAKrT,EAAAA,MAAAA,GACdqT,OAAAA,EAAUjV,OAAOpB,MAAMqW,GAAW,EAASA,EAAAA,UAAAA,EAAUnR,IAAI,SAAU9C,GACjEoT,OAAAA,EAAMQ,UAAUhT,EAAWZ,GAAMN,GAAWoD,IAAI,SAAU3F,GACxD6C,OAAAA,EAAMN,EAAYvC,SAK/B+V,EAAMzV,UAAUyW,OAAS,WACd,KACc3D,cADd,KAEYhJ,YAGd4M,OAFU,EAAO3S,EAAAA,QAHf,KAGmB,CAAC,gBAAiB,iBAUhD0R,EAAMzV,UAAUiW,QAAU,SAAU/T,GAC3B,OAAA,EAAaA,EAAAA,cAAAA,EAAkB,KAAKnB,QAGtC0U,EAjLT,GAJA,QAAA,MAAA;;ACrCA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,QAAA,aAAA,EATA,IAAIkB,EAAe,GAEfC,EAAU,SAAUC,EAASC,GAC/BH,EAAavV,KAAKyV,GACdnT,IAAAA,EAASoT,EAAGD,GAETnT,OADPiT,EAAaI,MACNrT,GAGT,QAAA,QAAA,EAAA,IAAIsT,EAAU,SAAUF,GACfA,OAAAA,EAAGH,EAAaA,EAAa7W,OAAS,KAD/C,QAAA,QAAA;;ACiDC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,oBAAA,EAAA,QAAA,qBAAA,EAAA,QAAA,gBAAA,EAAA,QAAA,QAAA,EA9DD,IAAA,EAAA,QAAA,cACA,EAAA,QAAA,qBAEA,SAASmX,EAAgB5M,GAChB,MAAA,CACLA,GAAIA,EACJ0B,KAAM,aAGNlD,UAAW,WACF,MAAA,CACLqO,YAAa,eAKjBT,OAAQ,WACC,MAAA,CACLpM,GAAIA,KAaZ,SAAS8M,EAAqBC,EAAkB1M,EAAS5E,EAASC,GAC5DhC,IAAAA,EAEAsT,GAAY,EAAeD,EAAAA,gBAAAA,EAAiBlM,KAC5CoM,EAAuG,QAArFvT,EAAK2G,MAAAA,OAAyC,EAASA,EAAQG,QAAQ0M,gBAA6B,IAAPxT,OAAgB,EAASA,EAAGsT,EAAU3U,MACrJ8U,EAAeJ,EAAiBlR,MAAO,EAAWkR,EAAAA,YAAAA,EAAiBlR,KAAMJ,EAASC,QAAUJ,EAC5F8R,EAAYH,EAAiBI,EAAoBJ,EAAgBF,EAAiB/M,GAAImN,GAAgBP,EAAgBG,EAAiB/M,IAEpIoN,OADPA,EAAUvP,KAAOkP,EACVK,EAGT,SAASC,EAAoBC,EAAQtN,EAAInE,GACnCuR,IAAAA,EAAYR,EAAgB5M,GAUzBoN,OATPA,EAAUG,UAAW,GAEjB,EAAUD,EAAAA,WAAAA,KAEZF,EAAUvU,OAAQ,EAAQyC,EAAAA,cAAAA,EAAW,WAC5B,OAACO,EAAOyR,EAAOE,YAAY3R,GAAQyR,GAAQG,gBAI/CL,EAGT,SAASM,EAAQ7T,GACX,IACK,MAAqB,mBAAdA,EAAK6H,KACnB,MAAO1L,GACA,OAAA;;ACxBV,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,mBAAA,EAAA,QAAA,eAAA,EApCD,IAAA,EAAA,QAAA,wBACA,EAAA,QAAA,oBAGA,SAAS4K,EAAeC,GAClB,GAAe,iBAARA,EAAkB,CACvB8M,IAAAA,EAAY,CACdtV,KAAMwI,EAGR8M,SAAqB,WACZ9M,OAAAA,IAIF8M,OAAAA,EAGF9M,OAAAA,EAGT,SAAS+M,EAAmBC,GACnB,OAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,CACvBxV,KAAMoK,EAAAA,QACLoL,GAAe,CAChBzB,OAAQ,WACOyB,EAAaC,OACZD,EAAaE,QADvBD,IAEAE,GAAY,EAAOH,EAAAA,QAAAA,EAAc,CAAC,SAAU,YAEzC,OAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIG,GAAY,CACvC3V,KAAMoK,EADiC,OAEvC5B,IAAKD,EAAeiN,EAAahN,UA9BzC,QAAA;;ACoCA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,EAtCA,IAAA,EAAA,QAAA,wBACA,EAAA,QAAA,kBACA,EAAA,QAAA,oBACA,EAAA,QAAA,cACA,EAAA,QAAA,cACA,EAAA,QAAA,mBACA,EAAA,QAAA,oBACA,EAAA,QAAA,gBACA,EAAA,QAAA,cACA,EAAA,QAAA,cACA,EAAA,QAAA,oBACIoN,EAAa,GACbC,EAAmB,IACnBC,EAAW,IACXC,EAAe,GAEfC,EAAY,SAAUC,GACjBA,OAAAA,EAAI,KAAOJ,GAGhBK,EAAuB,WAClB,MAAA,CACLpH,QAAS,GACT5G,OAAQ,GACR2M,SAAU,GACV3B,WAAY,GACZjE,OAAQ,KAIRkH,EAAgC,SAAU1G,EAAW1P,EAAOqH,GAC1DgP,IAAAA,EAA4BhP,EAAYiP,MAAM,GAAI,GAAGnE,KAAK,SAAUoE,GAC/D,QAAE,SAAUA,MAAiB,OAAQA,MAAgB,EAASA,EAAAA,UAAAA,EAAWhP,UAAW,EAAUgP,EAAAA,WAAAA,EAAWhP,WAE9GiP,EAAYxW,IAAU6V,EAAa,sBAAwB,UAAY7V,EAAQ,KAC9E,EAAA,EAAA,OAACqW,EAA2B,+BAAiCG,EAAY,cAAgB9G,EAAU9H,GAAK,sFAG3G6O,EAIJ,WACWA,SAAAA,EAITxD,EAAQ7K,EAIR/E,GACM6P,IAAAA,EAAQ,KAEPD,KAAAA,OAASA,EACT5P,KAAAA,QAAUA,EAKVqT,KAAAA,OAAS,EACTC,KAAAA,cAAe,EACfC,KAAAA,QAAU,CACbxD,YAAQlQ,EACR2T,cAAe,IAAIjF,IACnBkF,uBAAmB5T,EACnBmS,kBAAcnS,EACd6T,QAAI7T,EACJmE,iBAAanE,EACb8T,WAAY,GACZC,wBAAoB/T,GAEjBgU,KAAAA,MAAQ,GACR9O,KAAAA,QAAUtL,OAAOC,OAAOoZ,IAAwB/N,GAChDoI,KAAAA,OAAS,KAAKpI,QAAQ+O,QACtBrX,KAAAA,IAAM,KAAKmT,OAAOnT,KAAO,KAAKsI,QAAQgP,MAAQ,KAAKnE,OAAOrL,IAAM,YAChEK,KAAAA,QAAU,KAAKuI,OAAS,KAAKA,OAAOvI,QAAU,KAC9CrG,KAAAA,KAAO,KAAK4O,OAAS,KAAKA,OAAO5O,KAAK9C,OAAO,KAAKgB,KAAO,GACzDN,KAAAA,UAAY,KAAKyT,OAAOzT,YAAc,KAAKgR,OAAS,KAAKA,OAAOhR,UAAYT,EAAhE,iBACZ6I,KAAAA,GAAK,KAAKqL,OAAOrL,KAAM,EAAS,EAAA,UAAA,CAAC,KAAKK,QAAQnI,KAAM,KAAK8B,MAAMyV,KAAK,KAAK7X,WACzE8X,KAAAA,QAAU,KAAK9G,OAAS,KAAKA,OAAO8G,QAAU,KAAKrE,OAAOqE,QAC1DrX,KAAAA,KAAO,KAAKgT,OAAOhT,OAAS,KAAKgT,OAAOsE,SAAW,WAAa,KAAKtE,OAAOrO,SAAU,EAAK,EAAA,MAAA,KAAKqO,OAAOrO,QAAQvH,OAAS,WAAa,KAAK4V,OAAOM,QAAU,UAAY,UAEvKpU,EAAL,gBACO,EAAA,EAAA,QAAE,aAAc,KAAK8T,QAAS,8EAAkF,KAAKA,OAAOsE,SAAW,kCAAoC,eAAiB,KAAKtX,KAAO,MAAQ,kCAAoC,KAAK2H,GAAK,cAGhQ4P,KAAAA,QAAU,KAAKvE,OAAOuE,QACtB5S,KAAAA,OAAS,KAAKqO,OAAOrO,QAAS,EAAU,EAAA,WAAA,KAAKqO,OAAOrO,OAAQ,SAAU6S,EAAa3X,GAClFwB,IAAAA,EAEAoO,EAAY,IAAI+G,EAAUgB,EAAa,CACzCN,QAASjE,EACTkE,KAAMtX,IAGD4P,OADP5S,OAAOC,OAAOmW,EAAMgE,OAAO,EAAU5V,EAAAA,YAAAA,EAAK,IAAOoO,EAAU9H,IAAM8H,EAAWpO,GAAKoO,EAAUwH,QACpFxH,IACJsG,EAEDU,IAAAA,EAAQ,GAEHgB,SAAAA,EAAIhI,GACPrO,IAAAA,EAAKC,EAEToO,EAAUgH,MAAQA,IAEd,IACG,IAAA,IAAInV,GAAK,EAAS,EAAA,WAAA,EAAYmO,EAAAA,aAAAA,IAAalO,EAAKD,EAAGlD,QAASmD,EAAGjD,KAAMiD,EAAKD,EAAGlD,OAEhFqZ,EADYlW,EAAGlD,OAGjB,MAAOoD,GACPL,EAAM,CACJzC,MAAO8C,GAED,QACJ,IACEF,IAAOA,EAAGjD,OAAS+C,EAAKC,EAAGI,SAASL,EAAG7D,KAAK8D,GACxC,QACJF,GAAAA,EAAK,MAAMA,EAAIzC,QAKzB8Y,CAAI,MAECnE,KAAAA,SAAkC,IAAxB,KAAKN,OAAOM,QAAmB,UAAY,KAAKN,OAAOM,UAAW,EAC5EoE,KAAAA,aAAe,KAAK1E,OAAO2E,UAAY,KAAK3E,OAAO8D,KAAajR,MAAMzF,QAAQ,KAAK4S,OAAO8D,IAAM,KAAK9D,OAAO8D,GAAG5E,KAAK,SAAU7Q,GAE1HtB,OADKsB,EAAGtB,QACE6V,IACdA,KAAc,KAAK5C,OAAO8D,IAC1Bc,KAAAA,SAAW,KAAK5E,OAAO4E,OAEvBC,KAAAA,SAAU,EAAQ,EAAA,SAAA,KAAK7E,OAAO8E,OAAS,KAAK9E,OAAO6E,SAASlV,IAAI,SAAU8C,GACtE,OAAA,EAAeA,EAAAA,gBAAAA,KAGnBsS,KAAAA,QAAS,EAAQ,EAAA,SAAA,KAAK/E,OAAOgF,MAAQ,KAAKhF,OAAO+E,QAAQpV,IAAI,SAAU8C,GACnE,OAAA,EAAeA,EAAAA,gBAAAA,KAEnBD,KAAAA,KAAO,KAAKwN,OAAOxN,KACnByS,KAAAA,SAAyB,UAAd,KAAKjY,KAAmB,KAAKgT,OAAOxP,UAAOP,EACtDmH,KAAAA,QAAS,EAAQ,EAAA,SAAA,KAAK4I,OAAO5I,QAAQzH,IAAI,SAAU6S,EAAcvY,GAChEoE,IAAAA,EAAIC,EAEJ,IAAA,EAAUkU,EAAAA,WAAAA,GAEL,OADPvC,EAAMjL,QAAQG,QAAQ0M,UAAW,EAAUxT,EAAAA,YAAAA,EAAK,IAAOmU,EAAa7N,IAAM6N,EAAcnU,GAAK4R,EAAMjL,QAAQG,QAAQ0M,WAC5G,EAAmB,EAAA,oBAAA,CACxBrM,IAAKgN,EAAa7N,GAClBA,GAAI6N,EAAa7N,KAEd,IAAI,EAAS6N,EAAAA,UAAAA,EAAahN,KACxB,OAAA,EAAmB,EAAA,qBAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIgN,GAAe,CAC7D7N,GAAI6N,EAAa7N,IAAM6N,EAAahN,IACpCA,IAAKgN,EAAahN,OAEf,IAAI,EAAUgN,EAAAA,WAAAA,EAAahN,OAAQ,EAAWgN,EAAAA,YAAAA,EAAahN,KAAM,CAClEmM,IAAAA,EAAY1B,EAAMtL,GAAK,eAAiB1K,EAAI,IAGzC,OADPgW,EAAMjL,QAAQG,QAAQ0M,UAAW,EAAUvT,EAAAA,YAAAA,EAAK,IAAOqT,GAAaa,EAAahN,IAAKlH,GAAK2R,EAAMjL,QAAQG,QAAQ0M,WAC1G,EAAmB,EAAA,qBAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,CAC1ClN,GAAIgN,GACHa,GAAe,CAChBhN,IAAKmM,KAGHuD,IAAAA,EAAe1C,EAAahN,IACzB,OAAA,EAAmB,EAAA,qBAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,CAC1Cb,GAAIuQ,EAAalY,MAChBwV,GAAe,CAChBhN,IAAK0P,OAINhF,KAAAA,YAAa,EAAQ,EAAA,SAAA,KAAKF,OAAOE,YAAYrU,OAAO,KAAKuL,QAAQzH,IAAI,SAAU8K,GAC3E,OAAA,EAAqBA,EAAAA,sBAAAA,KAEzB6I,KAAAA,WAAa,KAAKA,WAAW9C,KAAK,MAu1ClCgD,OAh1CPA,EAAUlZ,UAAU6a,MAAQ,WACtB,KAAKxB,QAAQvP,cAIA,EAAA,EAAA,kBAAA,MAAM4J,QAAQ,SAAUvB,GAChCA,OAAAA,EAAUqH,MAWrBN,EAAUlZ,UAAU8a,WAAa,SAAUjQ,EAAS/E,QAClC,IAAZA,IACFA,EAAU,KAAKA,SAGb/B,IAAAA,EAAK,KAAK8G,QACV2G,EAAUzN,EAAGyN,QACboE,EAAa7R,EAAG6R,WAChBhL,EAAS7G,EAAG6G,OACZ2M,EAAWxT,EAAGwT,SACd5F,EAAS5N,EAAG4N,OACT,OAAA,IAAIuH,EAAU,KAAKxD,OAAQ,CAChClE,SAAS,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIA,GAAU3G,EAAQ2G,SACjDoE,YAAY,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIA,GAAa/K,EAAQ+K,YACvDhL,QAAQ,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIA,GAASC,EAAQD,QAC/C2M,UAAU,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIA,GAAW1M,EAAQ0M,UACnD5F,QAAQ,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIA,GAAS9G,EAAQ8G,SAC9C7L,IASLoT,EAAUlZ,UAAU6X,YAAc,SAAU/R,GACnC,OAAA,IAAIoT,EAAU,KAAKxD,OAAQ,KAAK7K,QAAS/E,IAGlDvG,OAAO2O,eAAegL,EAAUlZ,UAAW,aAAc,CAIvD+Q,IAAK,WACI,MAAA,CACL1G,GAAI,KAAKA,GACT9H,IAAK,KAAKA,IACVwX,QAAS,KAAKA,QACdjU,QAAS,KAAKA,QACdpD,KAAM,KAAKA,KACXuX,QAAS,KAAKA,QACdjE,QAAS,KAAKA,QACd3O,QAAQ,EAAU,EAAA,WAAA,KAAKA,OAAQ,SAAUnE,GAChCA,OAAAA,EAAM6X,aAEfvB,GAAI,KAAKA,GACT1P,YAAa,KAAKA,YAClB0Q,MAAO,KAAKD,QACZG,KAAM,KAAKD,OACX7E,WAAY,KAAKA,YAAc,GAC/B1N,KAAM,KAAKA,KACXiR,MAAO,KAAKA,QAAU,EACtBjT,KAAM,KAAKyU,SACX7N,OAAQ,KAAKA,SAGjBqB,YAAY,EACZC,cAAc,IAGhB8K,EAAUlZ,UAAUyW,OAAS,WACpB,OAAA,KAAKsE,YAGdxb,OAAO2O,eAAegL,EAAUlZ,UAAW,KAAM,CAI/C+Q,IAAK,WACC,GAAA,KAAKsI,QAAQG,GACR,OAAA,KAAKH,QAAQG,GAGlB1P,IAAAA,EAAc,KAAKA,YAChB,OAAA,KAAKuP,QAAQG,GAAK1P,EAAYjC,OAAO,SAAUxC,EAAK2T,GAGlD3T,OAFPA,EAAI2T,EAAW1S,WAAajB,EAAI2T,EAAW1S,YAAc,GACzDjB,EAAI2T,EAAW1S,WAAWlF,KAAK4X,GACxB3T,GACN,KAEL8I,YAAY,EACZC,cAAc,IAEhB7O,OAAO2O,eAAegL,EAAUlZ,UAAW,QAAS,CAClD+Q,IAAK,WACI,OAAA,KAAKsI,QAAQK,qBAAuB,KAAKL,QAAQK,mBAAqB,KAAKsB,wBAAyB,KAAK3B,QAAQK,qBAE1HvL,YAAY,EACZC,cAAc,IAEhB7O,OAAO2O,eAAegL,EAAUlZ,UAAW,cAAe,CAIxD+Q,IAAK,WACI,OAAA,KAAKsI,QAAQvP,cAAgB,KAAKuP,QAAQvP,YAAc,KAAKmR,oBAAqB,KAAK5B,QAAQvP,cAExGqE,YAAY,EACZC,cAAc,IAGhB8K,EAAUlZ,UAAUkb,cAAgB,SAAUC,GACxC,GAAA,KAAK9B,QAAQI,WAAW0B,GACnB,OAAA,KAAK9B,QAAQI,WAAW0B,GAG7BC,IAAAA,EAAYD,IAAc7C,EAC1BmB,EAAa,KAAK3P,YAAYuR,OAAO,SAAUrC,GAC7CsC,IAAAA,EAAgBtC,EAAW1S,YAAc6U,EAEtCC,OAAAA,EAAYE,EAAgBA,GAAiBtC,EAAW1S,YAAckS,IAGxEiB,OADFJ,KAAAA,QAAQI,WAAW0B,GAAa1B,EAC9BA,GAOTP,EAAUlZ,UAAUgb,sBAAwB,WACtCrF,IAAAA,EAAQ,KAER4F,EAAc,KAAK7F,OAAOpJ,MAE1B,IAACiP,EACI,MAAA,GAGLC,IAAAA,EAAkB,SAAU3M,EAAOlP,GACjC+Q,IAAAA,GAAW,EAAW7B,EAAAA,YAAAA,GAAS8G,EAAMtL,GAAK,UAAY1K,EAAI,IAAMkP,EAChEvI,GAAY,EAAMoK,EAAAA,OAAAA,EAAUiF,EAAMtL,IAQ/B/D,OANPqP,EAAM4E,QAAQnZ,MAAK,EAAKkF,EAAAA,MAAAA,EAAW,CACjCuI,MAAOA,KAGT8G,EAAM8E,OAAOrZ,MAAK,EAAOkF,EAAAA,QAAAA,IAElBA,GAsBFoT,QAnBkB,EAAQ6B,EAAAA,SAAAA,GAAeA,EAAYlW,IAAI,SAAU2T,EAAYrZ,GAChF2G,IAAAA,EAAYkV,EAAgBxC,EAAWnK,MAAOlP,GAC3C,OAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIqZ,GAAa,CACxCvW,MAAO6D,OAEN,EAAQ,EAAA,UAAA,EAAKiV,EAAAA,MAAAA,GAAalW,IAAI,SAAUwJ,EAAOlP,GAC9C8b,IAAAA,EAAmBF,EAAY1M,GAC/B6M,GAAqB,EAASD,EAAAA,UAAAA,GAAoB,CACpDzR,OAAQyR,GACNA,EACAxM,EAAiB0M,OAAO9M,GAAkBA,GAARA,EAClCvI,EAAYkV,EAAgBvM,EAAetP,GACxC,OAAA,EAAQ+b,EAAAA,SAAAA,GAAoBrW,IAAI,SAAU2T,GACxC,OAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIA,GAAa,CACxCvW,MAAO6D,EACPuI,MAAOI,UAIa5J,IAAI,SAAUuW,GAClC/M,IAAAA,EAAQ+M,EAAkB/M,MACvB,OAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAI8G,EAAMkG,iBAAiBD,IAAqB,CACvE/M,MAAOA,OAWbqK,EAAUlZ,UAAU8b,cAAgB,SAAU5Y,GACxCa,IAAAA,EAEA4R,EAAQ,KAER,IAACzS,EACI,MAAA,GAGLC,IAAAA,EAAaD,aAAiBuS,EAAjB,MAAyBvS,EAAMnC,OAAQ,EAAamC,EAAAA,cAAAA,EAAO,KAAKjB,WAE7E,IAAA,EAASkB,EAAAA,UAAAA,GAAa,CACpBoW,IAAAA,EAAoB,KAAKwC,aAAa5Y,GAAY8W,QAC/CV,YAAsB5T,IAAtB4T,EAAkC,KAAKuC,gBAAe/X,EAAK,IAAOZ,GAAcoW,EAAmBxV,IAAO,CAAC,KAAKsD,OAAOlE,IAG5H6Y,IAAAA,GAAe,EAAK7Y,EAAAA,MAAAA,GAIjB8Y,OAHaD,EAAa3W,IAAI,SAAU6W,GACtCvG,OAAAA,EAAMoG,aAAaG,KAEP3a,OAAOya,EAAanU,OAAO,SAAUsU,EAAkBD,GACtEE,IAAAA,EAAezG,EAAMoG,aAAaG,GAAaJ,cAAc3Y,EAAW+Y,IAErEC,OAAAA,EAAiB5a,OAAO6a,IAC9B,MASLlD,EAAUlZ,UAAUqc,QAAU,SAAU5Z,GAClC6D,IAAAA,GAAY,EAAa7D,EAAAA,cAAAA,GACtB,OAAA,KAAKoT,OAAOyG,SAAShW,IAW9B4S,EAAUlZ,UAAUuc,aAAe,SAAUrZ,GACvC4P,IAAAA,EAAgBvK,MAAM8N,MAAK,EAAiB,EAAA,kBAAA,GAAI,KAAKyF,cAAc5Y,EAAMnC,SACtE,OAAA,IAAI0U,EAAJ,OAAU,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIvS,GAAQ,CAC7CnC,MAAO,KAAKyb,QAAQtZ,EAAMnC,OAC1B+R,cAAeA,MAInBoG,EAAUlZ,UAAUyc,mBAAqB,SAAUtZ,EAAYD,EAAO6C,GAChEoM,IACArR,EADY,KAAKib,aAAa5Y,GACbrC,KAAKoC,EAAO6C,GAE7B,OAACjF,GAASA,EAAKgJ,YAAYhK,OAIxBgB,EAHE,KAAKA,KAAKoC,EAAO6C,IAM5BmT,EAAUlZ,UAAU0c,uBAAyB,SAAUvZ,EAAYD,EAAO6C,GACpEiW,IAAAA,GAAe,EAAK7Y,EAAAA,MAAAA,GAGpBrC,EAFY,KAAKib,aAAaC,EAAa,IAE1BW,YAAYxZ,EAAW6Y,EAAa,IAAK9Y,EAAO6C,GAEjE,OAACjF,GAASA,EAAKgJ,YAAYhK,OAIxBgB,EAHE,KAAKA,KAAKoC,EAAO6C,IAM5BmT,EAAUlZ,UAAU4c,uBAAyB,SAAUzZ,EAAYD,EAAO6C,GACpEvB,IAAAA,EAAKT,EAEL8Y,EAAgB,GAEhB,IACG,IAAA,IAAI7Y,GAAK,EAAS,EAAA,WAAA,EAAKb,EAAAA,MAAAA,IAAcc,EAAKD,EAAGlD,QAASmD,EAAGjD,KAAMiD,EAAKD,EAAGlD,OAAQ,CAC9Eob,IAAAA,EAAcjY,EAAGlD,MACjBuE,EAAgBnC,EAAW+Y,GAE3B,GAAC5W,EAAD,CAIA8W,IAEAtb,EAFe,KAAKib,aAAaG,GAEbS,YAAYrX,EAAepC,EAAO6C,GAEtDjF,IACF+b,EAAcX,GAAepb,KAGjC,MAAO6D,GACPH,EAAM,CACJnD,MAAOsD,GAED,QACJ,IACEV,IAAOA,EAAGjD,OAAS+C,EAAKC,EAAGI,SAASL,EAAG7D,KAAK8D,GACxC,QACJQ,GAAAA,EAAK,MAAMA,EAAInD,OAInByb,IAAAA,GAAmB,EAAKD,EAAAA,MAAAA,GAAexX,IAAI,SAAU9C,GAChDsa,OAAAA,EAActa,KAEnBwa,GAAqB,EAAQD,EAAAA,SAAAA,EAAiBzX,IAAI,SAAU2X,GACvDA,OAAAA,EAAGlT,eAMR,IAJiBgT,EAAiBlI,KAAK,SAAUoI,GAC5CA,OAAAA,EAAGlT,YAAYhK,OAAS,IAIxB,OAAA,KAAKgB,KAAKoC,EAAO6C,GAGtBkX,IAAAA,GAAa,EAAQH,EAAAA,SAAAA,EAAiBzX,IAAI,SAAU5F,GAC/CA,OAAAA,EAAEyd,YAEPpK,GAAgB,EAAQ,EAAA,UAAA,EAAK+J,EAAAA,MAAAA,GAAexX,IAAI,SAAU9C,GACrDsa,OAAAA,EAActa,GAAKuQ,iBAErB,MAAA,CACLhJ,YAAaiT,EACbG,SAAUD,EACVE,SAAS,EAAQL,EAAAA,SAAAA,EAAiBzX,IAAI,SAAU5F,GACvCA,OAAAA,EAAE0d,WAEXrK,cAAeA,EACfsK,OAAQla,EACRsO,SAAS,EAAQ,EAAA,UAAA,EAAKqL,EAAAA,MAAAA,GAAexX,IAAI,SAAU9C,GAC1Csa,OAAAA,EAActa,GAAKiP,aAKhC0H,EAAUlZ,UAAU2c,YAAc,SAAUxZ,EAAYD,EAAO6C,GAEzD,OAAA,EAAS5C,EAAAA,UAAAA,GACJ,KAAKsZ,mBAAmBtZ,EAAYD,EAAO6C,GAIpB,KAA5B,EAAK5C,EAAAA,MAAAA,GAAYrD,OACZ,KAAK4c,uBAAuBvZ,EAAYD,EAAO6C,GAIjD,KAAK6W,uBAAuBzZ,EAAYD,EAAO6C,IAGxDmT,EAAUlZ,UAAUc,KAAO,SAAUoC,EAAO6C,GACtCjB,IAAAA,EAAKf,EAOLsZ,EALA1H,EAAQ,KAERwF,EAAYpV,EAAO4C,KACnB6I,EAAU,GACV8L,EAAiB,GAGjB,IACG,IAAA,IAAItZ,GAAK,EAAS,EAAA,UAAA,KAAKkX,cAAcC,IAAalX,EAAKD,EAAGlD,QAASmD,EAAGjD,KAAMiD,EAAKD,EAAGlD,OAAQ,CAC3Fyc,IAAAA,EAAYtZ,EAAGlD,MACfgK,EAAOwS,EAAUxS,KACjByS,EAAUD,EAAUE,GACpBC,EAAkBxa,EAAM4C,QACxB6X,GAAYH,KAAU,EAASA,EAAAA,UAAAA,IAAY9E,EAAU8E,GACzDta,EAAM+S,SAAQ,EAAa,EAAA,cAAA,KAAK2H,iBAAiBJ,GAASnZ,KAAM,KAAKpC,aACxD,EAAA,EAAA,eAAA,EAAaub,EAAAA,cAAAA,EAAS,KAAKvb,YAAY,EAAK,EAAA,MAAA,KAAKoC,KAAK0U,MAAM,GAAI,GAAzB,CAA6B7V,EAAMnC,SACnF8c,GAAc,EAEd,IACFA,GAAe9S,IAAQ,EAAc,EAAA,eAAA,KAAKL,QAASK,EAAM2S,EAAiB3X,EAAQ7C,GAClF,MAAO4a,GACD,MAAA,IAAInb,MAAM,8BAAgCoI,EAAKpC,MAAQoC,EAAKrI,MAAQ,8BAAgCyY,EAAY,oBAAsB,KAAK9Q,GAAK,OAASyT,EAAIhV,SAGjK+U,GAAAA,GAAeF,EAAW,MACHhY,IAArB4X,EAAUvT,SACZsT,EAAiBC,EAAUvT,QAG7BwH,EAAQpQ,KAAKjB,MAAMqR,GAAS,EAAS+L,EAAAA,UAAAA,EAAU/L,UAC/C6L,EAAqBE,EACrB,QAGJ,MAAOrY,GACPJ,EAAM,CACJzD,MAAO6D,GAED,QACJ,IACEjB,IAAOA,EAAGjD,OAAS+C,EAAKC,EAAGI,SAASL,EAAG7D,KAAK8D,GACxC,QACJc,GAAAA,EAAK,MAAMA,EAAIzD,OAInB,GAACgc,EAAD,CAIA,IAACC,EAAexd,OACX,MAAA,CACLgK,YAAa,CAACuT,GACdH,SAAU,GACVC,QAAS,GACTrK,cAAe5P,EAAMnC,MAAQ,CAAC,MAAQ,GACtCqc,OAAQla,EACRsO,QAASA,GAITuM,IAAAA,GAAoB,EAAQT,EAAAA,SAAAA,EAAejY,IAAI,SAAU8M,GACpDwD,OAAAA,EAAMqI,sBAAsB7L,EAAWjP,EAAM6S,iBAElDkI,IAAeZ,EAAmBa,SAI/B,MAAA,CACLpU,YAAa,CAACuT,GACdH,SALiBe,EAAa,IAAK,EAAQF,EAAAA,SAAAA,EAAkB1Y,IAAI,SAAUzF,GACpE+V,OAAAA,EAAMwI,eAAeve,MAK5Bud,QAASc,EAAa,GAAK,CAAC,MAC5BnL,cAAeiL,EACfX,OAAQla,EACRsO,QAASA,KAIb0H,EAAUlZ,UAAUme,eAAiB,SAAUhK,GACzCA,GAAAA,EAAeiK,QAAQ,MAClB,MAAA,GAMF9a,IAHH+a,IAAAA,EAAQ,GACR/a,EAAS6Q,EAEN7Q,GAAUA,IAAW,MAC1B+a,EAAMjd,KAAKkC,GACXA,EAASA,EAAO2P,OAKXoL,OAFPA,EAAMjd,KAAK,MAEJid,GAQTnF,EAAUlZ,UAAUoe,QAAU,SAAUjM,GAClC,GAAA,OAASA,EACJ,OAAA,EAKFc,IAFHA,IAAAA,EAAS,KAAKA,OAEXA,GAAQ,CACTA,GAAAA,IAAWd,EACN,OAAA,EAGTc,EAASA,EAAOA,OAGX,OAAA,GAGTiG,EAAUlZ,UAAU8Q,WAAa,SAAUkI,EAAYzH,EAAgBxL,EAAQuY,GACzE7L,IAAAA,EAAK1O,EAAIiC,EAAKhC,EAEdua,GAAa,EAAiB,EAAA,kBAAA,GAAID,EAAY,KAAKxC,cAAcwC,EAAUvd,OAAS,CAAC,OACrFyd,EAAiBxF,EAAWlG,cAAchT,QAAS,EAAiBye,EAAAA,kBAAAA,EAAYvF,EAAWlG,eAAiByL,EAE5G,IACG,IAAA,IAAIE,GAAmB,EAASD,EAAAA,UAAAA,GAAiBE,EAAqBD,EAAiB3d,QAAS4d,EAAmB1d,KAAM0d,EAAqBD,EAAiB3d,OAAQ,CACtK6S,IAAAA,EAAK+K,EAAmB3d,OAEvB,EAAIwd,EAAAA,KAAAA,EAAY5K,IACnBqF,EAAWkE,SAAS9b,KAAKuS,IAG7B,MAAOI,GACPtB,EAAM,CACJpR,MAAO0S,GAED,QACJ,IACE2K,IAAuBA,EAAmB1d,OAAS+C,EAAK0a,EAAiBra,SAASL,EAAG7D,KAAKue,GACtF,QACJhM,GAAAA,EAAK,MAAMA,EAAIpR,OAInB,IACG,IAAA,IAAIsd,GAAe,EAASJ,EAAAA,UAAAA,GAAaK,EAAiBD,EAAa7d,QAAS8d,EAAe5d,KAAM4d,EAAiBD,EAAa7d,OAAQ,CAC1I6S,EAAKiL,EAAe7d,OAEnB,EAAIyd,EAAAA,KAAAA,EAAgB7K,MAAO,EAAIqF,EAAAA,KAAAA,EAAWmE,QAASxJ,EAAGV,SACzD+F,EAAWmE,QAAQ/b,KAAKuS,IAG5B,MAAOvN,GACPJ,EAAM,CACJ3E,MAAO+E,GAED,QACJ,IACEwY,IAAmBA,EAAe5d,OAASgD,EAAK2a,EAAava,SAASJ,EAAG9D,KAAKye,GAC1E,QACJ3Y,GAAAA,EAAK,MAAMA,EAAI3E,OAIlB2X,EAAWoE,SACdpE,EAAWmE,QAAU,GAErBnE,EAAWkE,SAAS9b,KAAK,OAGvByd,IAAAA,GAAa,EAAQ7F,EAAAA,SAAAA,EAAWkE,SAAS7X,IAAI,SAAUsO,GACrDkC,IAAAA,EAAS,GAETlC,GAAY,UAAZA,EAAGjR,KACEmT,OAAAA,EAGL5C,IAAAA,EAASU,EAAGV,OAEZ,IAACA,EAAOA,OACH4C,OAAAA,EAGTA,EAAOzU,MAAK,EAAKuS,EAAAA,MAAAA,EAAGtJ,GAAIsJ,EAAGgH,WACtB1H,EAAAA,EAAAA,MAAAA,EAAO5I,GAAIsJ,EAAGgH,UAAW,EAAWhH,EAAAA,YAAAA,EAAGgH,SAAUpJ,EAAgBxL,QAAUJ,IAC5EmZ,IAAAA,EAAc7L,EAAOA,OAUlB4C,MARkB,aAArBiJ,EAAYpc,OACV,EAAYoc,EAAAA,aAAAA,GAAaxc,MAAM,SAAUyc,GACpC,OAAA,EAAe/F,EAAAA,gBAAAA,EAAWlG,cAAeiM,MAEhDlJ,EAAOzU,MAAK,EAAK0d,EAAAA,MAAAA,EAAYzU,KAI1BwL,KAETmD,EAAWmE,QAAQ6B,KAAK,SAAU9J,EAAGC,GAC5BA,OAAAA,EAAEgE,MAAQjE,EAAEiE,QAErBH,EAAWkE,SAAS8B,KAAK,SAAU9J,EAAGC,GAC7BD,OAAAA,EAAEiE,MAAQhE,EAAEgE,QAEjB8F,IAAAA,EAAc,IAAIpM,IAAImG,EAAWkE,UACjCgC,EAAa,IAAIrM,IAAImG,EAAWmE,SAEhClZ,GAAK,EAAO,EAAA,QAAA,EAAC,EAAQsE,EAAAA,SAAAA,MAAM8N,KAAK4I,GAAa5Z,IAAI,SAAU8M,GACtD,OAAA,EAASA,EAAAA,UAAAA,EAAUyD,WAAWvQ,IAAI,SAAU8K,GAC1C,OAAA,EAAMA,EAAAA,OAAAA,KACXgC,EAAUoI,YACZhZ,OAAOsd,EAAWxZ,IAAIwG,EAAf,SAAwB,EAAQtD,EAAAA,SAAAA,MAAM8N,KAAK6I,GAAY7Z,IAAI,SAAU8M,GACvE,OAAA,EAASA,EAAAA,UAAAA,EAAUsI,OAAQtI,EAAUyD,WAAWvQ,IAAI,SAAU8K,GAC5D,OAAA,EAAKA,EAAAA,MAAAA,UAEV,GACFgP,EAAelb,EAAG,GAClBmb,EAAcnb,EAAG,GAGduN,OADO,EAAgB4N,EAAAA,iBAAAA,EAAY7d,OAAOyX,EAAWxH,SAASjQ,OAAO4d,GAAe,KAAKzU,QAAQG,QAAQ2G,UAYlH0H,EAAUlZ,UAAUgZ,WAAa,SAAU9V,EAAOT,EAAOqD,QACzC,IAAV5C,IACFA,EAAQ,KAAK4U,cAGX/R,IAEAuL,EAFAvL,GAAS,EAAatD,EAAAA,cAAAA,GAItBS,GAAAA,aAAiBuS,EAArB,MACEnE,OAA2B3L,IAAZG,EAAwB5C,EAAQ,KAAKqZ,aAAa9G,EAAMY,MAAAA,KAAKnT,EAAO4C,QAC9E,CACDuZ,IAAAA,GAAqB,EAASnc,EAAAA,UAAAA,GAAS,KAAKsZ,SAAQ,EAAiB,EAAA,kBAAA,KAAK8C,gBAAgBpc,KAAW,KAAKsZ,QAAQtZ,GAClHwa,EAAkB5X,GAAoB,KAAK4E,QAAQ5E,QACvDwL,EAAe,KAAKiL,aAAa9G,EAAMY,MAAAA,KAAKgJ,EAAoB3B,IAG9D,IAAC9b,EAAD,eAAkBmE,EAAO4C,OAAS6P,EAC9B,MAAA,IAAI7V,MAAM,4CAA8C6V,EAAW,MAGvE,GAAA,KAAK8B,SACF,KAAKzE,OAAOyG,SAASvW,EAAO4C,SAAU,EAAe5C,EAAAA,gBAAAA,EAAO4C,MACzD,MAAA,IAAIhG,MAAM,YAAc,KAAK0H,GAAK,4BAA8BtE,EAAO4C,KAAO,KAIpF4W,IAAAA,EAAkB,KAAK5C,YAAYrL,EAAavQ,MAAOuQ,EAAcvL,IAAW,CAClF+D,YAAa,GACbgJ,cAAe,GACfoK,SAAU,GACVC,QAAS,GACTC,OAAQ9L,EACRE,QAAS,IAEP+M,GAAa,EAAiB,EAAA,kBAAA,GAAI,KAAKzC,cAAcxK,EAAavQ,QAClEyd,EAAiBe,EAAgBzM,cAAchT,QAAS,EAAiBye,EAAAA,kBAAAA,EAAYgB,EAAgBzM,eAAiByL,EAEnH,OADPgB,EAAgBzM,eAAgB,EAAS0L,EAAAA,UAAAA,GAClC,KAAKgB,kBAAkBD,EAAiBjO,EAAcvL,IAG/DmT,EAAUlZ,UAAUyf,wBAA0B,SAAUvc,EAAO6C,EAAQ2Z,GACjE3b,IAAAA,EAEA4b,EAAiBzc,EAAMsO,QASpBtO,OARPA,EAAQ,KAAK8V,WAAW9V,EAAO6C,IAGzBA,OAAS2Z,EACfxc,EAAMT,MAAQid,EAAcxZ,MAE3BnC,EAAKb,EAAMsO,SAASoO,QAAQzf,MAAM4D,GAAI,EAAS4b,EAAAA,UAAAA,IAEzCzc,GAGTgW,EAAUlZ,UAAUwf,kBAAoB,SAAUD,EAAiBjO,EAAcvL,EAAQD,GACnFe,IAAAA,EAAK9C,EAEL4R,EAAQ,UAEG,IAAX5P,IACFA,EAAS4H,EAAT,gBAGc,IAAZ7H,IACFA,EAAU,KAAK4E,QAAQ5E,SAGrBgN,IAAAA,EAAgByM,EAAgBzM,cAKhCuM,GADkB/N,GAAgBiO,EAAgBzV,YAAYhK,OAAS,GACjC,EAAS,EAAA,UAAA,KAAK4K,QAASoI,QAAiBnN,EAC9EoQ,EAAezE,EAAeA,EAAayE,aAAezE,EAAayE,aAAewJ,EAAgBnC,OAAS,KAAK1S,QAAQqL,aAAazE,EAAavQ,YAAS4E,OAAYA,EAC3K4L,EAAiBD,EAAeA,EAAaxL,QAAUA,EACvD0L,EAAU,KAAKV,WAAWyO,EAAiBhO,EAAgBxL,EAAQuL,GACnEsE,EAAatE,GAAe,EAAS,EAAA,UAAA,GAAIA,EAAasE,YAAc,GAEpE,IACG,IAAA,IAAIiK,GAAY,EAASrO,EAAAA,UAAAA,GAAUsO,EAAcD,EAAU/e,QAASgf,EAAY9e,KAAM8e,EAAcD,EAAU/e,OAAQ,CACrHqH,IAAAA,EAAS2X,EAAY/e,MAErBoH,EAAOzF,OAASqd,EAApB,MACEnK,EAAWzN,EAAOgI,SAAS9F,IAAMlC,EAAOgI,SAASzN,MAAQyF,EAChDA,EAAOzF,OAASuP,EAApB,OACL2D,EAAWzN,EAAOgI,SAAS9F,IAAMlC,EAAOgI,SAASzN,OAAQ,IAG7D,MAAOwE,GACPL,EAAM,CACJxF,MAAO6F,GAED,QACJ,IACE4Y,IAAgBA,EAAY9e,OAAS+C,EAAK8b,EAAUzb,SAASL,EAAG7D,KAAK2f,GACjE,QACJhZ,GAAAA,EAAK,MAAMA,EAAIxF,OAInB2C,IAAAA,GAAK,EAAO,EAAA,SAAA,EAAe,EAAA,gBAAA,KAAMsN,EAAcC,EAAgBxL,EAAQyL,GAAU,GACjFwO,EAAkBhc,EAAG,GACrB2D,EAAiB3D,EAAG,GAEpBC,GAAK,EAAO,EAAA,SAAA,EAAU+b,EAAAA,WAAAA,EAAiB,SAAU7X,GAC5CA,OAAAA,EAAOzF,OAAS8L,EAAhB,OAA2BrG,EAAOzF,OAASkM,EAAhB,MAA0BzG,EAAOsG,KAAOjD,EAAekD,eAAAA,WACvF,GACAuR,EAAehc,EAAG,GAClBic,EAAmBjc,EAAG,GAOtBmS,EALgB4J,EAAgB3E,OAAO,SAAUlT,GAC/CpE,IAAAA,EAEGoE,OAAAA,EAAOzF,OAASqd,EAAhB,QAAuD,QAA1Bhc,EAAKoE,EAAOgI,gBAA6B,IAAPpM,OAAgB,EAASA,EAAGrB,QAAUoK,EAA5G,SAE2BjF,OAAO,SAAUC,EAAKK,GAE1CL,OADPA,EAAIK,EAAOgI,SAAS9F,KAAM,EAAqBlC,EAAAA,sBAAAA,EAAOgI,SAAUwF,EAAMjL,QAAS/C,EAAgB5B,GACxF+B,GACNwJ,GAAe,EAAS,EAAA,UAAA,GAAIA,EAAa8E,UAAY,IACpD+J,EAAwBd,EAAqBE,EAAgBzM,cAAgBxB,EAAeA,EAAawB,cAAgB,GACzH5K,EAAOiY,EAAsBtY,OAAO,SAAUC,EAAKqK,GAK9CrK,YAJgBnC,IAAnBwM,EAAUjK,OACZJ,EAAIqK,EAAU9H,IAAM8H,EAAUjK,MAGzBJ,GACN,IACCsY,GAAS,EAAeD,EAAAA,gBAAAA,EAAuB,MAC/CE,EAAY,IAAI5K,EAAJ,MAAU,CACxB1U,MAAOse,GAAsB/N,EAAavQ,MAC1C+E,QAAS6B,EACT5B,OAAQA,EAER+P,WAAYxE,EAAeA,EAAawE,WAAa,KACrDC,aAAcsJ,EAAqBtJ,GAAe,EAAmBA,EAAAA,oBAAAA,EAAcsJ,QAAsB1Z,EAAY2L,EAAeA,EAAayE,kBAAepQ,EAChKqQ,SAAUqJ,GAAsBE,EAAgBnC,OAAS9L,OAAe3L,EACxE6L,QAAS6N,EAAqBa,EAAmB,GACjDtK,WAAYyJ,EAAqBzJ,EAAatE,EAAeA,EAAasE,WAAa,GACvF1N,KAAMmX,EAAqBnX,EAAOoJ,EAAeA,EAAapJ,UAAOvC,EACrEkQ,OAAQ,GACR/C,cAAeqN,EACfrW,YAAayV,EAAgBzV,YAC7BsM,SAAUA,EACVpV,KAAMof,IAEJE,EAAmB/O,IAAmB5J,EAC1C0Y,EAAUE,QAAUxa,EAAO4C,OAAS0E,EAAhB,QAA0BiT,EAE1CtK,IAAAA,EAAUqK,EAAUrK,QAMpB,GAJAA,UACKA,EAAQA,SAGZqJ,EACIgB,OAAAA,EAGLG,IAAAA,EAAiBH,EAEjB,IAACD,EAWIH,KAVW,KAAK7F,YAActH,EAAc8B,KAAK,SAAUzC,GACzDA,OAAAA,EAAUiI,gBAIjBoG,EAAiB,KAAKf,wBAAwBe,EAAgB,CAC5D9d,KAAMyJ,EAAAA,WACLpG,IAGEka,EAAangB,QAAQ,CACtB2gB,IAAAA,EAAcR,EAAaS,QAC/BF,EAAiB,KAAKf,wBAAwBe,EAAgBC,EAAY1a,OAAQA,GAKlFwa,IAAAA,EAAUC,EAAeD,UAAYvK,IAAYwK,EAAehP,QAAQ1R,QAAUwgB,UAA2BtK,EAAQjV,cAAiByf,EAAezf,SAAU,EAAiByf,EAAAA,kBAAAA,EAAezf,MAAOiV,EAAQjV,YAAS4E,GAKpN6a,OAJPA,EAAeD,QAAUA,EAEzBC,EAAezK,aAAesK,EAAUtK,aACxCyK,EAAexK,QAAUA,EAClBwK,GAOTtH,EAAUlZ,UAAU+b,aAAe,SAAU4E,GACvCjI,GAAAA,EAAUiI,GACL,OAAA,KAAKjW,QAAQkT,iBAAiB+C,GAGnC,IAAC,KAAKtZ,OACF,MAAA,IAAI1E,MAAM,mCAAqCge,EAAW,WAAa,KAAKtW,GAAK,6BAGrF3G,IAAAA,EAAS,KAAK2D,OAAOsZ,GAErB,IAACjd,EACG,MAAA,IAAIf,MAAM,gBAAkBge,EAAW,wBAA0B,KAAKtW,GAAK,KAG5E3G,OAAAA,GASTwV,EAAUlZ,UAAU4d,iBAAmB,SAAU/a,GAC3C+d,IAAAA,EAAkBlI,EAAU7V,GAAWA,EAAQkW,MAAMR,EAAiBzY,QAAU+C,EAEhF+d,GAAAA,IAAoB,KAAKvW,GACpB,OAAA,KAGL8H,IAAAA,EAAY,KAAKzH,QAAQiP,MAAMiH,GAE/B,IAACzO,EACG,MAAA,IAAIxP,MAAM,sBAAwBie,EAAkB,gCAAkC,KAAKvW,GAAK,KAGjG8H,OAAAA,GAST+G,EAAUlZ,UAAU6gB,mBAAqB,SAAUxd,GAC7C,GAAqB,iBAAdA,GAA0BqV,EAAUrV,GACzC,IACK,OAAA,KAAKua,iBAAiBva,EAAU0V,MAAM,IAC7C,MAAO1Y,IAQJygB,IAHHA,IAAAA,GAAiB,EAAYzd,EAAAA,aAAAA,EAAW,KAAKpB,WAAW8W,QACxDgI,EAAmB,KAEhBD,EAAehhB,QAAQ,CACxByC,IAAAA,EAAMue,EAAeJ,QAErB,IAACne,EAAIzC,OACP,MAGFihB,EAAmBA,EAAiBhF,aAAaxZ,GAG5Cwe,OAAAA,GAST7H,EAAUlZ,UAAUwc,QAAU,SAAUrZ,GAClCY,IAAAA,EAEA4R,EAAQ,KAER,IAACxS,EACI,OAAA,KAAKoW,mBAAqBd,EAG3B,OAAA,KAAK/V,MACN,IAAA,WACI,OAAA,EAAU,EAAA,WAAA,KAAK6W,kBAAmB,SAAUjU,EAAe4W,GACzD5W,OAAAA,EAAgBqQ,EAAMoG,aAAaG,GAAaM,QAAQrZ,EAAW+Y,IAAgB5W,GAAiBmT,IAG1G,IAAA,WACC,IAAA,EAAStV,EAAAA,UAAAA,GAAa,CACpBiZ,IAAAA,EAAe,KAAKL,aAAa5Y,GAEjCiZ,MAAsB,aAAtBA,EAAa1Z,MAA6C,aAAtB0Z,EAAa1Z,OAC5CqB,EAAK,IAAOZ,GAAciZ,EAAa7C,kBAAmBxV,GAG5DZ,EAGL,OAAC,EAAKA,EAAAA,MAAAA,GAAYrD,QAIf,EAAUqD,EAAAA,WAAAA,EAAY,SAAUmC,EAAe4W,GAC7C5W,OAAAA,EAAgBqQ,EAAMoG,aAAaG,GAAaM,QAAQlX,GAAiBmT,IAJzE,KAAKc,mBAAqB,GAOrC,QACSpW,OAAAA,GAAcsV,IAI3BS,EAAUlZ,UAAUsf,gBAAkB,SAAU0B,GAC1CtI,GAAAA,EAAUsI,GAAkB,CAC1B7O,IAAAA,EAAY,KAAKzH,QAAQiP,MAAMqH,EAAgBjI,MAAMR,EAAiBzY,SAEtE,IAACqS,EACG,MAAA,IAAIxP,MAAM,8BAAgCqe,EAAkB,KAG7D7O,OAAAA,EAAU9N,KAGZ,OAAA,EAAY2c,EAAAA,aAAAA,EAAiB,KAAK/e,YAG3C1C,OAAO2O,eAAegL,EAAUlZ,UAAW,oBAAqB,CAC9D+Q,IAAK,WACChN,IAAAA,EAMAwV,EAJA,GAAA,KAAKF,QAAQE,kBACR,OAAA,KAAKF,QAAQE,kBAKlB,GAAc,aAAd,KAAK7W,KACP6W,GAAoB,EAAgB,EAAA,iBAAA,KAAKlS,OAAQ,SAAUnE,GAClDA,OAAAA,EAAMqW,mBAAqBd,GACjC,SAAUtG,GACJ,QAAqB,YAAnBA,EAAUzP,aAEhB,QAAqBiD,IAAjB,KAAKsU,QAAuB,CACjC,IAAC,KAAK5S,OAAO,KAAK4S,SACd,MAAA,IAAItX,MAAM,kBAAoB,KAAKsX,QAAU,mBAAqB,KAAK1X,IAAM,KAGrFgX,GAAoB,EAAW,EAAA,YAAA,KAAKlS,OAAO,KAAK4S,UAAY,KAAKA,UAAWlW,EAAK,IAAO,KAAKkW,SAAW,KAAK5S,OAAO,KAAK4S,SAASV,kBAAmBxV,GAIhJ,OADFsV,KAAAA,QAAQE,kBAAoBA,EAC1B,KAAKF,QAAQE,mBAEtBpL,YAAY,EACZC,cAAc,IAGhB8K,EAAUlZ,UAAUihB,gBAAkB,SAAU9d,EAAY2C,GACtDgN,IAAAA,EAAgB,KAAKgJ,cAAc3Y,GAChC,OAAA,KAAKqc,kBAAkB,CAC5B1M,cAAeA,EACfoK,SAAUpK,EACVqK,QAAS,GACTrT,YAAa,GACbsT,YAAQzX,EACR6L,QAAS,SACR7L,OAAWA,EAAWG,IAG3BvG,OAAO2O,eAAegL,EAAUlZ,UAAW,eAAgB,CAKzD+Q,IAAK,WACE8J,KAAAA,QAGDtB,IAAAA,EAAoB,KAAKA,kBAEzB,IAACA,EACG,MAAA,IAAI5W,MAAM,oDAAsD,KAAK0H,GAAK,MAG3E,OAAA,KAAK4W,gBAAgB1H,IAE9BpL,YAAY,EACZC,cAAc,IAEhB7O,OAAO2O,eAAegL,EAAUlZ,UAAW,SAAU,CAKnD+Q,IAAK,WACC/G,IAAAA,EAEA,GAAc,YAAd,KAAKtH,KAAoB,CACvBwe,IAAAA,EAAgB,KAAKxL,OAGvB1L,GADE,EAASkX,EAAAA,UAAAA,EAAclX,SAChB0O,EAAUwI,EAAclX,SAAU,EAAiB,EAAA,kBAAA,KAAKU,QAAQkT,iBAAiBsD,EAAclX,QAAQ3F,KAAK0U,MAAM,KAAK1U,KAAKvE,OAAS,IAErIohB,EAAclX,OAIpBA,OAAAA,GAETmE,YAAY,EACZC,cAAc,IAUhB8K,EAAUlZ,UAAUge,sBAAwB,SAAUmD,EAAiBpL,EAAcyG,GAK5EA,YAJS,IAAZA,IACFA,GAAU,GAGLA,EAAmC,YAAzB2E,EAAgBze,KAAqBye,EAAgBC,eAAerL,GAAgBoL,EAAgBvN,kBAAoB,CAACuN,IAG5I5hB,OAAO2O,eAAegL,EAAUlZ,UAAW,oBAAqB,CAC9D+Q,IAAK,WACC4E,IAAAA,EAAQ,KAER,IAAA,EAAW,EAAA,YAAA,MACN,MAAA,CAAC,MAIN,GAAc,aAAd,KAAKjT,OAAwB,KAAKuX,QAK7B,OAJFrY,EAAL,gBACO,EAAA,EAAA,OAAA,EAAO,wBAA0B,KAAKyI,GAAK,2BAG3C,CAAC,MAGNgX,IAAAA,GAAwB,EAAa,EAAA,cAAA,KAAK9H,mBACvC,OAAA,EAAQ8H,EAAAA,SAAAA,EAAsBhc,IAAI,SAAUic,GAC1C3L,OAAAA,EAAM4L,oBAAoBD,OAGrCnT,YAAY,EACZC,cAAc,IAShB8K,EAAUlZ,UAAUuhB,oBAAsB,SAAUC,GAC9C,IAACA,EAAa1hB,OACT,MAAA,CAAC,MAGNiE,IAAAA,GAAK,EAAOyd,EAAAA,QAAAA,GACZb,EAAW5c,EAAG,GACd0d,EAAiB1d,EAAGgV,MAAM,GAE1B,IAAC,KAAK1R,OACF,MAAA,IAAI1E,MAAM,4BAA8Bge,EAAW,8BAGvDxM,IAAAA,EAAiB,KAAK4H,aAAa4E,GAEnCxM,GAAwB,YAAxBA,EAAezR,KACVyR,OAAAA,EAAeiN,iBAGpB,IAAC,KAAK/Z,OAAOsZ,GACT,MAAA,IAAIhe,MAAM,gBAAkBge,EAAW,wBAA0B,KAAKtW,GAAK,KAG5E,OAAA,KAAKhD,OAAOsZ,GAAUY,oBAAoBE,IAGnDvI,EAAUlZ,UAAU+V,aAAe,SAAU2L,GACvC,IAAC,EAAK,EAAA,MAAA,KAAKra,QAAQvH,OAIhB,MAAA,CACLyH,QAASma,GAAsB,KAAKnI,kBACpClS,QAAQ,EAAgB,EAAA,iBAAA,KAAKA,OAAQ,SAAU8K,EAAW5P,GACpD,IAACmf,EACIvP,OAAAA,EAAU4D,eAGfzQ,IAAAA,GAAgB,EAASoc,EAAAA,UAAAA,QAAsB/b,EAAY+b,EAAmBnf,GAC3E4P,OAAAA,EAAU4D,aAAazQ,GAAiB6M,EAAUoH,oBACxD,SAAUpH,GACJ,OAACA,EAAU6D,YAYxBkD,EAAUlZ,UAAUohB,eAAiB,SAAUrL,GACzCJ,IAAAA,EAAQ,KAER,GAAc,YAAd,KAAKjT,KACA,MAAA,CAAC,MAGNuQ,IAAAA,EAAS,KAAKA,OAEd,IAAC8C,EAAc,CACb4L,IAAAA,EAAgB,KAAK3X,OAClB2X,OAAAA,GAAgB,EAAQ,EAAA,UAAA,EAAaA,EAAAA,cAAAA,GAAetc,IAAI,SAAUuc,GAChE3O,OAAAA,EAAOsO,oBAAoBK,MAC9B3O,EAAOW,kBAGXiO,IAAAA,GAAkB,EAAW5O,EAAAA,YAAAA,EAAO5O,KAAM,SAAxB,CAAkC0R,GAAcxO,QAElE,OAAA,EAASsa,EAAAA,UAAAA,GACJ,CAAC5O,EAAO8I,aAAa8F,KAGvB,EAAQ,EAAA,UAAA,EAAaA,EAAAA,cAAAA,GAAiBxc,IAAI,SAAUyc,GAClDnM,MAAkB,SAAlBA,EAAMK,QAAqB/C,EAAOsO,oBAAoBO,GAAgB,CAAC7O,EAAO5L,OAAOya,EAAa,SAI7GviB,OAAO2O,eAAegL,EAAUlZ,UAAW,WAAY,CAIrD+Q,IAAK,WACC4E,IAAAA,EAAQ,KAERoM,GAAgB,EAAQ,EAAA,UAAA,EAAK,EAAA,MAAA,KAAK1a,QAAQhC,IAAI,SAAUsb,GACnDhL,OAAAA,EAAMtO,OAAOsZ,GAAUqB,YAEzB,MAAA,CAAC,KAAK3X,IAAI9I,OAAOwgB,IAE1B5T,YAAY,EACZC,cAAc,IAEhB7O,OAAO2O,eAAegL,EAAUlZ,UAAW,SAAU,CAInD+Q,IAAK,WACC/I,IAAAA,EAAKjE,EAAIke,EAAKje,EAEd,GAAA,KAAKqV,QAAQxD,OACR,OAAA,KAAKwD,QAAQxD,OAGlBxO,IAAAA,EAAS,KAAKA,OACdwO,EAAS,IAAIhD,IAAI,KAAKkC,WAEtB1N,GAAAA,EACE,IACG,IAAA,IAAIpD,GAAK,EAAS,EAAA,WAAA,EAAKoD,EAAAA,MAAAA,IAAUqL,EAAKzO,EAAGnD,QAAS4R,EAAG1R,KAAM0R,EAAKzO,EAAGnD,OAAQ,CAC1E+B,IACAK,EAAQmE,EADEqL,EAAG3R,OAGbmC,GAAAA,EAAMmE,OACJ,IACG,IAAA,IAAIkM,GAAM0O,OAAM,GAAQ,EAAS/e,EAAAA,UAAAA,EAAM2S,SAAUrC,EAAKD,EAAGzS,QAAS0S,EAAGxS,KAAMwS,EAAKD,EAAGzS,OAAQ,CAC1FohB,IAAAA,EAAU1O,EAAGzS,MACjB8U,EAAO1C,IAAI,GAAK+O,IAElB,MAAOC,GACPF,EAAM,CACJ5gB,MAAO8gB,GAED,QACJ,IACE3O,IAAOA,EAAGxS,OAASgD,EAAKuP,EAAGnP,SAASJ,EAAG9D,KAAKqT,GACxC,QACJ0O,GAAAA,EAAK,MAAMA,EAAI5gB,SAK3B,MAAOiH,GACPN,EAAM,CACJ3G,MAAOiH,GAED,QACJ,IACEoK,IAAOA,EAAG1R,OAAS+C,EAAKE,EAAGG,SAASL,EAAG7D,KAAK+D,GACxC,QACJ+D,GAAAA,EAAK,MAAMA,EAAI3G,OAKlB,OAAA,KAAKgY,QAAQxD,OAAStN,MAAM8N,KAAKR,IAE1C1H,YAAY,EACZC,cAAc,IAEhB7O,OAAO2O,eAAegL,EAAUlZ,UAAW,YAAa,CAMtD+Q,IAAK,WACC8E,IAAAA,EAAS,IAAIhD,IAAI,KAAK/I,YAAYuR,OAAO,SAAUrC,GAC9C,SAAGA,EAAWhP,SAAWgP,EAAWxH,QAAQ1R,QAAUkZ,EAAWkF,YACvE7Y,IAAI,SAAU2T,GACRA,OAAAA,EAAW1S,aAEbiC,OAAAA,MAAM8N,KAAKR,IAEpB1H,YAAY,EACZC,cAAc,IAGhB8K,EAAUlZ,UAAUoiB,cAAgB,SAAUC,GACxC1M,IAAAA,EAAQ,KAER0M,QAAY1c,IAAZ0c,EAKGA,OAAAA,EAAQhd,IAAI,SAAU2E,GACvB,KAAC,EAASA,EAAAA,UAAAA,GACLA,OAAAA,EAGLsY,IAAAA,EAAmBtY,EAAO,KAAO2L,EAAM1T,UAGvCqgB,GAAAA,IAAqB3M,EAAM1C,OACtB0C,OAAAA,EAAMkL,mBAAmB7W,EAAO+O,MAAM,IAG3C3J,IAAAA,EAAiBkT,EAAmB3M,EAAMpT,IAAMyH,EAASA,EAEzD2L,IAAAA,EAAM1C,OASD0C,OAAAA,EAAMkL,mBAAmBzR,GAR5B,IAGKmT,OAFe5M,EAAM1C,OAAO4N,mBAAmBzR,GAGtD,MAAO0O,GACD,MAAA,IAAInb,MAAM,iDAAmDgT,EAAMtL,GAAK,OAASyT,EAAIhV,aAQnGoQ,EAAUlZ,UAAU6b,iBAAmB,SAAU2G,GAC3C7M,IAAAA,EAAQ,KAER8M,GAAmB,EAAgBD,EAAAA,iBAAAA,EAAiBxY,QACpDkU,EAAW,aAAcsE,EAAmBA,EAAiBtE,UAAWuE,GAAmBA,EAAiB7N,KAAK,SAAUyN,GACtH,OAAA,EAASA,EAAAA,UAAAA,IAAYA,EAAQ,KAAO1M,EAAM1T,YAE/C2I,EAAS,KAAKF,QAAQG,QAAQD,OAC9BZ,EAAS,KAAKoY,cAAcK,GAE5BzJ,GAAa,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIwJ,GAAmB,CACxDhR,SAAS,EAAgB,EAAA,kBAAA,EAAQgR,EAAAA,SAAAA,EAAiBhR,UAClDzG,MAAM,EAAQyX,EAAAA,SAAAA,EAAiBzX,KAAMH,GACrCZ,OAAQA,EACRoT,OAAQ,KACRc,SAAUA,EACV5X,UAAWkc,EAAiB/f,MAC5BgU,OAAQ,WACC,OAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIuC,GAAa,CACxChP,OAAQgP,EAAWhP,OAASgP,EAAWhP,OAAO3E,IAAI,SAAU5F,GACnD,MAAA,IAAMA,EAAE4K,UACZ1E,EACLyX,OAAQ,IAAMzH,EAAMtL,QAKnB2O,OAAAA,GAGTE,EAAUlZ,UAAUib,kBAAoB,WAClCyH,IAAAA,EAAK3e,EAIL4e,EAFAhN,EAAQ,KAIR,GAAC,KAAKD,OAAO8D,GAEV,GAAIjR,MAAMzF,QAAQ,KAAK4S,OAAO8D,IACnCmJ,EAAW,KAAKjN,OAAO8D,OAClB,CACDxV,IAAAA,EAAK,KAAK0R,OAAO8D,GACjBvV,EAAKuU,EACL9F,EAAK1O,EAAGC,GACR2e,OAAyB,IAAPlQ,EAAgB,GAAKA,EACvCmQ,GAA4B,EAAO7e,EAAAA,QAAAA,EAAI,CAAe,iBAAPC,EAAkBA,EAAKA,EAAK,KAE/E0e,GAAW,EAAQ,EAAA,UAAA,EAAKE,EAAAA,MAAAA,GAA2Bxd,IAAI,SAAU9C,GAC1DX,EAAD,eAAkBW,IAAQ+V,IACvB,EAAA,EAAA,OAAA,EAAO,uNAA+N3C,EAAMtL,GAAK,MAGpPyY,IAAAA,GAAwB,EAAwBvgB,EAAAA,yBAAAA,EAAKsgB,EAA0BtgB,IAM5EugB,OAJFlhB,EAAL,eACEiX,EAA8BlD,EAAOpT,EAAKugB,GAGrCA,IACNvhB,QAAO,EAAwBiX,EAAAA,yBAAAA,EAAUoK,UAtB5CD,EAAW,GAyBTI,IAAAA,EAAkB,KAAKrN,OAAO2E,QAAS,EAAwB,EAAA,yBAAA,GAAI,KAAK3E,OAAO2E,QAAU,GACzF2I,EAAa,KAAKtN,OAAOyC,QAAS,EAAwB8K,EAAAA,yBAAAA,QAAO,EAAK,EAAA,MAAA,KAAK5Y,KAAM,KAAKqL,OAAOyC,QAAU,GAEtGvW,EAAL,gBACO,EAAA,EAAA,QAAE,KAAK8T,OAAOyC,SAAW,KAAKlF,QAAS,+EAAoF,KAAK5I,GAAK,MAGxI6N,IAAAA,GAAe,EAAQ,EAAA,SAAA,KAAKpL,OAAOzH,IAAI,SAAUgT,GAC/C6K,IAAAA,EAAoB,GAUjBA,OARH7K,EAAUF,QACZ+K,EAAkB9hB,KAAKjB,MAAM+iB,GAAmB,EAAS,EAAA,WAAA,EAAwBD,EAAAA,yBAAAA,QAAO,EAAW5K,EAAAA,YAAAA,EAAUhO,KAAMgO,EAAUF,UAG3HE,EAAUD,SACZ8K,EAAkB9hB,KAAKjB,MAAM+iB,GAAmB,EAAS,EAAA,WAAA,EAAwBD,EAAAA,yBAAAA,QAAO,EAAM5K,EAAAA,OAAAA,EAAUhO,KAAMgO,EAAUD,WAGnH8K,KAELxJ,EAAqB,KAAKpN,MAC1B6W,GAAuB,EAAQ,EAAA,UAAA,EAASH,EAAAA,UAAAA,EAAY9K,EAAcyK,EAAUI,GAAiB1d,IAAI,SAAUmd,GACtG,OAAA,EAAQA,EAAAA,SAAAA,GAAkBnd,IAAI,SAAU2T,GACtCrD,OAAAA,EAAMkG,iBAAiB7C,QAI9B,IACG,IAAA,IAAIoK,GAAuB,EAAS1J,EAAAA,UAAAA,GAAqB2J,EAAyBD,EAAqBtiB,QAASuiB,EAAuBriB,KAAMqiB,EAAyBD,EAAqBtiB,OAAQ,CAClM8a,IAAAA,EAAoByH,EAAuBtiB,MAC/CoiB,EAAqB/hB,KAAKwa,IAE5B,MAAO0H,GACPZ,EAAM,CACJrhB,MAAOiiB,GAED,QACJ,IACED,IAA2BA,EAAuBriB,OAAS+C,EAAKqf,EAAqBhf,SAASL,EAAG7D,KAAKkjB,GAClG,QACJV,GAAAA,EAAK,MAAMA,EAAIrhB,OAIhB8hB,OAAAA,GAGFjK,EA99CT,GAJA,QAAA,UAAA;;ACxBC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,QAAA,EAAA,QAAA,cAAA,EAdD,IAAA,EAAA,QAAA,kBAEA,SAASqK,EAAQ7N,EAAQ7K,EAAS2Y,QACT,IAAnBA,IACFA,EAAiB9N,EAAO5P,SAGtB2d,IAAAA,EAAmD,mBAAnBD,EAAgCA,IAAmBA,EAChF,OAAA,IAAItK,EAAJ,UAAcxD,EAAQ7K,EAAS4Y,GAGxC,SAASC,EAAchO,EAAQ7K,GACzB4Y,IAAAA,EAAmD,mBAAnB/N,EAAO5P,QAAyB4P,EAAO5P,UAAY4P,EAAO5P,QACvF,OAAA,IAAIoT,EAAJ,UAAcxD,EAAQ7K,EAAS4Y;;ACRxC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,EALA,IAAA,EAAA,QAAA,wBACIE,EAAiB,CACnBC,aAAa,GAGXC,EAIJ,WACWA,SAAAA,EAAUhZ,GACZiZ,KAAAA,iBAAkB,EAClBC,KAAAA,MAAQ,GACRC,KAAAA,aAAc,EACdnZ,KAAAA,SAAU,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAI8Y,GAAiB9Y,GA4DjDgZ,OAzDPA,EAAU7jB,UAAUikB,WAAa,SAAUC,GAGrCA,GAFCF,KAAAA,aAAc,EAEfE,EAAU,CACR,IAAC,KAAKrZ,QAAQ+Y,YAEhB,YADKO,KAAAA,SAASD,GAIXE,KAAAA,QAAQF,GAGVG,KAAAA,eAGPR,EAAU7jB,UAAUmkB,SAAW,SAAUG,GACnC,GAAC,KAAKN,cAAe,KAAKF,gBAA1B,CAKA,GAAsB,IAAtB,KAAKC,MAAMjkB,OACP,MAAA,IAAI6C,MAAM,gEAGbyhB,KAAAA,QAAQE,GACRD,KAAAA,mBATEN,KAAAA,MAAM3iB,KAAKkjB,IAYpBT,EAAU7jB,UAAUukB,MAAQ,WACrBR,KAAAA,MAAQ,IAGfF,EAAU7jB,UAAUqkB,YAAc,WAGzBG,IAFHA,IAAAA,EAAe,KAAKT,MAAMrD,QAEvB8D,GACAJ,KAAAA,QAAQI,GACbA,EAAe,KAAKT,MAAMrD,SAI9BmD,EAAU7jB,UAAUokB,QAAU,SAAUF,GACjCJ,KAAAA,iBAAkB,EAEnB,IACFI,IACA,MAAO7jB,GAIDA,MADDkkB,KAAAA,QACClkB,EACE,QACHyjB,KAAAA,iBAAkB,IAIpBD,EAjET,GAJA,QAAA,UAAA;;ACHA,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,cAAA,EAFA,IAAIzN,EAAwB,IAAI/B,IAC5BoQ,EAAiB,EACjBC,EAAW,CACbC,OAAQ,WACC,MAAA,KAAOF,KAEhBG,SAAU,SAAUva,EAAIwa,GAEfxa,OADP+L,EAAS5B,IAAInK,EAAIwa,GACVxa,GAET0G,IAAK,SAAU1G,GACN+L,OAAAA,EAASrF,IAAI1G,IAEtBya,KAAM,SAAUza,GACd+L,EAAS2O,OAAO1a,KAZpB,QAAA,SAAA;;ACoBC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,gBAAA,EAtBD,IAAA,EAAA,QAAA,oBAEA,SAAS2a,IACHC,IAAAA,EAAIC,OAEJ,GAAED,EAAEE,WACCF,OAAAA,EAAEE,WAMb,SAASC,EAAgBvO,GACnBjV,IAAAA,EAAiB,eAAkB,oBAAXsjB,OAAxBtjB,CAIAyjB,IAAAA,EAAWL,IAEXK,GACFA,EAAST,SAAS/N;;;ACgwCrB,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,UAAA,EAAA,QAAA,MAAA,EAAA,QAAA,kBAAA,QAAA,iBAAA,EApxCD,IAiBIyO,EAjBJ,EAAA,QAAA,wBACA,EAAA,QAAA,oBACA,EAAA,QAAA,cACA,EAAA,QAAA,cACA,EAAA,QAAA,mBACA,EAAA,QAAA,oBACA,EAAA,QAAA,gBACA,EAAA,QAAA,cACA,EAAA,QAAA,qBACA,EAAA,QAAA,cACA,EAAA,QAAA,kBACA,EAAA,QAAA,iBACA,EAAA,QAAA,iBACIC,EAAwB,CAC1BC,MAAM,EACNC,aAAa,GAqwCd,QAAA,kBAAA,EAjwCD,SAAWH,GACTA,EAAkBA,EAAiB,WAAiB,GAAK,aACzDA,EAAkBA,EAAiB,QAAc,GAAK,UACtDA,EAAkBA,EAAiB,QAAc,GAAK,UAHxD,CAIGA,IAAsBA,QAAAA,kBAAAA,EAAoB,KAE7C,IAAII,EAIJ,WAOWA,SAAAA,EAAYhb,EAASG,GACxB8K,IAAAA,EAAQ,UAEI,IAAZ9K,IACFA,EAAU6a,EAAY/B,gBAGnBjZ,KAAAA,QAAUA,EACVib,KAAAA,UAAY,IAAI9B,EAAJ,UACZ+B,KAAAA,iBAAmB,GACnBC,KAAAA,UAAY,IAAIhT,IAChBiT,KAAAA,iBAAmB,IAAIjT,IACvBkT,KAAAA,cAAgB,IAAIlT,IACpBmT,KAAAA,cAAgB,IAAInT,IACpBoT,KAAAA,eAAiB,IAAIpT,IACrBqT,KAAAA,cAAgB,IAAIrT,IAKpBmR,KAAAA,aAAc,EACdmC,KAAAA,OAASb,EAAkBc,WAC3BhQ,KAAAA,SAAW,IAAI/B,IACfrD,KAAAA,UAAY,IAAI6B,IAKhBjG,KAAAA,KAAO,KAAKnB,MAWZM,KAAAA,KAAO,SAAUtJ,EAAO8G,GACvB,IAAA,EAAQ9G,EAAAA,SAAAA,GAGHkT,OAFPA,EAAM0Q,MAAM5jB,GAELkT,EAAMzS,MAGX6C,IAAAA,GAAS,EAAa,EAAA,eAAA,EAActD,EAAAA,eAAAA,EAAO8G,IAE3CoM,GAAAA,EAAMwQ,SAAWb,EAAkBgB,QAM9B3Q,OAJF/T,EAAL,gBACO,EAAA,EAAA,OAAA,EAAO,UAAamE,EAAO4C,KAAO,kCAAsCgN,EAAMjL,QAAQL,GAAK,yFAA4Fkc,KAAKC,UAAUzgB,EAAOG,OAG7MyP,EAAMzS,MAGXyS,GAAAA,EAAMwQ,SAAWb,EAAkBmB,UAAY9Q,EAAM9K,QAAQ+Y,YACzD,MAAA,IAAIjhB,MAAM,UAAaoD,EAAO4C,KAAO,wCAA4CgN,EAAMjL,QAAQL,GAAK,kHAAqHkc,KAAKC,UAAUzgB,EAAOG,OAYhPyP,OATPA,EAAMgQ,UAAUxB,SAAS,WAEvBxO,EAAM+Q,QAAQ3gB,GAEVsa,IAAAA,EAAY1K,EAAM0K,UAAUta,GAEhC4P,EAAMtI,OAAOgT,EAAWta,KAGnB4P,EAAMgR,QAIVC,KAAAA,OAAS,SAAUnkB,EAAOgM,GACzBoY,IAAAA,EAAWlR,EAAM1C,SAAWxE,IAAOjD,EAAe8D,eAAAA,QAAUqG,EAAM1C,OAAO5I,KAAOoE,GAChFzE,EAAS6c,EAAWlR,EAAM1C,QAAS,EAAQxE,EAAAA,SAAAA,GAAMA,EAAKkH,EAAMS,SAASrF,IAAItC,IAAOiW,EAAS3T,SAAAA,IAAItC,GAE7F,GAACzE,EAaD,YAAaA,EAEfA,EAAO+B,MAAK,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAItJ,GAAQ,CACxCkG,KAAMlG,EAAMkG,OAASwI,EAAf,MAAyB,IAAK,EAAMwE,EAAAA,OAAAA,EAAMtL,IAAM5H,EAAMkG,KAC5DgH,OAAQgG,EAAMmR,aAIhB9c,EAAO+B,KAAKtJ,EAAMyD,UArBhB,CACE,IAAC2gB,EACG,MAAA,IAAIlkB,MAAM,kCAAoC8L,EAAK,mBAAqBkH,EAAMtL,GAAK,MAItFzI,EAAL,gBACO,EAAA,EAAA,OAAA,EAAO,YAAc+T,EAAMtL,GAAK,yCAA2C5H,EAAMC,QAkBxFqkB,IAAAA,GAAkB,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIrB,EAAY/B,gBAAiB9Y,GAErEmc,EAAQD,EAAgBC,MACxBC,EAASF,EAAgBE,OACzBhU,EAAS8T,EAAgB9T,OACzB5I,EAAK0c,EAAgB1c,GACrB6c,OAAoBvhB,IAAP0E,EAAmBA,EAAKK,EAAQL,GAC5CA,KAAAA,GAAK6c,EACLD,KAAAA,OAASA,EACTD,KAAAA,MAAQA,EACR/T,KAAAA,OAASA,EACTpI,KAAAA,QAAUkc,EACVpB,KAAAA,UAAY,IAAI9B,EAAJ,UAAc,CAC7BD,YAAa,KAAK/Y,QAAQ+Y,cAEvBkD,KAAAA,UAAYpC,EAASC,SAAAA,SAilCrBe,OA9kCPnmB,OAAO2O,eAAewX,EAAY1lB,UAAW,eAAgB,CAC3D+Q,IAAK,WACC4E,IAAAA,EAAQ,KAER,OAAA,KAAKwR,cACA,KAAKA,eAGP,EAAQ,EAAA,SAAA,KAAM,WAEZxR,OADPA,EAAMwR,cAAgBxR,EAAMjL,QAAQoN,aAC7BnC,EAAMwR,iBAGjBhZ,YAAY,EACZC,cAAc,IAEhB7O,OAAO2O,eAAewX,EAAY1lB,UAAW,QAAS,CACpD+Q,IAAK,WAKI,OAJFnP,EAAL,gBACO,EAAA,EAAA,MAAA,KAAKukB,SAAWb,EAAkBc,WAAY,uDAAyD,KAAK/b,GAAK,8CAGjH,KAAKsc,QAEdxY,YAAY,EACZC,cAAc,IAShBsX,EAAY1lB,UAAUonB,QAAU,SAAUlkB,EAAOmkB,GAC3CvjB,IAAAA,EAAKC,EAEL,IACG,IAAA,IAAIC,GAAK,EAASd,EAAAA,UAAAA,EAAMsO,SAAUvN,EAAKD,EAAGlD,QAASmD,EAAGjD,KAAMiD,EAAKD,EAAGlD,OAAQ,CAC3EqH,IAAAA,EAASlE,EAAGlD,MACXkN,KAAAA,KAAK9F,EAAQjF,EAAOmkB,IAE3B,MAAOljB,GACPL,EAAM,CACJzC,MAAO8C,GAED,QACJ,IACEF,IAAOA,EAAGjD,OAAS+C,EAAKC,EAAGI,SAASL,EAAG7D,KAAK8D,GACxC,QACJF,GAAAA,EAAK,MAAMA,EAAIzC,SAKzBqkB,EAAY1lB,UAAUqN,OAAS,SAAUnK,EAAO6C,GAC1CvB,IAAAA,EAAKT,EAAIe,EAAKd,EAAIyO,EAAKxO,EAAI+B,EAAK0M,EAEhCiD,EAAQ,KAqBRzS,GAlBJA,EAAM4S,WAAa,KAAKgR,UAEnBH,KAAAA,OAASzjB,EAEV,KAAK2H,QAAQuc,SACVA,KAAAA,QAAQ,KAAKlkB,OAIfkT,KAAAA,SAAS1C,QAAQ,SAAUD,GAC9BkC,EAAMzS,MAAMkT,SAAS3C,EAAMpJ,IAAMoJ,IAG/B,KAAK4R,UACFA,KAAAA,SAAStZ,KAAKhG,EAAOG,KAAMhD,GAI9BA,EAAMT,MACJ,IACG,IAAA,IAAI8Q,GAAK,EAAS,EAAA,UAAA,KAAK0S,gBAAiBzS,EAAKD,EAAGzS,QAAS0S,EAAGxS,KAAMwS,EAAKD,EAAGzS,OAAQ,EACjFwmB,EAAW9T,EAAGzS,OACTmC,EAAMT,QAEjB,MAAOkC,GACPH,EAAM,CACJnD,MAAOsD,GAED,QACJ,IACE6O,IAAOA,EAAGxS,OAAS+C,EAAKwP,EAAGnP,SAASL,EAAG7D,KAAKqT,GACxC,QACJ/O,GAAAA,EAAK,MAAMA,EAAInD,OAKrB,IACG,IAAA,IAAIkmB,GAAK,EAAS,EAAA,UAAA,KAAK1B,WAAY2B,EAAKD,EAAGzmB,QAAS0mB,EAAGxmB,KAAMwmB,EAAKD,EAAGzmB,OAAQ,EAC5EwmB,EAAWE,EAAGzmB,OACTmC,EAAOA,EAAMT,QAExB,MAAOyC,GACPJ,EAAM,CACJzD,MAAO6D,GAED,QACJ,IACEsiB,IAAOA,EAAGxmB,OAASgD,EAAKujB,EAAGnjB,SAASJ,EAAG9D,KAAKqnB,GACxC,QACJziB,GAAAA,EAAK,MAAMA,EAAIzD,OAInB,IACG,IAAA,IAAIomB,GAAK,EAAS,EAAA,UAAA,KAAK3B,kBAAmB4B,EAAKD,EAAG3mB,QAAS4mB,EAAG1mB,KAAM0mB,EAAKD,EAAG3mB,OAAQ,EAEvF6mB,EADsBD,EAAG3mB,OACT,KAAKmC,MAAM4C,QAAS,KAAK5C,MAAM8S,QAAU,KAAK9S,MAAM8S,QAAQlQ,aAAUH,IAExF,MAAOoO,GACPtB,EAAM,CACJpR,MAAO0S,GAED,QACJ,IACE2T,IAAOA,EAAG1mB,OAASiD,EAAKwjB,EAAGrjB,SAASH,EAAG/D,KAAKunB,GACxC,QACJhV,GAAAA,EAAK,MAAMA,EAAIpR,OAInB+e,IAAAA,GAAS,EAAeld,EAAAA,gBAAAA,EAAM4P,eAAiB,GAAI,KAAKpI,SAExD,GAAA,KAAKxH,MAAM4P,eAAiBsN,EAAQ,CAElCwH,IAAAA,EAAsB1kB,EAAM4P,cAAchB,KAAK,SAAU6B,GACpDA,MAAY,UAAZA,EAAGjR,MAAoBiR,EAAGV,SAAW0C,EAAMjL,UAEhDiQ,EAAWiN,GAAuBA,EAAoBjN,UAAW,EAAWiN,EAAAA,YAAAA,EAAoBjN,SAAUzX,EAAM4C,QAASC,QAAUJ,EAEnI,IACG,IAAA,IAAIkiB,GAAK,EAAS,EAAA,UAAA,KAAK7B,eAAgB8B,EAAKD,EAAG/mB,QAASgnB,EAAG9mB,KAAM8mB,EAAKD,EAAG/mB,OAAQ,EAChFwmB,EAAWQ,EAAG/mB,QACT,EAAW,EAAA,YAAA,KAAKsJ,GAAIsQ,KAE/B,MAAOvU,GACPJ,EAAM,CACJ3E,MAAO+E,GAED,QACJ,IACE0hB,IAAOA,EAAG9mB,OAAS0R,EAAKmV,EAAGzjB,SAASsO,EAAGxS,KAAK2nB,GACxC,QACJ7hB,GAAAA,EAAK,MAAMA,EAAI3E,OAIlBsK,KAAAA,SAWT+Z,EAAY1lB,UAAU+nB,aAAe,SAAUT,GAOtC,OANFzB,KAAAA,UAAU1S,IAAImU,GAEf,KAAKnB,SAAWb,EAAkBmB,SACpCa,EAAS,KAAKpkB,MAAO,KAAKA,MAAMT,OAG3B,MAGTijB,EAAY1lB,UAAU6I,UAAY,SAAUmf,EAAwBvY,EACpEwY,GACMtS,IAUA2R,EAVA3R,EAAQ,KAER,IAACqS,EACI,MAAA,CACL9Q,YAAa,cAObgR,IAAAA,EAA2BD,EAmBxB,MAjB+B,mBAA3BD,EACTV,EAAWU,GAEXV,EAAWU,EAAuBlnB,KAAKoV,KAAK8R,GAC5CE,EAA2BF,EAAuBG,SAASjS,KAAK8R,IAG7DnC,KAAAA,UAAU1S,IAAImU,GAEf,KAAKnB,SAAWb,EAAkBmB,SACpCa,EAAS,KAAKpkB,OAGZglB,GACG/P,KAAAA,OAAO+P,GAGP,CACLhR,YAAa,WACXoQ,GAAY3R,EAAMkQ,UAAUd,OAAOuC,GACnCY,GAA4BvS,EAAMqQ,cAAcjB,OAAOmD,MAU7DxC,EAAY1lB,UAAUooB,QAAU,SAAUd,GAEjC,OADFrB,KAAAA,eAAe9S,IAAImU,GACjB,MAQT5B,EAAY1lB,UAAUqoB,OAAS,SAAUf,GAEhC,OADFpB,KAAAA,cAAc/S,IAAImU,GAChB,MAQT5B,EAAY1lB,UAAUsoB,SAAW,SAAUhB,GAElC,OADFxB,KAAAA,iBAAiB3S,IAAImU,GACnB,MAQT5B,EAAY1lB,UAAUuoB,OAAS,SAAUjB,GAEhC,OADFvB,KAAAA,cAAc5S,IAAImU,GAChB,MAQT5B,EAAY1lB,UAAUmY,OAAS,SAAUmP,GAEhC,OADFtB,KAAAA,cAAc7S,IAAImU,GAChB,MAQT5B,EAAY1lB,UAAUwoB,IAAM,SAAUlB,GAO7B,OANFzB,KAAAA,UAAUd,OAAOuC,GACjBrB,KAAAA,eAAelB,OAAOuC,GACtBpB,KAAAA,cAAcnB,OAAOuC,GACrBvB,KAAAA,cAAchB,OAAOuC,GACrBtB,KAAAA,cAAcjB,OAAOuC,GACrBxB,KAAAA,iBAAiBf,OAAOuC,GACtB,MAQT5B,EAAY1lB,UAAUyL,MAAQ,SAAUqM,GAClCnC,IAAAA,EAAQ,KAER,GAAA,KAAKwQ,SAAWb,EAAkBmB,QAE7B,OAAA,KAGA7B,EAAAA,SAAAA,SAAS,KAAKkC,UAAW,MAC7B9C,KAAAA,aAAc,EACdmC,KAAAA,OAASb,EAAkBmB,QAC5BgC,IAAAA,OAAiC9iB,IAAjBmS,EAA6B,KAAKA,cAAe,EAAQ,EAAA,SAAA,KAAM,WAC1E,OAAA,EAAQA,EAAAA,SAAAA,GAAgBnC,EAAMjL,QAAQ6R,aAAazE,GAAgBnC,EAAMjL,QAAQ6R,aAAa9G,EAAMY,MAAAA,KAAKyB,EAAcnC,EAAMjL,QAAQ5E,YAUvI,OAPH,KAAK+E,QAAQwa,UACVqD,KAAAA,YAGF/C,KAAAA,UAAU1B,WAAW,WACxBtO,EAAMtI,OAAOob,EAAe9a,EAA5B,aAEK,MAST+X,EAAY1lB,UAAU2L,KAAO,WACvB9E,IAAAA,EAAK9C,EAAIiE,EAAKhE,EAAIie,EAAKhe,EAAIye,EAAKhQ,EAAIiW,EAAMpV,EAE1CoC,EAAQ,KAER,IACG,IAAA,IAAInC,GAAK,EAAS,EAAA,UAAA,KAAKqS,WAAY0B,EAAK/T,EAAG1S,QAASymB,EAAGvmB,KAAMumB,EAAK/T,EAAG1S,OAAQ,CAC5EwmB,IAAAA,EAAWC,EAAGxmB,MACb8kB,KAAAA,UAAUd,OAAOuC,IAExB,MAAOpgB,GACPL,EAAM,CACJxF,MAAO6F,GAED,QACJ,IACEqgB,IAAOA,EAAGvmB,OAAS+C,EAAKyP,EAAGpP,SAASL,EAAG7D,KAAKsT,GACxC,QACJ3M,GAAAA,EAAK,MAAMA,EAAIxF,OAInB,IACG,IAAA,IAAImmB,GAAK,EAAS,EAAA,UAAA,KAAKzB,eAAgB0B,EAAKD,EAAG1mB,QAAS2mB,EAAGzmB,KAAMymB,EAAKD,EAAG1mB,OAAQ,EAChFwmB,EAAWG,EAAG1mB,SAGbglB,KAAAA,cAAchB,OAAOuC,IAE5B,MAAOhf,GACPN,EAAM,CACJ3G,MAAOiH,GAED,QACJ,IACEmf,IAAOA,EAAGzmB,OAASgD,EAAKwjB,EAAGpjB,SAASJ,EAAG9D,KAAKsnB,GACxC,QACJxf,GAAAA,EAAK,MAAMA,EAAI3G,OAInB,IACG,IAAA,IAAIqmB,GAAK,EAAS,EAAA,UAAA,KAAK5B,kBAAmB+B,EAAKH,EAAG5mB,QAAS+mB,EAAG7mB,KAAM6mB,EAAKH,EAAG5mB,OAAQ,CACnFwmB,EAAWO,EAAG9mB,MACb+kB,KAAAA,iBAAiBf,OAAOuC,IAE/B,MAAOnF,GACPF,EAAM,CACJ5gB,MAAO8gB,GAED,QACJ,IACE0F,IAAOA,EAAG7mB,OAASiD,EAAKyjB,EAAGtjB,SAASH,EAAG/D,KAAKwnB,GACxC,QACJzF,GAAAA,EAAK,MAAMA,EAAI5gB,OAInB,IACG,IAAA,IAAIymB,GAAK,EAAS,EAAA,UAAA,KAAK9B,eAAgB4C,EAAKd,EAAGhnB,QAAS8nB,EAAG5nB,KAAM4nB,EAAKd,EAAGhnB,OAAQ,CAChFwmB,EAAWsB,EAAG7nB,MACbilB,KAAAA,cAAcjB,OAAOuC,IAE5B,MAAOhE,GACPZ,EAAM,CACJrhB,MAAOiiB,GAED,QACJ,IACEsF,IAAOA,EAAG5nB,OAAS0R,EAAKoV,EAAG1jB,SAASsO,EAAGxS,KAAK4nB,GACxC,QACJpF,GAAAA,EAAK,MAAMA,EAAIrhB,OAIlB6B,KAAAA,MAAM4P,cAAcY,QAAQ,SAAUvB,GACrC0W,IAAAA,EAAM9kB,EAEN,IACG,IAAA,IAAIC,GAAK,EAASmO,EAAAA,UAAAA,EAAU4I,WAAWL,MAAOzW,EAAKD,EAAGlD,QAASmD,EAAGjD,KAAMiD,EAAKD,EAAGlD,OAAQ,CACvFqH,IAAAA,EAASlE,EAAGlD,MAEhB4U,EAAM1H,KAAK9F,EAAQwN,EAAMzS,QAE3B,MAAO4lB,GACPD,EAAO,CACLxnB,MAAOynB,GAED,QACJ,IACE7kB,IAAOA,EAAGjD,OAAS+C,EAAKC,EAAGI,SAASL,EAAG7D,KAAK8D,GACxC,QACJ6kB,GAAAA,EAAM,MAAMA,EAAKxnB,UAKtB+U,KAAAA,SAAS1C,QAAQ,SAAUD,IAC1B,EAAWA,EAAAA,YAAAA,EAAM9H,OACnB8H,EAAM9H,SAIN,IAEG,IAAA,IAAIod,GAAK,EAAS,EAAA,WAAA,EAAK,EAAA,MAAA,KAAKnD,mBAAoBoD,EAAKD,EAAGjoB,QAASkoB,EAAGhoB,KAAMgoB,EAAKD,EAAGjoB,OAAQ,CACzFyB,IAAAA,EAAMymB,EAAGjoB,MACRimB,KAAAA,MAAMiC,aAAa,KAAKrD,iBAAiBrjB,KAEhD,MAAO2mB,GACPP,EAAO,CACLtnB,MAAO6nB,GAED,QACJ,IACEF,IAAOA,EAAGhoB,OAASuS,EAAKwV,EAAG3kB,SAASmP,EAAGrT,KAAK6oB,GACxC,QACJJ,GAAAA,EAAM,MAAMA,EAAKtnB,OAQlB,OAJFskB,KAAAA,UAAUpB,QACVP,KAAAA,aAAc,EACdmC,KAAAA,OAASb,EAAkBgB,QACvBxB,EAAAA,SAAAA,KAAK,KAAKgC,WACZ,MAGTpB,EAAY1lB,UAAUqmB,MAAQ,SAAUxQ,GAClCF,IAAAA,EAAQ,KAER,GAAA,KAAKwQ,SAAWb,EAAkBc,YAAc,KAAKvb,QAAQ+Y,YAE1DhiB,EAAL,gBACO,EAAA,EAAA,OAAA,EAAOiU,EAAO/V,OAAS,iDAAoD,KAAK4K,QAAQL,GAAK,8EAAiFkc,KAAKC,UAAU/jB,aAE/L,GAAI,KAAK0jB,SAAWb,EAAkBmB,QACrC,MAAA,IAAI9jB,MACVkT,EAAO/V,OAAS,iDAAoD,KAAK4K,QAAQL,GAAK,0GAGnFsb,KAAAA,UAAUxB,SAAS,WAClBgF,IAAAA,EAAMplB,EAENsc,EAAY1K,EAAMzS,MAClBkmB,GAAe,EACfC,EAAiB,GAEjBC,EAAU,SAAUpH,GAClBnc,IAAAA,GAAS,EAAamc,EAAAA,cAAAA,GAE1BvM,EAAM+Q,QAAQ3gB,GAEdsa,GAAY,EAAQ1K,EAAAA,SAAAA,EAAO,WAClBA,OAAAA,EAAMjL,QAAQsO,WAAWqH,EAAWta,KAE7CsjB,EAAejoB,KAAKjB,MAAMkpB,GAAgB,EAAShJ,EAAAA,UAAAA,EAAU7O,QAAQnM,IAAI,SAAU6P,GAC1E,OAAA,EAAkBA,EAAAA,mBAAAA,EAAGmL,OAE9B+I,EAAeA,KAAkB/I,EAAUE,SAGzC,IACG,IAAA,IAAIgJ,GAAW,EAAS1T,EAAAA,UAAAA,GAAS2T,EAAaD,EAASzoB,QAAS0oB,EAAWxoB,KAAMwoB,EAAaD,EAASzoB,OAAQ,CAGlHwoB,EAFcE,EAAWzoB,QAI3B,MAAO0oB,GACPN,EAAO,CACL9nB,MAAOooB,GAED,QACJ,IACED,IAAeA,EAAWxoB,OAAS+C,EAAKwlB,EAASnlB,SAASL,EAAG7D,KAAKqpB,GAC9D,QACJJ,GAAAA,EAAM,MAAMA,EAAK9nB,OAIzBgf,EAAUE,QAAU6I,EACpB/I,EAAU7O,QAAU6X,EAEpB1T,EAAMtI,OAAOgT,GAAW,EAAaxK,EAAAA,cAAAA,EAAOA,EAAO/V,OAAS,QAUhE4lB,EAAY1lB,UAAU0pB,OAAS,SAAUjnB,GAChC,OAAA,KAAKsJ,KAAKmK,KAAK,KAAMzT,IAW9BijB,EAAY1lB,UAAUqgB,UAAY,SAAU5d,GACtCkT,IAAAA,EAAQ,KAER5P,GAAS,EAAatD,EAAAA,cAAAA,GAEtBsD,GAAuC,IAAvCA,EAAO4C,KAAKrI,QAAQ4M,EAApB,iBAA6C,KAAKhK,MAAM4R,WAAWF,KAAK,SAAU+U,GAC7EA,OAAqC,IAArCA,EAAUrpB,QAAQ4M,EAAlB,iBAEDnH,MAAAA,EAAOG,KAAKA,KAMbma,OAHS,EAAQ,EAAA,SAAA,KAAM,WACrB1K,OAAAA,EAAMjL,QAAQsO,WAAWrD,EAAMzS,MAAO6C,MAKjD2f,EAAY1lB,UAAU0mB,QAAU,SAAUjkB,GACpCmnB,IAAAA,EAAM7lB,EAEN,IACG,IAAA,IAAIC,GAAK,EAAS,EAAA,UAAA,KAAKgN,WAAY/M,EAAKD,EAAGlD,QAASmD,EAAGjD,KAAMiD,EAAKD,EAAGlD,OAAQ,CAC5EuJ,IAAAA,EAAKpG,EAAGlD,MACR0S,EAAQ,KAAK2C,SAASrF,IAAI1G,GAE1B,IAACoJ,EACG,MAAA,IAAI9Q,MAAM,4BAA8BF,EAAQ,uBAAyB,KAAK4H,GAAK,2BAA6BA,EAAK,MAG7HoJ,EAAM1H,KAAKtJ,IAEb,MAAOonB,GACPD,EAAO,CACLvoB,MAAOwoB,GAED,QACJ,IACE5lB,IAAOA,EAAGjD,OAAS+C,EAAKC,EAAGI,SAASL,EAAG7D,KAAK8D,GACxC,QACJ4lB,GAAAA,EAAM,MAAMA,EAAKvoB,SAK3BqkB,EAAY1lB,UAAU8pB,MAAQ,SAAUpY,GAClCiE,IAAAA,EAAQ,KAEPiQ,KAAAA,iBAAiBlU,EAAWrH,IAAM,KAAK2c,MAAM+C,WAAW,WACvDrY,EAAWjD,GACbkH,EAAMiR,OAAOlV,EAAW3L,OAAQ2L,EAAWjD,IAE3CkH,EAAM5J,KAAK2F,EAAW3L,SAEvB2L,EAAW7C,QAGhB6W,EAAY1lB,UAAUiM,OAAS,SAAUgE,GAClC+W,KAAAA,MAAMiC,aAAa,KAAKrD,iBAAiB3V,WACvC,KAAK2V,iBAAiB3V,IAG/ByV,EAAY1lB,UAAUiO,KAAO,SAAU9F,EAAQjF,EAAO4K,QAC1B,IAAtBA,IACFA,EAAoB,KAAKpD,QAAQG,QAAQ2G,SAGvC1L,IAAAA,EAAU5C,EAAM4C,QAChBC,EAAS7C,EAAM6C,OACfikB,EAAe7hB,EAAO8F,OAAQ,EAAkB9F,EAAAA,mBAAAA,EAAOzF,KAAMoL,GAC7DG,GAAO,EAAW+b,EAAAA,YAAAA,GAAgBA,EAAeA,EAAeA,EAAa/b,KAAO9F,EAAO8F,KAE3FA,GAAAA,EACE,IACKA,OAAAA,EAAKnI,EAASC,EAAOG,KAAM,CAChCiC,OAAQA,EACRjF,MAAO,KAAKA,MACZ6C,OAAQA,IAEV,MAAO+X,GAQDA,MAPF,KAAK7K,QACFA,KAAAA,OAAOlH,KAAK,CACfrJ,KAAM,eACNwD,KAAM4X,IAIJA,EAIF3V,OAAAA,EAAOzF,MACRqJ,KAAAA,EAAL,KACM2F,IAAAA,EAAavJ,EAEb,GAA4B,iBAArBuJ,EAAW7C,MAEpB,YADKib,KAAAA,MAAMpY,GAGPA,EAAWjD,GACRmY,KAAAA,OAAOlV,EAAW3L,OAAQ2L,EAAWjD,IAErC1C,KAAAA,KAAK2F,EAAW3L,QAIzB,MAEGkG,KAAAA,EAAL,OACOA,KAAAA,OAAO9D,EAAO8H,QACnB,MAEGxE,KAAAA,EAAL,MAEQ0E,IAAAA,EAAWhI,EAAOgI,SAIlB,IAAC,KAAKjN,MAAM0S,WAAWzF,EAAS9F,IAAM8F,EAASzN,MACjD,MAIEyN,GAAAA,EAASzN,OAAS6I,EAAYwB,YAAAA,OAAQ,CACpC6N,IAAAA,GAAe,EAAezK,EAAAA,gBAAAA,EAASjF,KACvCoM,EAAiB,KAAK5M,QAAQG,QAAQ0M,SAAW,KAAK7M,QAAQG,QAAQ0M,SAASqD,EAAalY,WAAQiD,EACpG0E,EAAK8F,EAAS9F,GACdnE,EAAOiK,EAASjK,KAEftE,EAAL,gBACO,EAAA,EAAA,QAAE,YAAauO,GAC2CA,6DAAAA,EAASjF,IAAM,oBAAsB,KAAKR,QAAQL,GAAK,yCAGpHob,IAAAA,EAAc,gBAAiBtV,EAAWA,EAASsV,cAAgBtV,EAASuW,QAE5E,IAACpP,EAMH,YAJK1V,EAAL,gBACO,EAAA,EAAA,OAAA,EAAO,oCAAsCuO,EAASjF,IAAM,iBAAmB,KAAKR,QAAQL,GAAK,OAMtGmN,IAAAA,EAAetR,GAAO,EAAWA,EAAAA,YAAAA,EAAMJ,EAASC,QAAUJ,EAC1DyX,GAAS,EAAW9F,EAAAA,YAAAA,GAAkBA,EAAexR,EAASC,EAAOG,KAAM,CAC7EA,KAAMsR,EACNtM,IAAK0P,IACFtD,GAED,EAAc8F,EAAAA,eAAAA,GACX6M,KAAAA,aAAaxjB,QAAQ+V,QAAQY,GAAS/S,IAClC,EAAW+S,EAAAA,YAAAA,GACf8M,KAAAA,cAAc9M,EAAQ/S,IAClB,EAAa+S,EAAAA,cAAAA,GACjB+M,KAAAA,gBAAgB/M,EAAQ/S,IACpB,EAAU+S,EAAAA,WAAAA,IAEdgN,KAAAA,aAAa5S,EAAe4F,EAAOvF,YAAYL,GAAgB4F,EAAQ,CAC1E/S,GAAIA,EACJob,YAAaA,SAIZ4E,KAAAA,cAAcla,GAGrB,MAGCxE,KAAAA,EAAL,KAES2e,KAAAA,UAAUniB,EAAOgI,SAAS9F,IAC/B,MAGCqC,KAAAA,EAAL,IACMoD,IAAAA,EAAQ3H,EAAO2H,MACf/O,EAAQoH,EAAOpH,MAEf+O,EACGmX,KAAAA,OAAOnX,EAAO/O,GAEdkmB,KAAAA,OAAOlmB,GAGd,MAEF,QACOa,EAAL,gBACO,EAAA,EAAA,OAAA,EAAO,4CAA8CuG,EAAOzF,KAAO,OAShFgjB,EAAY1lB,UAAUuqB,YAAc,SAAUC,GACvCpU,KAAAA,SAAS2O,OAAOyF,GAChBxZ,KAAAA,UAAU+T,OAAOyF,UACf,KAAKtnB,MAAMkT,SAASoU,IAG7B9E,EAAY1lB,UAAUsqB,UAAY,SAAUE,GACtC/W,IAAAA,EAAQ,KAAK2C,SAASrF,IAAIyZ,GAEzB/W,IAIA8W,KAAAA,YAAYC,IAEb,EAAW/W,EAAAA,YAAAA,EAAM9H,OACnB8H,EAAM9H,SAIV+Z,EAAY1lB,UAAUyqB,MAAQ,SAAU9S,EAAQhP,EAAMkC,GAChD,IAAA,EAAc8M,EAAAA,eAAAA,GACT,OAAA,KAAKsS,aAAaxjB,QAAQ+V,QAAQ7E,GAAShP,GAC7C,IAAI,EAAWgP,EAAAA,YAAAA,GACb,OAAA,KAAKuS,cAAcvS,EAAQhP,GAC7B,IAAI,EAAQgP,EAAAA,SAAAA,GACV,OAAA,KAAK+S,WAAW/S,GAClB,IAAI,EAAaA,EAAAA,cAAAA,GACf,OAAA,KAAKwS,gBAAgBxS,EAAQhP,GAC/B,IAAI,EAAUgP,EAAAA,WAAAA,GACZ,OAAA,KAAKyS,aAAazS,GAAQ,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAI9M,GAAU,CAC/DR,GAAI1B,KAGA,MAAA,IAAIhG,MAAM,2BAA8BgG,EAAO,qBAAyBgP,EAAS,OAI3F+N,EAAY1lB,UAAUoqB,aAAe,SAAU1f,EAASG,GAClD8K,IAAAA,EAAQ,UAEI,IAAZ9K,IACFA,EAAU,IAGR8f,IAAAA,EAAe,IAAIjF,EAAYhb,GAAS,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAI,KAAKG,SAAU,CAC/EoI,OAAQ,KACR5I,GAAIQ,EAAQR,IAAMK,EAAQL,MAGxB0c,GAAkB,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIxB,GAAwB1a,GAEhEkc,EAAgBvB,MAClBmF,EAAa5C,aAAa,SAAU7kB,GAClCyS,EAAM5J,KAAKsB,EAAX,OAAmB,CACjBnK,MAAOA,EACPmH,GAAIsgB,EAAatgB,OAKnBwa,IAAAA,EAAQ8F,EAcL9F,OAbFzO,KAAAA,SAAS5B,IAAImW,EAAatgB,GAAIwa,GAE/BkC,EAAgBtB,aACbzU,KAAAA,UAAUmC,IAAIwX,EAAatgB,IAGlCsgB,EAAaxS,OAAO,SAAUyS,GAC5BjV,EAAM4U,YAAYI,EAAatgB,IAE/BsL,EAAM5J,MAAK,EAAa6e,EAAAA,cAAAA,EAAW,CACjCjb,OAAQgb,EAAatgB,QAEtBoB,QACIoZ,GAGTa,EAAY1lB,UAAUiqB,aAAe,SAAUY,EAASxgB,GAClDsL,IAAAA,EAAQ,KAERmV,GAAW,EACfD,EAAQnkB,KAAK,SAAUqkB,GAChBD,IACHnV,EAAM4U,YAAYlgB,GAElBsL,EAAM5J,MAAK,EAAa,EAAA,eAAA,EAAW1B,EAAAA,YAAAA,EAAI0gB,GAAW,CAChDpb,OAAQtF,OAGX,SAAU6G,GACP,IAAC4Z,EAAU,CACbnV,EAAM4U,YAAYlgB,GAEd2gB,IAAAA,GAAa,EAAM3gB,EAAAA,OAAAA,EAAI6G,GAEvB,IAEFyE,EAAM5J,MAAK,EAAaif,EAAAA,cAAAA,EAAY,CAClCrb,OAAQtF,KAEV,MAAOhJ,IAC8B6P,EAAAA,EAAAA,sCAAAA,EAAW7P,EAAOgJ,GAEnDsL,EAAM0P,UACR1P,EAAM0P,SAAStZ,KAAKif,EAAYrV,EAAMzS,OAGpCyS,EAAMjL,QAAQ4P,QAKhB3E,EAAMhK,WAKVkZ,IAAAA,EAAQ,CACVxa,GAAIA,EACJ0B,KAAM,aAGNlD,UAAW,SAAU/H,EAAMmqB,EAAa9C,GAClC+C,IAAAA,GAAe,EAoBZ,OAnBPL,EAAQnkB,KAAK,SAAUqkB,GACjBG,IAIJpqB,GAAQA,EAAKiqB,GAETG,GAIJ/C,GAAYA,MACX,SAAUrK,GACPoN,GAIJD,EAAYnN,KAEP,CACL5G,YAAa,WACJgU,OAAAA,GAAe,KAI5Bvf,KAAM,WACJmf,GAAW,GAEbrU,OAAQ,WACC,MAAA,CACLpM,GAAIA,KAKHwa,OADFzO,KAAAA,SAAS5B,IAAInK,EAAIwa,GACfA,GAGTa,EAAY1lB,UAAUkqB,cAAgB,SAAUhG,EAAU7Z,GACpDsL,IAkBAwV,EAlBAxV,EAAQ,KAERmV,GAAW,EACXM,EAAY,IAAIvY,IAChBgT,EAAY,IAAIhT,IAgBhB,IACFsY,EAAejH,EAfH,SAAU7jB,GACtBwlB,EAAUnS,QAAQ,SAAU4T,GACnBA,OAAAA,EAASjnB,KAGdyqB,GAIJnV,EAAM5J,KAAK1L,IAMsB,SAAUgrB,GACzCD,EAAUjY,IAAIkY,KAEhB,MAAOvN,GACF/R,KAAAA,MAAK,EAAM1B,EAAAA,OAAAA,EAAIyT,IAGlB,IAAA,EAAcqN,EAAAA,eAAAA,GAGT,OAAA,KAAKlB,aAAakB,EAAc9gB,GAGrCwa,IAAAA,EAAQ,CACVxa,GAAIA,EACJ0B,KAAM,SAAUtJ,GACP2oB,OAAAA,EAAU1X,QAAQ,SAAU4X,GAC1BA,OAAAA,EAAS7oB,MAGpBoG,UAAW,SAAU/H,GAEZ,OADP+kB,EAAU1S,IAAIrS,GACP,CACLoW,YAAa,WACX2O,EAAUd,OAAOjkB,MAIvB6K,KAAM,WACJmf,GAAW,GAEP,EAAWK,EAAAA,YAAAA,IACbA,KAGJ1U,OAAQ,WACC,MAAA,CACLpM,GAAIA,KAKHwa,OADFzO,KAAAA,SAAS5B,IAAInK,EAAIwa,GACfA,GAGTa,EAAY1lB,UAAUmqB,gBAAkB,SAAU/M,EAAQ/S,GACpDsL,IAAAA,EAAQ,KAER4V,EAAenO,EAAOvU,UAAU,SAAU9H,GAC5C4U,EAAM5J,MAAK,EAAahL,EAAAA,cAAAA,EAAO,CAC7B4O,OAAQtF,MAET,SAAUyT,GACXnI,EAAM4U,YAAYlgB,GAElBsL,EAAM5J,MAAK,EAAa,EAAA,eAAA,EAAM1B,EAAAA,OAAAA,EAAIyT,GAAM,CACtCnO,OAAQtF,MAET,WACDsL,EAAM4U,YAAYlgB,GAElBsL,EAAM5J,MAAK,EAAa,EAAA,eAAA,EAAW1B,EAAAA,YAAAA,GAAK,CACtCsF,OAAQtF,OAGRwa,EAAQ,CACVxa,GAAIA,EACJ0B,KAAM,aAGNlD,UAAW,SAAU/H,EAAMmqB,EAAa9C,GAC/B/K,OAAAA,EAAOvU,UAAU/H,EAAMmqB,EAAa9C,IAE7Cxc,KAAM,WACG4f,OAAAA,EAAarU,eAEtBT,OAAQ,WACC,MAAA,CACLpM,GAAIA,KAKHwa,OADFzO,KAAAA,SAAS5B,IAAInK,EAAIwa,GACfA,GAGTa,EAAY1lB,UAAU0qB,WAAa,SAAU7F,GAEpCA,OADFzO,KAAAA,SAAS5B,IAAIqQ,EAAMxa,GAAIwa,GACrBA,GAGTa,EAAY1lB,UAAUqqB,cAAgB,SAAUla,GAC1Cqb,IAAAA,EAAiB,KAAK9gB,QAAQG,SAAW,KAAKH,QAAQG,QAAQ+K,WAAa,KAAKlL,QAAQG,QAAQ+K,WAAWzF,EAASzN,WAAQiD,EAE5H,GAAC6lB,EAAD,CAUAC,IAAAA,EAAUD,EAAe,KAAKtoB,MAAM4C,QAASqK,GAC5Cub,KAAAA,YAAYvb,EAAS9F,GAAIohB,QAVvB7pB,EAAL,gBACO,EAAA,EAAA,OAAA,EAAO,yCAA2CuO,EAASzN,KAAO,MAY7EgjB,EAAY1lB,UAAU0rB,YAAc,SAAUrhB,EAAIohB,GAC3CrV,KAAAA,SAAS5B,IAAInK,EAAI,CACpBA,GAAIA,EACJ0B,KAAM,aAGNlD,UAAW,WACF,MAAA,CACLqO,YAAa,eAKjBvL,KAAM8f,QAAW9lB,EACjB8Q,OAAQ,WACC,MAAA,CACLpM,GAAIA,OAMZqb,EAAY1lB,UAAU0oB,UAAY,WAC5B,GAAA,KAAK7d,QAAQwa,UAA8B,oBAAXH,OAAwB,CACtDA,GAAAA,OAAOyG,6BAA8B,CACnCC,IAAAA,EAAmD,iBAA1B,KAAK/gB,QAAQwa,SAAwB,KAAKxa,QAAQwa,cAAW1f,EACrF0f,KAAAA,SAAWH,OAAOyG,6BAA6BE,SAAQ,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,CAC5EljB,KAAM,KAAK0B,GACXyhB,WAAW,EACXC,eAAgB,SAAU7oB,GACjB,MAAA,CACLnC,MAAOmC,EAAMnC,MACb+E,QAAS5C,EAAM4C,QACf0L,QAAStO,EAAMsO,WAGlBoa,GAAkB,CACnBI,UAAU,EAAS,EAAA,UAAA,CACjBC,MAAM,EACNC,MAAM,GACLN,EAAkBA,EAAgBI,cAAWrmB,KAC9C,KAAK+E,SACJ2a,KAAAA,SAASzY,KAAK,KAAK1J,QAIV,EAAA,EAAA,iBAAA,QAIpBwiB,EAAY1lB,UAAUyW,OAAS,WACtB,MAAA,CACLpM,GAAI,KAAKA,KAIbqb,EAAY1lB,UAAUiJ,EAAtB,kBAA0C,WACjC,OAAA,MAUTyc,EAAY/B,eAA8B,SAAUwI,GAC3C,MAAA,CACL/E,SAAS,EACTxD,aAAa,EACboD,MAAO,CACL+C,WAAY,SAAUjT,EAAIsV,GACjBD,OAAAA,EAAOpC,WAAW7pB,KAAK,KAAM4W,EAAIsV,IAE1CnD,aAAc,SAAU5e,GACf8hB,OAAAA,EAAOlD,aAAa/oB,KAAK,KAAMmK,KAG1C4c,OAAQkF,EAAOpjB,QAAQ2D,IAAIwJ,KAAKnN,SAChCsc,UAAU,GAb4B,CAexB,oBAATgH,KAAuBA,KAAOF,GAEvCzG,EAAY4G,UAAYA,EACjB5G,EA9sCT,GAuvCC,QAAA,YAAA,EAtCD,IAAI6G,EAAsB,SAAUC,GAC9B,OAAA,EAASA,EAAAA,UAAAA,IACJ,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIjH,GAAwB,CACnD5c,KAAM6jB,KAIH,EAAS,EAAA,WAAA,EAAS,EAAA,WAAA,EAAS,EAAA,UAAA,GAAIjH,GAAwB,CAC5D5c,MAAM,EAAA,EAAA,cACJ6jB,IAGN,SAAS/B,EAAM9S,EAAQ6U,GACjBzF,IAAAA,EAAkBwF,EAAoBC,GACnC,OAAA,EAAQ,EAAA,SAAA,SAAU3V,GACnB,IAACjV,EAAL,cAAoB,CACd6qB,IAAAA,GAAe,EAAU9U,EAAAA,WAAAA,KAAW,EAAWA,EAAAA,YAAAA,IAC9C,EAAA,EAAA,QAAEd,GAAW4V,EAAc,uCAAyC,EAAU9U,EAAAA,WAAAA,GAAUA,EAAOtN,GAAK,aAAe,sDAGtHwM,OAAAA,EACKA,EAAQ4T,MAAM9S,EAAQoP,EAAgBpe,KAAMoe,IAE5C,EAAoBpP,EAAAA,qBAAAA,EAAQoP,EAAgBpe,QAYzD,SAAS2jB,EAAU5hB,EAASG,GAEnB6hB,OADW,IAAIhH,EAAYhb,EAASG;;ACnvC5C,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,WAAA,EA/BD,IAAA,EAAA,QAAA,wBACA,EAAA,QAAA,cAEA,SAAS8hB,EAAWzpB,EAAO0pB,EAAUC,GAC/B/oB,IAAAA,EAAKC,EAEL0kB,EAAgBhT,EAAMY,MAAAA,KAAKnT,EAAOA,aAAiBuS,EAAjB,MAAyBvS,EAAM4C,aAAUH,GAE3E,IACG,IAAA,IAAImnB,GAAa,EAASF,EAAAA,UAAAA,GAAWG,EAAeD,EAAWhsB,QAASisB,EAAa/rB,KAAM+rB,EAAeD,EAAWhsB,OAAQ,CAC5HkD,IAAAA,GAAK,EAAO+oB,EAAAA,QAAAA,EAAahsB,MAAO,GAChCoC,EAAaa,EAAG,GAChByQ,EAAWzQ,EAAG,GAEdykB,GAAAA,EAAcxS,QAAQ9S,GACjBsR,OAAAA,EAASgU,IAGpB,MAAOtkB,GACPL,EAAM,CACJzC,MAAO8C,GAED,QACJ,IACE4oB,IAAiBA,EAAa/rB,OAAS+C,EAAK+oB,EAAW1oB,SAASL,EAAG7D,KAAK4sB,GACpE,QACJhpB,GAAAA,EAAK,MAAMA,EAAIzC,OAIhBwrB,OAAAA,EAAapE;;ACpBtB,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,OAAA,eAAA,QAAA,eAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,gBAAA,OAAA,eAAA,QAAA,WAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,YAAA,OAAA,eAAA,QAAA,cAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,eAAA,OAAA,eAAA,QAAA,iBAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,kBAAA,OAAA,eAAA,QAAA,SAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,UAAA,OAAA,eAAA,QAAA,aAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,cAAA,OAAA,eAAA,QAAA,YAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,aAAA,OAAA,eAAA,QAAA,OAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,QAAA,OAAA,eAAA,QAAA,aAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,cAAA,OAAA,eAAA,QAAA,aAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,cAAA,OAAA,eAAA,QAAA,QAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,SAAA,OAAA,eAAA,QAAA,YAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,aAAA,OAAA,eAAA,QAAA,UAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,WAAA,OAAA,eAAA,QAAA,gBAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,iBAAA,OAAA,eAAA,QAAA,cAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,eAAA,OAAA,eAAA,QAAA,oBAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,qBAAA,OAAA,eAAA,QAAA,YAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,aAAA,OAAA,eAAA,QAAA,QAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,SAAA,OAAA,eAAA,QAAA,aAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,cAAA,QAAA,aAAA,EAVA,IAAA,EAAA,QAAA,cACA,EAAA,QAAA,iBACA,EAAA,QAAA,cACA,EAAA,QAAA,gBAEA,EAAA,QAAA,cACA,EAAA,QAAA,kBACA,EAAA,QAAA,gBACA,EAAA,QAAA,oBACA,EAAA,QAAA,cACIjX,EAAU,CACZ3F,MAAOA,EADK,MAEZE,KAAMA,EAFM,KAGZsD,WAAYA,EAHA,WAIZE,WAAYA,EAJA,WAKZ7C,IAAKA,EALO,IAMZT,OAAQA,EANI,OAOZR,MAAOA,EAPK,MAQZE,KAAMA,EARM,KASZnM,OAAQA,EATI,OAUZ8M,MAAOA,EAVK,MAWZtL,KAAMA,EAXM,KAYZwO,QAASA,EAZG,QAaZwB,UAAWA,EAbC,UAcZC,SAAUA,EAdE,SAeZ1D,OAAQA,EAfI,OAgBZE,KAAMA,EAAAA,MAhBR,QAAA,QAAA;;ACkBe/C,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EA5Bf,IAAA,EAAA,QAAA,UAEMA,GAAU,EAAQ,EAAA,SAAA,CAEtBuP,QAAS,aAET5S,OAAQ,CACN2lB,WAAY,CACVxT,GAAI,CAIFyT,MAAO,CACLjjB,OAAQ,cAIdkjB,SAAU,CACR1T,GAAI,CACF2T,OAAQ,cAGZC,UAAW,CACT1qB,KAAM,YAKGgI,EAAAA,EAAAA,QAAAA,QAAAA;;ACTAmM,aAAAA,OAAAA,eAAAA,QAAAA,aAAAA,CAAAA,OAAAA,IAAAA,QAAAA,aAAAA,EAnBf,IAAA,EAAA,QAAA,UAEA,EAAA,EAAA,QAAA,iBAiBeA,SAAAA,EAAAA,GAAAA,OAAAA,GAAAA,EAAAA,WAAAA,EAAAA,CAAAA,QAAAA,GAdf,IAAMA,GAAU,EAAUnM,EAAAA,WAAAA,EAAV,SAAmBqd,aAAa,SAAC7kB,GAC/C6F,QAAQ2D,IAAIxJ,EAAMnC,OAEdmC,EAAM+S,QAAQ,gBAChBoX,SAASC,cAAc,QAAQC,UAAUpa,IAAI,YAC7Cka,SAASC,cAAc,QAAQE,aAAa,YAAY,IAGtDtqB,EAAM+S,QAAQ,cAChBoX,SAASC,cAAc,QAAQC,UAAUE,OAAO,YAChDJ,SAASC,cAAc,QAAQI,gBAAgB,eAIpC7W,EAAAA,EAAAA,QAAAA,QAAAA;;ACQf,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,OAAA,eAAA,QAAA,UAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,WAAA,QAAA,UAAA,QAAA,eAAA,EA3BA,IAAA,EAAA,EAAA,QAAA,eACA,EAAA,EAAA,QAAA,yBA0BA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAxBA,IAAMxS,EAAO6gB,OAAOyI,SAASC,SAE7B,SAASC,EAAwBxpB,GAC3B,GAACA,EAAD,CAEEypB,IAAAA,EAAYzpB,EAAKrB,MAAM,KAGtB+qB,OAFeD,EAAUA,EAAUhuB,OAAS,IAKrD,SAASkuB,EAAmB3pB,GACtB,GAACA,EAAD,CAEEypB,IAAAA,EAAYzpB,EAAKrB,MAAM,KAGtBirB,OAFUH,EAAUA,EAAUhuB,OAAS,GAAGouB,UAAU,EAAG,IAKhE,IAAMC,EACJC,EAAaP,QAAAA,EAAwBxpB,IAAO2pB,EAAmB3pB,IAGjE,QAAA,UAAA,EADA,IAAMgqB,EAAOL,EAAmB3pB,GAC1BiqB,EAAYjB,SAASkB,eAAeF,GAA1C,QAAA,UAAA;;ACcA,aAzCA,IAAA,EAAA,QAAA,eAEMG,EAAU,GAEVC,EAAe,SAACD,EAASL,GACzB,GAACK,GAAYL,EAAb,CAEEO,IACAC,EADSpmB,MAAM8N,KAAKiY,EAAUM,UAAAA,iBAAiB,wBACxBvT,OAAO,SAACwT,GAAUA,OAAAA,EAAMC,UAErDH,MAAAA,GAAAA,EAAejb,QAAQ,SAACmb,GACtBA,EAAM9P,WAAWA,WAAW6P,iBAAiB,SAASlb,QAAQ,SAAC5D,GAC7DA,EAAMyd,UAAUE,OAAO,SACvB3d,EAAMyd,UAAUE,OAAO,WAGzBe,EAAQK,EAAMlmB,QAAUwlB,EAAUU,EAAMlmB,MACpCkmB,EAAM9P,WAAWwO,UAAUpa,IAAI,SAC/B0b,EAAM9P,WAAWwO,UAAUpa,IAAI,aAI5B4b,OAAXT,EAAWS,gBAAAA,IAAAA,EAAAA,WAAAA,EAAAA,UAAAA,iBAAiB,SAAU,SAAC1uB,GACrCA,EAAE2J,OAAO8kB,UAAYN,EAAQnuB,EAAE2J,OAAOrB,MAAQtI,EAAE2J,OAAOjJ,OAG/CgL,EAAAA,QAAAA,KAAK,WAGJgjB,OAAXT,EAAWS,gBAAAA,IAAAA,EAAAA,WAAAA,EAAAA,UAAAA,iBAAiB,SAAU,SAAC1uB,GACrCA,EAAE2uB,iBAEFP,EAAaD,EAASL,EAAV,WAEJpiB,EAAAA,QAAAA,KAAK,UAGLJ,EAAAA,QAAAA,SAIVkL,EAAQpL,QAAAA","file":"handleMultipleChoice.89cea4ba.js","sourceRoot":"../src","sourcesContent":["export default {\n  prova01: {\n    es01: { answer01: \"c\" },\n    es02: {\n      answer01: \"true\",\n      answer02: \"false\",\n      answer03: \"true\",\n      answer04: \"false\",\n      answer05: \"false\",\n      answer06: \"true\",\n      answer07: \"true\",\n      answer08: \"false\",\n      answer09: \"false\",\n      answer10: \"false\",\n      answer11: \"true\",\n      answer12: \"true\",\n    },\n    es03: {\n      answer01: \"ero\",\n      answer02: \"andavo\",\n      answer03: \"siamo andati\",\n      answer04: \"era\",\n      answer05: \"aveva\",\n      answer06: \"aveva\",\n      answer07: \"si è arrabbiato\",\n      answer08: \"correva\",\n      answer09: \"è caduta\",\n      answer10: \"ha preso\",\n      answer11: \"ha dovuto\",\n      answer12: \"avevo\",\n      answer13: \"ho ricevuto\",\n      answer14: \"ero\",\n      answer15: \"volevo\",\n      answer16: \"conoscevo\",\n      answer17: \"avevate\",\n      answer18: \"vi siete sposati\",\n      answer19: \"ho studiato\",\n      answer20: \"ho iniziato\",\n    },\n    es04: {\n      answer01: \"era\",\n      answer02: \"sono arrivati\",\n      answer03: \"erano\",\n      answer04: \"esistevano\",\n      answer05: \"usavano\",\n      answer06: \"scrivevano\",\n      answer07: \"telefonavano\",\n      answer08: \"potevi\",\n      answer09: \"ho aspettato\",\n    },\n    es05: {\n      answer01: \"a\",\n      answer02: \"c\",\n      answer03: \"b\",\n      answer04: \"a\",\n      answer05: \"c\",\n      answer06: \"b\",\n      answer07: \"b\",\n      answer08: \"a\",\n      answer09: \"a\",\n      answer10: \"c\",\n    },\n    es06: {\n      answer01: \"la\",\n      answer02: \"gli\",\n      answer03: \"mi\",\n      answer04: \"ci\",\n      answer05: \"ne\",\n    },\n    es07: {\n      answer01: \"c\",\n      answer02: \"c\",\n      answer03: \"b\",\n      answer04: \"c\",\n      answer05: \"a\",\n      answer06: \"c\",\n      answer07: \"a\",\n      answer08: \"b\",\n    },\n    es08: {\n      answer01: \"false\",\n      answer02: \"true\",\n      answer03: \"false\",\n      answer04: \"true\",\n      answer05: \"false\",\n      answer06: \"true\",\n      answer07: \"false\",\n      answer08: \"true\",\n      answer09: \"false\",\n      answer10: \"true\",\n    },\n    es09: {\n      answer01: \"true\",\n      answer02: \"false\",\n      answer03: \"true\",\n      answer04: \"false\",\n      answer05: \"true\",\n      answer06: \"false\",\n      answer07: \"true\",\n      answer08: \"true\",\n    },\n  },\n  prova02: {\n    es01: { answer01: \"b\" },\n    es02: {\n      answer01: \"false\",\n      answer02: \"false\",\n      answer03: \"true\",\n      answer04: \"true\",\n      answer05: \"false\",\n      answer06: \"false\",\n      answer07: \"true\",\n      answer08: \"true\",\n      answer09: \"false\",\n      answer10: \"true\",\n      answer11: \"false\",\n      answer12: \"true\",\n    },\n    es03: {\n      answer01: \"la\",\n      answer02: \"le\",\n      answer03: \"ne\",\n      answer04: \"lo\",\n      answer05: \"lo\",\n      answer06: \"li\",\n    },\n    es04: {\n      answer01: \"le\",\n      answer02: \"gli\",\n      answer03: \"gli\",\n      answer04: \"ti\",\n      answer05: \"mi\",\n      answer06: \"vi\",\n    },\n    es05: {\n      answer01: \"glieli\",\n      answer02: \"te lo\",\n      answer03: \"glielo\",\n      answer04: \"tele\",\n      answer05: \"gliela\",\n      answer06: \"me lo\",\n    },\n    es06: {\n      answer01: \"c\",\n      answer02: \"b\",\n      answer03: \"a\",\n      answer04: \"c\",\n      answer05: \"a\",\n      answer06: \"c\",\n      answer07: \"a\",\n      answer08: \"b\",\n      answer09: \"b\",\n      answer10: \"a\",\n    },\n    es07: {\n      answer01: \"li\",\n      answer02: \"le\",\n      answer03: \"gliel'\",\n      answer04: \"ne\",\n      answer05: \"ci\",\n      answer06: \"vi\",\n      answer07: \"ne\",\n      answer08: \"ci\",\n      answer09: \"glielo\",\n      answer10: \"l'\",\n    },\n    es08: {\n      answer01: \"c\",\n      answer02: \"b\",\n      answer03: \"a\",\n      answer04: \"b\",\n      answer05: \"a\",\n      answer06: \"c\",\n      answer07: \"b\",\n      answer08: \"b\",\n    },\n    es09: {\n      answer01: \"true\",\n      answer02: \"false\",\n      answer03: \"false\",\n      answer04: \"false\",\n      answer05: \"true\",\n      answer06: \"true\",\n      answer07: \"true\",\n      answer08: \"false\",\n      answer09: \"false\",\n      answer10: \"true\",\n    },\n    es10: {\n      answer01: \"false\",\n      answer02: \"true\",\n      answer03: \"true\",\n      answer04: \"false\",\n      answer05: \"true\",\n      answer06: \"false\",\n      answer07: \"true\",\n      answer08: \"true\",\n    },\n  },\n  prova03: {\n    es01: { answer01: \"c\" },\n    es02: {\n      answer01: \"true\",\n      answer02: \"true\",\n      answer03: \"false\",\n      answer04: \"true\",\n      answer05: \"false\",\n      answer06: \"false\",\n      answer07: \"false\",\n      answer08: \"true\",\n      answer09: \"false\",\n      answer10: \"false\",\n      answer11: \"true\",\n      answer12: \"true\",\n    },\n    es03: {\n      answer01: \"marco la prepara\",\n      answer02: \"elena le scrive\",\n      answer03: \"mio figlio ne ha mangiati quattro\",\n      answer04: \"digli che gli saluto\",\n      answer05: \"comprane due chili\",\n      answer06: \"li hai visti?\",\n      answer07: \"voglio regalargli una bambola\",\n      answer08: \"ne prendo ancora una fetta\",\n      answer09: \"mi sono dimenticata di telefonarle\",\n      answer10: \"posso averne ancora un po'?\",\n      answer11: \"le chiedo un'informazione\",\n    },\n    es04: {\n      answer01: \"mi\",\n      answer02: \"mi\",\n      answer03: \"gli\",\n      answer04: \"lo\",\n      answer05: \"ti\",\n      answer06: \"ci\",\n      answer07: \"vi\",\n      answer08: \"ne\",\n      answer09: \"li\",\n      answer10: \"ti\",\n      answer11: \"me le\",\n      answer12: \"ne\",\n      answer13: \"gliela\",\n    },\n    es05: {\n      answer01: \"a\",\n      answer02: \"b\",\n      answer03: \"a\",\n      answer04: \"c\",\n      answer05: \"c\",\n      answer06: \"b\",\n      answer07: \"a\",\n      answer08: \"b\",\n      answer09: \"b\",\n      answer10: \"c\",\n    },\n    es06: {\n      answer01: \"ti\",\n      answer02: \"gli\",\n      answer03: \"glielo\",\n      answer04: \"ne\",\n      answer05: \"ci\",\n    },\n    es07: {\n      answer01: \"b\",\n      answer02: \"c\",\n      answer03: \"a\",\n      answer04: \"a\",\n      answer05: \"a\",\n      answer06: \"a\",\n      answer07: \"c\",\n      answer08: \"b\",\n    },\n    es08: {\n      answer01: \"false\",\n      answer02: \"false\",\n      answer03: \"true\",\n      answer04: \"false\",\n      answer05: \"true\",\n      answer06: \"true\",\n      answer07: \"false\",\n      answer08: \"true\",\n      answer09: \"false\",\n      answer10: \"false\",\n      answer11: \"true\",\n      answer12: \"true\",\n    },\n    es09: {\n      answer01: \"false\",\n      answer02: \"false\",\n      answer03: \"true\",\n      answer04: \"true\",\n      answer05: \"true\",\n      answer06: \"false\",\n      answer07: \"true\",\n      answer08: \"false\",\n    },\n  },\n  prova04: {\n    es01: { answer01: \"a\" },\n    es02: {\n      answer01: \"true\",\n      answer02: \"false\",\n      answer03: \"false\",\n      answer04: \"false\",\n      answer05: \"true\",\n      answer06: \"false\",\n      answer07: \"true\",\n      answer08: \"true\",\n      answer09: \"false\",\n      answer10: \"true\",\n      answer11: \"false\",\n      answer12: \"true\",\n    },\n    es03: {\n      answer01: \"dal dentista\",\n      answer02: \"che paolo si vuole fare prete\",\n      answer03: \"con veronica\",\n      answer04: \"a fare la spesa\",\n      answer05: \"a casa tua\",\n      answer06: \"che ben arriva tra 5 minuti\",\n    },\n    es04: {\n      answer01: \"ne\",\n      answer02: \"ne\",\n      answer03: \"ci\",\n      answer04: \"ci\",\n      answer05: \"ne\",\n      answer06: \"ci\",\n      answer07: \"ne\",\n      answer08: \"ci\",\n      answer09: \"ne\",\n      answer10: \"ci\",\n    },\n    es05: {\n      answer01: \"b\",\n      answer02: \"c\",\n      answer03: \"b\",\n      answer04: \"c\",\n      answer05: \"c\",\n      answer06: \"a\",\n      answer07: \"c\",\n      answer08: \"a\",\n      answer09: \"b\",\n      answer10: \"c\",\n    },\n    es06: {\n      answer01: \"ne\",\n      answer02: \"ci\",\n      answer03: \"l'\",\n      answer04: \"vela\",\n      answer05: \"ci\",\n    },\n    es07: {\n      answer01: \"c\",\n      answer02: \"b\",\n      answer03: \"b\",\n      answer04: \"c\",\n      answer05: \"a\",\n      answer06: \"b\",\n      answer07: \"a\",\n      answer08: \"b\",\n    },\n    es08: {\n      answer01: \"false\",\n      answer02: \"false\",\n      answer03: \"true\",\n      answer04: \"false\",\n      answer05: \"true\",\n      answer06: \"false\",\n      answer07: \"false\",\n      answer08: \"true\",\n      answer09: \"false\",\n      answer10: \"true\",\n      answer11: \"true\",\n      answer12: \"true\",\n    },\n    es09: {\n      answer01: \"false\",\n      answer02: \"true\",\n      answer03: \"false\",\n      answer04: \"false\",\n      answer05: \"true\",\n      answer06: \"true\",\n      answer07: \"false\",\n      answer08: \"true\",\n    },\n  },\n  prova05: {\n    es03: {\n      answer01: \"al\",\n      answer02: \"negli\",\n      answer03: \"in\",\n      answer04: \"della\",\n      answer05: \"a\",\n      answer06: \"della\",\n      answer07: \"in\",\n      answer08: \"in\",\n      answer09: \"dal\",\n      answer10: \"tra i\",\n      answer11: \"da\",\n    },\n    es04: {\n      answer01: \"agli\",\n      answer02: \"sull'\",\n      answer03: \"della\",\n      answer04: \"sulla\",\n      answer05: \"al\",\n      answer06: \"dell'\",\n      answer07: \"sul\",\n      answer08: \"negli\",\n      answer09: \"agli\",\n      answer10: \"all'\",\n    },\n    es05: {\n      answer01: \"allo\",\n      answer02: \"dall'\",\n      answer03: \"sul\",\n      answer04: \"dal\",\n      answer05: \"dagli\",\n      answer06: \"della\",\n      answer07: \"dalla\",\n      answer08: \"dal\",\n      answer09: \"al\",\n      answer10: \"alle\",\n      answer11: \"dalla\",\n      answer12: \"all'\",\n    },\n    es07: {\n      answer01: \"le\",\n      answer02: \"ci\",\n      answer03: \"ne\",\n      answer04: \"mi\",\n      answer05: \"glielo\",\n      answer06: \"li\",\n      answer07: \"li\",\n      answer08: \"ne\",\n      answer09: \"glielo\",\n      answer10: \"ci\",\n    },\n  },\n  prova06: {\n    es07: {\n      answer01: \"la\",\n      answer02: \"me lo\",\n      answer03: \"ci\",\n      answer04: \"ne\",\n      answer05: \"vi\",\n    },\n  },\n};\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\nvar __assign = function () {\n  __assign = Object.assign || function __assign(t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nfunction __rest(s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n}\n\nfunction __values(o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n      i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n}\n\nfunction __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n}\n\nfunction __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++) ar = ar.concat(__read(arguments[i]));\n\n  return ar;\n}\n\nexport { __assign, __read, __rest, __spread, __values };","var STATE_DELIMITER = '.';\nvar EMPTY_ACTIVITY_MAP = {};\nvar DEFAULT_GUARD_TYPE = 'xstate.guard';\nvar TARGETLESS_KEY = '';\nexport { DEFAULT_GUARD_TYPE, EMPTY_ACTIVITY_MAP, STATE_DELIMITER, TARGETLESS_KEY };","var IS_PRODUCTION = process.env.NODE_ENV === 'production';\nexport { IS_PRODUCTION };","import { __spread, __values, __read, __assign } from './_virtual/_tslib.js';\nimport { DEFAULT_GUARD_TYPE, TARGETLESS_KEY, STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\n\nfunction keys(value) {\n  return Object.keys(value);\n}\n\nfunction matchesState(parentStateId, childStateId, delimiter) {\n  if (delimiter === void 0) {\n    delimiter = STATE_DELIMITER;\n  }\n\n  var parentStateValue = toStateValue(parentStateId, delimiter);\n  var childStateValue = toStateValue(childStateId, delimiter);\n\n  if (isString(childStateValue)) {\n    if (isString(parentStateValue)) {\n      return childStateValue === parentStateValue;\n    } // Parent more specific than child\n\n\n    return false;\n  }\n\n  if (isString(parentStateValue)) {\n    return parentStateValue in childStateValue;\n  }\n\n  return keys(parentStateValue).every(function (key) {\n    if (!(key in childStateValue)) {\n      return false;\n    }\n\n    return matchesState(parentStateValue[key], childStateValue[key]);\n  });\n}\n\nfunction getEventType(event) {\n  try {\n    return isString(event) || typeof event === 'number' ? \"\" + event : event.type;\n  } catch (e) {\n    throw new Error('Events must be strings or objects with a string event.type property.');\n  }\n}\n\nfunction toStatePath(stateId, delimiter) {\n  try {\n    if (isArray(stateId)) {\n      return stateId;\n    }\n\n    return stateId.toString().split(delimiter);\n  } catch (e) {\n    throw new Error(\"'\" + stateId + \"' is not a valid state path.\");\n  }\n}\n\nfunction isStateLike(state) {\n  return typeof state === 'object' && 'value' in state && 'context' in state && 'event' in state && '_event' in state;\n}\n\nfunction toStateValue(stateValue, delimiter) {\n  if (isStateLike(stateValue)) {\n    return stateValue.value;\n  }\n\n  if (isArray(stateValue)) {\n    return pathToStateValue(stateValue);\n  }\n\n  if (typeof stateValue !== 'string') {\n    return stateValue;\n  }\n\n  var statePath = toStatePath(stateValue, delimiter);\n  return pathToStateValue(statePath);\n}\n\nfunction pathToStateValue(statePath) {\n  if (statePath.length === 1) {\n    return statePath[0];\n  }\n\n  var value = {};\n  var marker = value;\n\n  for (var i = 0; i < statePath.length - 1; i++) {\n    if (i === statePath.length - 2) {\n      marker[statePath[i]] = statePath[i + 1];\n    } else {\n      marker[statePath[i]] = {};\n      marker = marker[statePath[i]];\n    }\n  }\n\n  return value;\n}\n\nfunction mapValues(collection, iteratee) {\n  var result = {};\n  var collectionKeys = keys(collection);\n\n  for (var i = 0; i < collectionKeys.length; i++) {\n    var key = collectionKeys[i];\n    result[key] = iteratee(collection[key], key, collection, i);\n  }\n\n  return result;\n}\n\nfunction mapFilterValues(collection, iteratee, predicate) {\n  var e_1, _a;\n\n  var result = {};\n\n  try {\n    for (var _b = __values(keys(collection)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var item = collection[key];\n\n      if (!predicate(item)) {\n        continue;\n      }\n\n      result[key] = iteratee(item, key, collection);\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return result;\n}\n/**\r\n * Retrieves a value at the given path.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\n\nvar path = function (props) {\n  return function (object) {\n    var e_2, _a;\n\n    var result = object;\n\n    try {\n      for (var props_1 = __values(props), props_1_1 = props_1.next(); !props_1_1.done; props_1_1 = props_1.next()) {\n        var prop = props_1_1.value;\n        result = result[prop];\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (props_1_1 && !props_1_1.done && (_a = props_1.return)) _a.call(props_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return result;\n  };\n};\n/**\r\n * Retrieves a value at the given path via the nested accessor prop.\r\n * @param props The deep path to the prop of the desired value\r\n */\n\n\nfunction nestedPath(props, accessorProp) {\n  return function (object) {\n    var e_3, _a;\n\n    var result = object;\n\n    try {\n      for (var props_2 = __values(props), props_2_1 = props_2.next(); !props_2_1.done; props_2_1 = props_2.next()) {\n        var prop = props_2_1.value;\n        result = result[accessorProp][prop];\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (props_2_1 && !props_2_1.done && (_a = props_2.return)) _a.call(props_2);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    return result;\n  };\n}\n\nfunction toStatePaths(stateValue) {\n  if (!stateValue) {\n    return [[]];\n  }\n\n  if (isString(stateValue)) {\n    return [[stateValue]];\n  }\n\n  var result = flatten(keys(stateValue).map(function (key) {\n    var subStateValue = stateValue[key];\n\n    if (typeof subStateValue !== 'string' && (!subStateValue || !Object.keys(subStateValue).length)) {\n      return [[key]];\n    }\n\n    return toStatePaths(stateValue[key]).map(function (subPath) {\n      return [key].concat(subPath);\n    });\n  }));\n  return result;\n}\n\nfunction flatten(array) {\n  var _a;\n\n  return (_a = []).concat.apply(_a, __spread(array));\n}\n\nfunction toArrayStrict(value) {\n  if (isArray(value)) {\n    return value;\n  }\n\n  return [value];\n}\n\nfunction toArray(value) {\n  if (value === undefined) {\n    return [];\n  }\n\n  return toArrayStrict(value);\n}\n\nfunction mapContext(mapper, context, _event) {\n  var e_5, _a;\n\n  if (isFunction(mapper)) {\n    return mapper(context, _event.data);\n  }\n\n  var result = {};\n\n  try {\n    for (var _b = __values(Object.keys(mapper)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var key = _c.value;\n      var subMapper = mapper[key];\n\n      if (isFunction(subMapper)) {\n        result[key] = subMapper(context, _event.data);\n      } else {\n        result[key] = subMapper;\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return result;\n}\n\nfunction isBuiltInEvent(eventType) {\n  return /^(done|error)\\./.test(eventType);\n}\n\nfunction isPromiseLike(value) {\n  if (value instanceof Promise) {\n    return true;\n  } // Check if shape matches the Promise/A+ specification for a \"thenable\".\n\n\n  if (value !== null && (isFunction(value) || typeof value === 'object') && isFunction(value.then)) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction partition(items, predicate) {\n  var e_6, _a;\n\n  var _b = __read([[], []], 2),\n      truthy = _b[0],\n      falsy = _b[1];\n\n  try {\n    for (var items_1 = __values(items), items_1_1 = items_1.next(); !items_1_1.done; items_1_1 = items_1.next()) {\n      var item = items_1_1.value;\n\n      if (predicate(item)) {\n        truthy.push(item);\n      } else {\n        falsy.push(item);\n      }\n    }\n  } catch (e_6_1) {\n    e_6 = {\n      error: e_6_1\n    };\n  } finally {\n    try {\n      if (items_1_1 && !items_1_1.done && (_a = items_1.return)) _a.call(items_1);\n    } finally {\n      if (e_6) throw e_6.error;\n    }\n  }\n\n  return [truthy, falsy];\n}\n\nfunction updateHistoryStates(hist, stateValue) {\n  return mapValues(hist.states, function (subHist, key) {\n    if (!subHist) {\n      return undefined;\n    }\n\n    var subStateValue = (isString(stateValue) ? undefined : stateValue[key]) || (subHist ? subHist.current : undefined);\n\n    if (!subStateValue) {\n      return undefined;\n    }\n\n    return {\n      current: subStateValue,\n      states: updateHistoryStates(subHist, subStateValue)\n    };\n  });\n}\n\nfunction updateHistoryValue(hist, stateValue) {\n  return {\n    current: stateValue,\n    states: updateHistoryStates(hist, stateValue)\n  };\n}\n\nfunction updateContext(context, _event, assignActions, state) {\n  if (!IS_PRODUCTION) {\n    warn(!!context, 'Attempting to update undefined context');\n  }\n\n  var updatedContext = context ? assignActions.reduce(function (acc, assignAction) {\n    var e_7, _a;\n\n    var assignment = assignAction.assignment;\n    var meta = {\n      state: state,\n      action: assignAction,\n      _event: _event\n    };\n    var partialUpdate = {};\n\n    if (isFunction(assignment)) {\n      partialUpdate = assignment(acc, _event.data, meta);\n    } else {\n      try {\n        for (var _b = __values(keys(assignment)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var key = _c.value;\n          var propAssignment = assignment[key];\n          partialUpdate[key] = isFunction(propAssignment) ? propAssignment(acc, _event.data, meta) : propAssignment;\n        }\n      } catch (e_7_1) {\n        e_7 = {\n          error: e_7_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_7) throw e_7.error;\n        }\n      }\n    }\n\n    return Object.assign({}, acc, partialUpdate);\n  }, context) : context;\n  return updatedContext;\n} // tslint:disable-next-line:no-empty\n\n\nvar warn = function () {};\n\nif (!IS_PRODUCTION) {\n  warn = function (condition, message) {\n    var error = condition instanceof Error ? condition : undefined;\n\n    if (!error && condition) {\n      return;\n    }\n\n    if (console !== undefined) {\n      var args = [\"Warning: \" + message];\n\n      if (error) {\n        args.push(error);\n      } // tslint:disable-next-line:no-console\n\n\n      console.warn.apply(console, args);\n    }\n  };\n}\n\nfunction isArray(value) {\n  return Array.isArray(value);\n} // tslint:disable-next-line:ban-types\n\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction isString(value) {\n  return typeof value === 'string';\n} // export function memoizedGetter<T, TP extends { prototype: object }>(\n//   o: TP,\n//   property: string,\n//   getter: () => T\n// ): void {\n//   Object.defineProperty(o.prototype, property, {\n//     get: getter,\n//     enumerable: false,\n//     configurable: false\n//   });\n// }\n\n\nfunction toGuard(condition, guardMap) {\n  if (!condition) {\n    return undefined;\n  }\n\n  if (isString(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition,\n      predicate: guardMap ? guardMap[condition] : undefined\n    };\n  }\n\n  if (isFunction(condition)) {\n    return {\n      type: DEFAULT_GUARD_TYPE,\n      name: condition.name,\n      predicate: condition\n    };\n  }\n\n  return condition;\n}\n\nfunction isObservable(value) {\n  try {\n    return 'subscribe' in value && isFunction(value.subscribe);\n  } catch (e) {\n    return false;\n  }\n}\n\nvar symbolObservable = /*#__PURE__*/function () {\n  return typeof Symbol === 'function' && Symbol.observable || '@@observable';\n}();\n\nfunction isMachine(value) {\n  try {\n    return '__xstatenode' in value;\n  } catch (e) {\n    return false;\n  }\n}\n\nvar uniqueId = /*#__PURE__*/function () {\n  var currentId = 0;\n  return function () {\n    currentId++;\n    return currentId.toString(16);\n  };\n}();\n\nfunction toEventObject(event, payload // id?: TEvent['type']\n) {\n  if (isString(event) || typeof event === 'number') {\n    return __assign({\n      type: event\n    }, payload);\n  }\n\n  return event;\n}\n\nfunction toSCXMLEvent(event, scxmlEvent) {\n  if (!isString(event) && '$$type' in event && event.$$type === 'scxml') {\n    return event;\n  }\n\n  var eventObject = toEventObject(event);\n  return __assign({\n    name: eventObject.type,\n    data: eventObject,\n    $$type: 'scxml',\n    type: 'external'\n  }, scxmlEvent);\n}\n\nfunction toTransitionConfigArray(event, configLike) {\n  var transitions = toArrayStrict(configLike).map(function (transitionLike) {\n    if (typeof transitionLike === 'undefined' || typeof transitionLike === 'string' || isMachine(transitionLike)) {\n      return {\n        target: transitionLike,\n        event: event\n      };\n    }\n\n    return __assign(__assign({}, transitionLike), {\n      event: event\n    });\n  });\n  return transitions;\n}\n\nfunction normalizeTarget(target) {\n  if (target === undefined || target === TARGETLESS_KEY) {\n    return undefined;\n  }\n\n  return toArray(target);\n}\n\nfunction reportUnhandledExceptionOnInvocation(originalError, currentError, id) {\n  if (!IS_PRODUCTION) {\n    var originalStackTrace = originalError.stack ? \" Stacktrace was '\" + originalError.stack + \"'\" : '';\n\n    if (originalError === currentError) {\n      // tslint:disable-next-line:no-console\n      console.error(\"Missing onError handler for invocation '\" + id + \"', error was '\" + originalError + \"'.\" + originalStackTrace);\n    } else {\n      var stackTrace = currentError.stack ? \" Stacktrace was '\" + currentError.stack + \"'\" : ''; // tslint:disable-next-line:no-console\n\n      console.error(\"Missing onError handler and/or unhandled exception/promise rejection for invocation '\" + id + \"'. \" + (\"Original error: '\" + originalError + \"'. \" + originalStackTrace + \" Current error is '\" + currentError + \"'.\" + stackTrace));\n    }\n  }\n}\n\nfunction evaluateGuard(machine, guard, context, _event, state) {\n  var guards = machine.options.guards;\n  var guardMeta = {\n    state: state,\n    cond: guard,\n    _event: _event\n  }; // TODO: do not hardcode!\n\n  if (guard.type === DEFAULT_GUARD_TYPE) {\n    return guard.predicate(context, _event.data, guardMeta);\n  }\n\n  var condFn = guards[guard.type];\n\n  if (!condFn) {\n    throw new Error(\"Guard '\" + guard.type + \"' is not implemented on machine '\" + machine.id + \"'.\");\n  }\n\n  return condFn(context, _event.data, guardMeta);\n}\n\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    return {\n      type: src\n    };\n  }\n\n  return src;\n}\n\nexport { evaluateGuard, flatten, getEventType, isArray, isBuiltInEvent, isFunction, isMachine, isObservable, isPromiseLike, isStateLike, isString, keys, mapContext, mapFilterValues, mapValues, matchesState, nestedPath, normalizeTarget, partition, path, pathToStateValue, reportUnhandledExceptionOnInvocation, symbolObservable, toArray, toArrayStrict, toEventObject, toGuard, toInvokeSource, toSCXMLEvent, toStatePath, toStatePaths, toStateValue, toTransitionConfigArray, uniqueId, updateContext, updateHistoryStates, updateHistoryValue, warn };","import { __values } from './_virtual/_tslib.js';\nimport { keys, matchesState } from './utils.js';\n\nfunction mapState(stateMap, stateId) {\n  var e_1, _a;\n\n  var foundStateId;\n\n  try {\n    for (var _b = __values(keys(stateMap)), _c = _b.next(); !_c.done; _c = _b.next()) {\n      var mappedStateId = _c.value;\n\n      if (matchesState(mappedStateId, stateId) && (!foundStateId || stateId.length > foundStateId.length)) {\n        foundStateId = mappedStateId;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return stateMap[foundStateId];\n}\n\nexport { mapState };","var ActionTypes;\n\n(function (ActionTypes) {\n  ActionTypes[\"Start\"] = \"xstate.start\";\n  ActionTypes[\"Stop\"] = \"xstate.stop\";\n  ActionTypes[\"Raise\"] = \"xstate.raise\";\n  ActionTypes[\"Send\"] = \"xstate.send\";\n  ActionTypes[\"Cancel\"] = \"xstate.cancel\";\n  ActionTypes[\"NullEvent\"] = \"\";\n  ActionTypes[\"Assign\"] = \"xstate.assign\";\n  ActionTypes[\"After\"] = \"xstate.after\";\n  ActionTypes[\"DoneState\"] = \"done.state\";\n  ActionTypes[\"DoneInvoke\"] = \"done.invoke\";\n  ActionTypes[\"Log\"] = \"xstate.log\";\n  ActionTypes[\"Init\"] = \"xstate.init\";\n  ActionTypes[\"Invoke\"] = \"xstate.invoke\";\n  ActionTypes[\"ErrorExecution\"] = \"error.execution\";\n  ActionTypes[\"ErrorCommunication\"] = \"error.communication\";\n  ActionTypes[\"ErrorPlatform\"] = \"error.platform\";\n  ActionTypes[\"ErrorCustom\"] = \"xstate.error\";\n  ActionTypes[\"Update\"] = \"xstate.update\";\n  ActionTypes[\"Pure\"] = \"xstate.pure\";\n  ActionTypes[\"Choose\"] = \"xstate.choose\";\n})(ActionTypes || (ActionTypes = {}));\n\nvar SpecialTargets;\n\n(function (SpecialTargets) {\n  SpecialTargets[\"Parent\"] = \"#_parent\";\n  SpecialTargets[\"Internal\"] = \"#_internal\";\n})(SpecialTargets || (SpecialTargets = {}));\n\nexport { ActionTypes, SpecialTargets };","import { ActionTypes } from './types.js'; // xstate-specific action types\n\nvar start = ActionTypes.Start;\nvar stop = ActionTypes.Stop;\nvar raise = ActionTypes.Raise;\nvar send = ActionTypes.Send;\nvar cancel = ActionTypes.Cancel;\nvar nullEvent = ActionTypes.NullEvent;\nvar assign = ActionTypes.Assign;\nvar after = ActionTypes.After;\nvar doneState = ActionTypes.DoneState;\nvar log = ActionTypes.Log;\nvar init = ActionTypes.Init;\nvar invoke = ActionTypes.Invoke;\nvar errorExecution = ActionTypes.ErrorExecution;\nvar errorPlatform = ActionTypes.ErrorPlatform;\nvar error = ActionTypes.ErrorCustom;\nvar update = ActionTypes.Update;\nvar choose = ActionTypes.Choose;\nvar pure = ActionTypes.Pure;\nexport { after, assign, cancel, choose, doneState, error, errorExecution, errorPlatform, init, invoke, log, nullEvent, pure, raise, send, start, stop, update };","import { __assign, __read } from './_virtual/_tslib.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { toSCXMLEvent, isFunction, toEventObject, getEventType, isString, partition, updateContext, flatten, toArray, toGuard, evaluateGuard, warn, isArray } from './utils.js';\nimport { SpecialTargets, ActionTypes } from './types.js';\nimport { send as send$1, update, assign as assign$1, init, raise as raise$1, log as log$1, cancel as cancel$1, error as error$1, stop as stop$1, pure as pure$1, choose as choose$1 } from './actionTypes.js';\nvar initEvent = /*#__PURE__*/toSCXMLEvent({\n  type: init\n});\n\nfunction getActionFunction(actionType, actionFunctionMap) {\n  return actionFunctionMap ? actionFunctionMap[actionType] || undefined : undefined;\n}\n\nfunction toActionObject(action, actionFunctionMap) {\n  var actionObject;\n\n  if (isString(action) || typeof action === 'number') {\n    var exec = getActionFunction(action, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = {\n        type: action,\n        exec: exec\n      };\n    } else if (exec) {\n      actionObject = exec;\n    } else {\n      actionObject = {\n        type: action,\n        exec: undefined\n      };\n    }\n  } else if (isFunction(action)) {\n    actionObject = {\n      // Convert action to string if unnamed\n      type: action.name || action.toString(),\n      exec: action\n    };\n  } else {\n    var exec = getActionFunction(action.type, actionFunctionMap);\n\n    if (isFunction(exec)) {\n      actionObject = __assign(__assign({}, action), {\n        exec: exec\n      });\n    } else if (exec) {\n      var actionType = exec.type || action.type;\n      actionObject = __assign(__assign(__assign({}, exec), action), {\n        type: actionType\n      });\n    } else {\n      actionObject = action;\n    }\n  }\n\n  Object.defineProperty(actionObject, 'toString', {\n    value: function () {\n      return actionObject.type;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  return actionObject;\n}\n\nvar toActionObjects = function (action, actionFunctionMap) {\n  if (!action) {\n    return [];\n  }\n\n  var actions = isArray(action) ? action : [action];\n  return actions.map(function (subAction) {\n    return toActionObject(subAction, actionFunctionMap);\n  });\n};\n\nfunction toActivityDefinition(action) {\n  var actionObject = toActionObject(action);\n  return __assign(__assign({\n    id: isString(action) ? action : actionObject.id\n  }, actionObject), {\n    type: actionObject.type\n  });\n}\n/**\r\n * Raises an event. This places the event in the internal event queue, so that\r\n * the event is immediately consumed by the machine in the current step.\r\n *\r\n * @param eventType The event to raise.\r\n */\n\n\nfunction raise(event) {\n  if (!isString(event)) {\n    return send(event, {\n      to: SpecialTargets.Internal\n    });\n  }\n\n  return {\n    type: raise$1,\n    event: event\n  };\n}\n\nfunction resolveRaise(action) {\n  return {\n    type: raise$1,\n    _event: toSCXMLEvent(action.event)\n  };\n}\n/**\r\n * Sends an event. This returns an action that will be read by an interpreter to\r\n * send the event in the next step, after the current step is finished executing.\r\n *\r\n * @param event The event to send.\r\n * @param options Options to pass into the send event:\r\n *  - `id` - The unique send event identifier (used with `cancel()`).\r\n *  - `delay` - The number of milliseconds to delay the sending of the event.\r\n *  - `to` - The target of this event (by default, the machine the event was sent from).\r\n */\n\n\nfunction send(event, options) {\n  return {\n    to: options ? options.to : undefined,\n    type: send$1,\n    event: isFunction(event) ? event : toEventObject(event),\n    delay: options ? options.delay : undefined,\n    id: options && options.id !== undefined ? options.id : isFunction(event) ? event.name : getEventType(event)\n  };\n}\n\nfunction resolveSend(action, ctx, _event, delaysMap) {\n  var meta = {\n    _event: _event\n  }; // TODO: helper function for resolving Expr\n\n  var resolvedEvent = toSCXMLEvent(isFunction(action.event) ? action.event(ctx, _event.data, meta) : action.event);\n  var resolvedDelay;\n\n  if (isString(action.delay)) {\n    var configDelay = delaysMap && delaysMap[action.delay];\n    resolvedDelay = isFunction(configDelay) ? configDelay(ctx, _event.data, meta) : configDelay;\n  } else {\n    resolvedDelay = isFunction(action.delay) ? action.delay(ctx, _event.data, meta) : action.delay;\n  }\n\n  var resolvedTarget = isFunction(action.to) ? action.to(ctx, _event.data, meta) : action.to;\n  return __assign(__assign({}, action), {\n    to: resolvedTarget,\n    _event: resolvedEvent,\n    event: resolvedEvent.data,\n    delay: resolvedDelay\n  });\n}\n/**\r\n * Sends an event to this machine's parent.\r\n *\r\n * @param event The event to send to the parent machine.\r\n * @param options Options to pass into the send event.\r\n */\n\n\nfunction sendParent(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\n/**\r\n * Sends an update event to this machine's parent.\r\n */\n\n\nfunction sendUpdate() {\n  return sendParent(update);\n}\n/**\r\n * Sends an event back to the sender of the original event.\r\n *\r\n * @param event The event to send back to the sender\r\n * @param options Options to pass into the send event\r\n */\n\n\nfunction respond(event, options) {\n  return send(event, __assign(__assign({}, options), {\n    to: function (_, __, _a) {\n      var _event = _a._event;\n      return _event.origin; // TODO: handle when _event.origin is undefined\n    }\n  }));\n}\n\nvar defaultLogExpr = function (context, event) {\n  return {\n    context: context,\n    event: event\n  };\n};\n/**\r\n *\r\n * @param expr The expression function to evaluate which will be logged.\r\n *  Takes in 2 arguments:\r\n *  - `ctx` - the current state context\r\n *  - `event` - the event that caused this action to be executed.\r\n * @param label The label to give to the logged expression.\r\n */\n\n\nfunction log(expr, label) {\n  if (expr === void 0) {\n    expr = defaultLogExpr;\n  }\n\n  return {\n    type: log$1,\n    label: label,\n    expr: expr\n  };\n}\n\nvar resolveLog = function (action, ctx, _event) {\n  return __assign(__assign({}, action), {\n    value: isString(action.expr) ? action.expr : action.expr(ctx, _event.data, {\n      _event: _event\n    })\n  });\n};\n/**\r\n * Cancels an in-flight `send(...)` action. A canceled sent action will not\r\n * be executed, nor will its event be sent, unless it has already been sent\r\n * (e.g., if `cancel(...)` is called after the `send(...)` action's `delay`).\r\n *\r\n * @param sendId The `id` of the `send(...)` action to cancel.\r\n */\n\n\nvar cancel = function (sendId) {\n  return {\n    type: cancel$1,\n    sendId: sendId\n  };\n};\n/**\r\n * Starts an activity.\r\n *\r\n * @param activity The activity to start.\r\n */\n\n\nfunction start(activity) {\n  var activityDef = toActivityDefinition(activity);\n  return {\n    type: ActionTypes.Start,\n    activity: activityDef,\n    exec: undefined\n  };\n}\n/**\r\n * Stops an activity.\r\n *\r\n * @param actorRef The activity to stop.\r\n */\n\n\nfunction stop(actorRef) {\n  var activity = isFunction(actorRef) ? actorRef : toActivityDefinition(actorRef);\n  return {\n    type: ActionTypes.Stop,\n    activity: activity,\n    exec: undefined\n  };\n}\n\nfunction resolveStop(action, context, _event) {\n  var actorRefOrString = isFunction(action.activity) ? action.activity(context, _event.data) : action.activity;\n  var resolvedActorRef = typeof actorRefOrString === 'string' ? {\n    id: actorRefOrString\n  } : actorRefOrString;\n  var actionObject = {\n    type: ActionTypes.Stop,\n    activity: resolvedActorRef\n  };\n  return actionObject;\n}\n/**\r\n * Updates the current context of the machine.\r\n *\r\n * @param assignment An object that represents the partial context to update.\r\n */\n\n\nvar assign = function (assignment) {\n  return {\n    type: assign$1,\n    assignment: assignment\n  };\n};\n/**\r\n * Returns an event type that represents an implicit event that\r\n * is sent after the specified `delay`.\r\n *\r\n * @param delayRef The delay in milliseconds\r\n * @param id The state node ID where this event is handled\r\n */\n\n\nfunction after(delayRef, id) {\n  var idSuffix = id ? \"#\" + id : '';\n  return ActionTypes.After + \"(\" + delayRef + \")\" + idSuffix;\n}\n/**\r\n * Returns an event that represents that a final state node\r\n * has been reached in the parent state node.\r\n *\r\n * @param id The final state node's parent state node `id`\r\n * @param data The data to pass into the event\r\n */\n\n\nfunction done(id, data) {\n  var type = ActionTypes.DoneState + \".\" + id;\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\n/**\r\n * Returns an event that represents that an invoked service has terminated.\r\n *\r\n * An invoked service is terminated when it has reached a top-level final state node,\r\n * but not when it is canceled.\r\n *\r\n * @param id The final state node ID\r\n * @param data The data to pass into the event\r\n */\n\n\nfunction doneInvoke(id, data) {\n  var type = ActionTypes.DoneInvoke + \".\" + id;\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\n\nfunction error(id, data) {\n  var type = ActionTypes.ErrorPlatform + \".\" + id;\n  var eventObject = {\n    type: type,\n    data: data\n  };\n\n  eventObject.toString = function () {\n    return type;\n  };\n\n  return eventObject;\n}\n\nfunction pure(getActions) {\n  return {\n    type: ActionTypes.Pure,\n    get: getActions\n  };\n}\n/**\r\n * Forwards (sends) an event to a specified service.\r\n *\r\n * @param target The target service to forward the event to.\r\n * @param options Options to pass into the send action creator.\r\n */\n\n\nfunction forwardTo(target, options) {\n  return send(function (_, event) {\n    return event;\n  }, __assign(__assign({}, options), {\n    to: target\n  }));\n}\n/**\r\n * Escalates an error by sending it as an event to this machine's parent.\r\n *\r\n * @param errorData The error data to send, or the expression function that\r\n * takes in the `context`, `event`, and `meta`, and returns the error data to send.\r\n * @param options Options to pass into the send action creator.\r\n */\n\n\nfunction escalate(errorData, options) {\n  return sendParent(function (context, event, meta) {\n    return {\n      type: error$1,\n      data: isFunction(errorData) ? errorData(context, event, meta) : errorData\n    };\n  }, __assign(__assign({}, options), {\n    to: SpecialTargets.Parent\n  }));\n}\n\nfunction choose(conds) {\n  return {\n    type: ActionTypes.Choose,\n    conds: conds\n  };\n}\n\nfunction resolveActions(machine, currentState, currentContext, _event, actions) {\n  var _a = __read(partition(actions, function (action) {\n    return action.type === assign$1;\n  }), 2),\n      assignActions = _a[0],\n      otherActions = _a[1];\n\n  var updatedContext = assignActions.length ? updateContext(currentContext, _event, assignActions, currentState) : currentContext;\n  var resolvedActions = flatten(otherActions.map(function (actionObject) {\n    var _a;\n\n    switch (actionObject.type) {\n      case raise$1:\n        return resolveRaise(actionObject);\n\n      case send$1:\n        var sendAction = resolveSend(actionObject, updatedContext, _event, machine.options.delays); // TODO: fix ActionTypes.Init\n\n        if (!IS_PRODUCTION) {\n          // warn after resolving as we can create better contextual message here\n          warn(!isString(actionObject.delay) || typeof sendAction.delay === 'number', // tslint:disable-next-line:max-line-length\n          \"No delay reference for delay expression '\" + actionObject.delay + \"' was found on machine '\" + machine.id + \"'\");\n        }\n\n        return sendAction;\n\n      case log$1:\n        return resolveLog(actionObject, updatedContext, _event);\n\n      case choose$1:\n        {\n          var chooseAction = actionObject;\n          var matchedActions = (_a = chooseAction.conds.find(function (condition) {\n            var guard = toGuard(condition.cond, machine.options.guards);\n            return !guard || evaluateGuard(machine, guard, updatedContext, _event, currentState);\n          })) === null || _a === void 0 ? void 0 : _a.actions;\n\n          if (!matchedActions) {\n            return [];\n          }\n\n          var resolved = resolveActions(machine, currentState, updatedContext, _event, toActionObjects(toArray(matchedActions), machine.options.actions));\n          updatedContext = resolved[1];\n          return resolved[0];\n        }\n\n      case pure$1:\n        {\n          var matchedActions = actionObject.get(updatedContext, _event.data);\n\n          if (!matchedActions) {\n            return [];\n          }\n\n          var resolved = resolveActions(machine, currentState, updatedContext, _event, toActionObjects(toArray(matchedActions), machine.options.actions));\n          updatedContext = resolved[1];\n          return resolved[0];\n        }\n\n      case stop$1:\n        {\n          return resolveStop(actionObject, updatedContext, _event);\n        }\n\n      default:\n        return toActionObject(actionObject, machine.options.actions);\n    }\n  }));\n  return [resolvedActions, updatedContext];\n}\n\nexport { after, assign, cancel, choose, done, doneInvoke, error, escalate, forwardTo, getActionFunction, initEvent, log, pure, raise, resolveActions, resolveLog, resolveRaise, resolveSend, resolveStop, respond, send, sendParent, sendUpdate, start, stop, toActionObject, toActionObjects, toActivityDefinition };","import { __values, __spread } from './_virtual/_tslib.js';\nimport { keys, flatten } from './utils.js';\n\nvar isLeafNode = function (stateNode) {\n  return stateNode.type === 'atomic' || stateNode.type === 'final';\n};\n\nfunction getChildren(stateNode) {\n  return keys(stateNode.states).map(function (key) {\n    return stateNode.states[key];\n  });\n}\n\nfunction getAllStateNodes(stateNode) {\n  var stateNodes = [stateNode];\n\n  if (isLeafNode(stateNode)) {\n    return stateNodes;\n  }\n\n  return stateNodes.concat(flatten(getChildren(stateNode).map(getAllStateNodes)));\n}\n\nfunction getConfiguration(prevStateNodes, stateNodes) {\n  var e_1, _a, e_2, _b, e_3, _c, e_4, _d;\n\n  var prevConfiguration = new Set(prevStateNodes);\n  var prevAdjList = getAdjList(prevConfiguration);\n  var configuration = new Set(stateNodes);\n\n  try {\n    // add all ancestors\n    for (var configuration_1 = __values(configuration), configuration_1_1 = configuration_1.next(); !configuration_1_1.done; configuration_1_1 = configuration_1.next()) {\n      var s = configuration_1_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (configuration_1_1 && !configuration_1_1.done && (_a = configuration_1.return)) _a.call(configuration_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  var adjList = getAdjList(configuration);\n\n  try {\n    // add descendants\n    for (var configuration_2 = __values(configuration), configuration_2_1 = configuration_2.next(); !configuration_2_1.done; configuration_2_1 = configuration_2.next()) {\n      var s = configuration_2_1.value; // if previously active, add existing child nodes\n\n      if (s.type === 'compound' && (!adjList.get(s) || !adjList.get(s).length)) {\n        if (prevAdjList.get(s)) {\n          prevAdjList.get(s).forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        } else {\n          s.initialStateNodes.forEach(function (sn) {\n            return configuration.add(sn);\n          });\n        }\n      } else {\n        if (s.type === 'parallel') {\n          try {\n            for (var _e = (e_3 = void 0, __values(getChildren(s))), _f = _e.next(); !_f.done; _f = _e.next()) {\n              var child = _f.value;\n\n              if (child.type === 'history') {\n                continue;\n              }\n\n              if (!configuration.has(child)) {\n                configuration.add(child);\n\n                if (prevAdjList.get(child)) {\n                  prevAdjList.get(child).forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                } else {\n                  child.initialStateNodes.forEach(function (sn) {\n                    return configuration.add(sn);\n                  });\n                }\n              }\n            }\n          } catch (e_3_1) {\n            e_3 = {\n              error: e_3_1\n            };\n          } finally {\n            try {\n              if (_f && !_f.done && (_c = _e.return)) _c.call(_e);\n            } finally {\n              if (e_3) throw e_3.error;\n            }\n          }\n        }\n      }\n    }\n  } catch (e_2_1) {\n    e_2 = {\n      error: e_2_1\n    };\n  } finally {\n    try {\n      if (configuration_2_1 && !configuration_2_1.done && (_b = configuration_2.return)) _b.call(configuration_2);\n    } finally {\n      if (e_2) throw e_2.error;\n    }\n  }\n\n  try {\n    // add all ancestors\n    for (var configuration_3 = __values(configuration), configuration_3_1 = configuration_3.next(); !configuration_3_1.done; configuration_3_1 = configuration_3.next()) {\n      var s = configuration_3_1.value;\n      var m = s.parent;\n\n      while (m && !configuration.has(m)) {\n        configuration.add(m);\n        m = m.parent;\n      }\n    }\n  } catch (e_4_1) {\n    e_4 = {\n      error: e_4_1\n    };\n  } finally {\n    try {\n      if (configuration_3_1 && !configuration_3_1.done && (_d = configuration_3.return)) _d.call(configuration_3);\n    } finally {\n      if (e_4) throw e_4.error;\n    }\n  }\n\n  return configuration;\n}\n\nfunction getValueFromAdj(baseNode, adjList) {\n  var childStateNodes = adjList.get(baseNode);\n\n  if (!childStateNodes) {\n    return {}; // todo: fix?\n  }\n\n  if (baseNode.type === 'compound') {\n    var childStateNode = childStateNodes[0];\n\n    if (childStateNode) {\n      if (isLeafNode(childStateNode)) {\n        return childStateNode.key;\n      }\n    } else {\n      return {};\n    }\n  }\n\n  var stateValue = {};\n  childStateNodes.forEach(function (csn) {\n    stateValue[csn.key] = getValueFromAdj(csn, adjList);\n  });\n  return stateValue;\n}\n\nfunction getAdjList(configuration) {\n  var e_5, _a;\n\n  var adjList = new Map();\n\n  try {\n    for (var configuration_4 = __values(configuration), configuration_4_1 = configuration_4.next(); !configuration_4_1.done; configuration_4_1 = configuration_4.next()) {\n      var s = configuration_4_1.value;\n\n      if (!adjList.has(s)) {\n        adjList.set(s, []);\n      }\n\n      if (s.parent) {\n        if (!adjList.has(s.parent)) {\n          adjList.set(s.parent, []);\n        }\n\n        adjList.get(s.parent).push(s);\n      }\n    }\n  } catch (e_5_1) {\n    e_5 = {\n      error: e_5_1\n    };\n  } finally {\n    try {\n      if (configuration_4_1 && !configuration_4_1.done && (_a = configuration_4.return)) _a.call(configuration_4);\n    } finally {\n      if (e_5) throw e_5.error;\n    }\n  }\n\n  return adjList;\n}\n\nfunction getValue(rootNode, configuration) {\n  var config = getConfiguration([rootNode], configuration);\n  return getValueFromAdj(rootNode, getAdjList(config));\n}\n\nfunction has(iterable, item) {\n  if (Array.isArray(iterable)) {\n    return iterable.some(function (member) {\n      return member === item;\n    });\n  }\n\n  if (iterable instanceof Set) {\n    return iterable.has(item);\n  }\n\n  return false; // TODO: fix\n}\n\nfunction nextEvents(configuration) {\n  return flatten(__spread(new Set(configuration.map(function (sn) {\n    return sn.ownEvents;\n  }))));\n}\n\nfunction isInFinalState(configuration, stateNode) {\n  if (stateNode.type === 'compound') {\n    return getChildren(stateNode).some(function (s) {\n      return s.type === 'final' && has(configuration, s);\n    });\n  }\n\n  if (stateNode.type === 'parallel') {\n    return getChildren(stateNode).every(function (sn) {\n      return isInFinalState(configuration, sn);\n    });\n  }\n\n  return false;\n}\n\nexport { getAdjList, getAllStateNodes, getChildren, getConfiguration, getValue, has, isInFinalState, isLeafNode, nextEvents };","import { __spread, __rest, __assign } from './_virtual/_tslib.js';\nimport { EMPTY_ACTIVITY_MAP } from './constants.js';\nimport { isString, matchesState, keys } from './utils.js';\nimport { nextEvents } from './stateUtils.js';\nimport { initEvent } from './actions.js';\n\nfunction stateValuesEqual(a, b) {\n  if (a === b) {\n    return true;\n  }\n\n  if (a === undefined || b === undefined) {\n    return false;\n  }\n\n  if (isString(a) || isString(b)) {\n    return a === b;\n  }\n\n  var aKeys = keys(a);\n  var bKeys = keys(b);\n  return aKeys.length === bKeys.length && aKeys.every(function (key) {\n    return stateValuesEqual(a[key], b[key]);\n  });\n}\n\nfunction isState(state) {\n  if (isString(state)) {\n    return false;\n  }\n\n  return 'value' in state && 'history' in state;\n}\n\nfunction bindActionToState(action, state) {\n  var exec = action.exec;\n\n  var boundAction = __assign(__assign({}, action), {\n    exec: exec !== undefined ? function () {\n      return exec(state.context, state.event, {\n        action: action,\n        state: state,\n        _event: state._event\n      });\n    } : undefined\n  });\n\n  return boundAction;\n}\n\nvar State =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new State instance.\r\n   * @param value The state value\r\n   * @param context The extended state\r\n   * @param historyValue The tree representing historical values of the state nodes\r\n   * @param history The previous state\r\n   * @param actions An array of action objects to execute as side-effects\r\n   * @param activities A mapping of activities and whether they are started (`true`) or stopped (`false`).\r\n   * @param meta\r\n   * @param events Internal event queue. Should be empty with run-to-completion semantics.\r\n   * @param configuration\r\n   */\n  function State(config) {\n    var _this = this;\n\n    this.actions = [];\n    this.activities = EMPTY_ACTIVITY_MAP;\n    this.meta = {};\n    this.events = [];\n    this.value = config.value;\n    this.context = config.context;\n    this._event = config._event;\n    this._sessionid = config._sessionid;\n    this.event = this._event.data;\n    this.historyValue = config.historyValue;\n    this.history = config.history;\n    this.actions = config.actions || [];\n    this.activities = config.activities || EMPTY_ACTIVITY_MAP;\n    this.meta = config.meta || {};\n    this.events = config.events || [];\n    this.matches = this.matches.bind(this);\n    this.toStrings = this.toStrings.bind(this);\n    this.configuration = config.configuration;\n    this.transitions = config.transitions;\n    this.children = config.children;\n    this.done = !!config.done;\n    Object.defineProperty(this, 'nextEvents', {\n      get: function () {\n        return nextEvents(_this.configuration);\n      }\n    });\n  }\n  /**\r\n   * Creates a new State instance for the given `stateValue` and `context`.\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.from = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (stateValue.context !== context) {\n        return new State({\n          value: stateValue.value,\n          context: context,\n          _event: stateValue._event,\n          _sessionid: null,\n          historyValue: stateValue.historyValue,\n          history: stateValue.history,\n          actions: [],\n          activities: stateValue.activities,\n          meta: {},\n          events: [],\n          configuration: [],\n          transitions: [],\n          children: {}\n        });\n      }\n\n      return stateValue;\n    }\n\n    var _event = initEvent;\n    return new State({\n      value: stateValue,\n      context: context,\n      _event: _event,\n      _sessionid: null,\n      historyValue: undefined,\n      history: undefined,\n      actions: [],\n      activities: undefined,\n      meta: undefined,\n      events: [],\n      configuration: [],\n      transitions: [],\n      children: {}\n    });\n  };\n  /**\r\n   * Creates a new State instance for the given `config`.\r\n   * @param config The state config\r\n   */\n\n\n  State.create = function (config) {\n    return new State(config);\n  };\n  /**\r\n   * Creates a new `State` instance for the given `stateValue` and `context` with no actions (side-effects).\r\n   * @param stateValue\r\n   * @param context\r\n   */\n\n\n  State.inert = function (stateValue, context) {\n    if (stateValue instanceof State) {\n      if (!stateValue.actions.length) {\n        return stateValue;\n      }\n\n      var _event = initEvent;\n      return new State({\n        value: stateValue.value,\n        context: context,\n        _event: _event,\n        _sessionid: null,\n        historyValue: stateValue.historyValue,\n        history: stateValue.history,\n        activities: stateValue.activities,\n        configuration: stateValue.configuration,\n        transitions: [],\n        children: {}\n      });\n    }\n\n    return State.from(stateValue, context);\n  };\n  /**\r\n   * Returns an array of all the string leaf state node paths.\r\n   * @param stateValue\r\n   * @param delimiter The character(s) that separate each subpath in the string state node path.\r\n   */\n\n\n  State.prototype.toStrings = function (stateValue, delimiter) {\n    var _this = this;\n\n    if (stateValue === void 0) {\n      stateValue = this.value;\n    }\n\n    if (delimiter === void 0) {\n      delimiter = '.';\n    }\n\n    if (isString(stateValue)) {\n      return [stateValue];\n    }\n\n    var valueKeys = keys(stateValue);\n    return valueKeys.concat.apply(valueKeys, __spread(valueKeys.map(function (key) {\n      return _this.toStrings(stateValue[key], delimiter).map(function (s) {\n        return key + delimiter + s;\n      });\n    })));\n  };\n\n  State.prototype.toJSON = function () {\n    var _a = this,\n        configuration = _a.configuration,\n        transitions = _a.transitions,\n        jsonValues = __rest(_a, [\"configuration\", \"transitions\"]);\n\n    return jsonValues;\n  };\n  /**\r\n   * Whether the current state value is a subset of the given parent state value.\r\n   * @param parentStateValue\r\n   */\n\n\n  State.prototype.matches = function (parentStateValue) {\n    return matchesState(parentStateValue, this.value);\n  };\n\n  return State;\n}();\n\nexport { State, bindActionToState, isState, stateValuesEqual };","/**\r\n * Maintains a stack of the current service in scope.\r\n * This is used to provide the correct service to spawn().\r\n */\nvar serviceStack = [];\n\nvar provide = function (service, fn) {\n  serviceStack.push(service);\n  var result = fn(service);\n  serviceStack.pop();\n  return result;\n};\n\nvar consume = function (fn) {\n  return fn(serviceStack[serviceStack.length - 1]);\n};\n\nexport { consume, provide };","import { toInvokeSource, mapContext, isMachine } from './utils.js';\nimport { provide } from './serviceScope.js';\n\nfunction createNullActor(id) {\n  return {\n    id: id,\n    send: function () {\n      return void 0;\n    },\n    subscribe: function () {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    },\n    toJSON: function () {\n      return {\n        id: id\n      };\n    }\n  };\n}\n/**\r\n * Creates a deferred actor that is able to be invoked given the provided\r\n * invocation information in its `.meta` value.\r\n *\r\n * @param invokeDefinition The meta information needed to invoke the actor.\r\n */\n\n\nfunction createInvocableActor(invokeDefinition, machine, context, _event) {\n  var _a;\n\n  var invokeSrc = toInvokeSource(invokeDefinition.src);\n  var serviceCreator = (_a = machine === null || machine === void 0 ? void 0 : machine.options.services) === null || _a === void 0 ? void 0 : _a[invokeSrc.type];\n  var resolvedData = invokeDefinition.data ? mapContext(invokeDefinition.data, context, _event) : undefined;\n  var tempActor = serviceCreator ? createDeferredActor(serviceCreator, invokeDefinition.id, resolvedData) : createNullActor(invokeDefinition.id);\n  tempActor.meta = invokeDefinition;\n  return tempActor;\n}\n\nfunction createDeferredActor(entity, id, data) {\n  var tempActor = createNullActor(id);\n  tempActor.deferred = true;\n\n  if (isMachine(entity)) {\n    // \"mute\" the existing service scope so potential spawned actors within the `.initialState` stay deferred here\n    tempActor.state = provide(undefined, function () {\n      return (data ? entity.withContext(data) : entity).initialState;\n    });\n  }\n\n  return tempActor;\n}\n\nfunction isActor(item) {\n  try {\n    return typeof item.send === 'function';\n  } catch (e) {\n    return false;\n  }\n}\n\nexport { createDeferredActor, createInvocableActor, createNullActor, isActor };","import { __assign, __rest } from './_virtual/_tslib.js';\nimport { invoke } from './actionTypes.js';\nimport './actions.js';\n\nfunction toInvokeSource(src) {\n  if (typeof src === 'string') {\n    var simpleSrc = {\n      type: src\n    };\n\n    simpleSrc.toString = function () {\n      return src;\n    }; // v4 compat - TODO: remove in v5\n\n\n    return simpleSrc;\n  }\n\n  return src;\n}\n\nfunction toInvokeDefinition(invokeConfig) {\n  return __assign(__assign({\n    type: invoke\n  }, invokeConfig), {\n    toJSON: function () {\n      var onDone = invokeConfig.onDone,\n          onError = invokeConfig.onError,\n          invokeDef = __rest(invokeConfig, [\"onDone\", \"onError\"]);\n\n      return __assign(__assign({}, invokeDef), {\n        type: invoke,\n        src: toInvokeSource(invokeConfig.src)\n      });\n    }\n  });\n}\n\nexport { toInvokeDefinition, toInvokeSource };","import { __assign, __values, __spread, __read, __rest } from './_virtual/_tslib.js';\nimport { STATE_DELIMITER } from './constants.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { mapValues, isArray, flatten, keys, toArray, toStateValue, isString, getEventType, matchesState, path, evaluateGuard, mapContext, toSCXMLEvent, pathToStateValue, isBuiltInEvent, partition, updateHistoryValue, toStatePath, mapFilterValues, warn, toStatePaths, nestedPath, normalizeTarget, toGuard, toTransitionConfigArray, isMachine, isFunction } from './utils.js';\nimport { SpecialTargets } from './types.js';\nimport { getAllStateNodes, getConfiguration, has, getChildren, isInFinalState, getValue, isLeafNode } from './stateUtils.js';\nimport { start as start$1, stop as stop$1, invoke, update, nullEvent, raise as raise$1, send as send$1 } from './actionTypes.js';\nimport { done, start, raise, stop, toActionObjects, resolveActions, doneInvoke, error, toActionObject, toActivityDefinition, after, send, cancel, initEvent } from './actions.js';\nimport { State, stateValuesEqual } from './State.js';\nimport { createInvocableActor } from './Actor.js';\nimport { toInvokeDefinition } from './invokeUtils.js';\nvar NULL_EVENT = '';\nvar STATE_IDENTIFIER = '#';\nvar WILDCARD = '*';\nvar EMPTY_OBJECT = {};\n\nvar isStateId = function (str) {\n  return str[0] === STATE_IDENTIFIER;\n};\n\nvar createDefaultOptions = function () {\n  return {\n    actions: {},\n    guards: {},\n    services: {},\n    activities: {},\n    delays: {}\n  };\n};\n\nvar validateArrayifiedTransitions = function (stateNode, event, transitions) {\n  var hasNonLastUnguardedTarget = transitions.slice(0, -1).some(function (transition) {\n    return !('cond' in transition) && !('in' in transition) && (isString(transition.target) || isMachine(transition.target));\n  });\n  var eventText = event === NULL_EVENT ? 'the transient event' : \"event '\" + event + \"'\";\n  warn(!hasNonLastUnguardedTarget, \"One or more transitions for \" + eventText + \" on state '\" + stateNode.id + \"' are unreachable. \" + \"Make sure that the default transition is the last one defined.\");\n};\n\nvar StateNode =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function StateNode(\n  /**\r\n   * The raw config used to create the machine.\r\n   */\n  config, options,\n  /**\r\n   * The initial extended state\r\n   */\n  context) {\n    var _this = this;\n\n    this.config = config;\n    this.context = context;\n    /**\r\n     * The order this state node appears. Corresponds to the implicit SCXML document order.\r\n     */\n\n    this.order = -1;\n    this.__xstatenode = true;\n    this.__cache = {\n      events: undefined,\n      relativeValue: new Map(),\n      initialStateValue: undefined,\n      initialState: undefined,\n      on: undefined,\n      transitions: undefined,\n      candidates: {},\n      delayedTransitions: undefined\n    };\n    this.idMap = {};\n    this.options = Object.assign(createDefaultOptions(), options);\n    this.parent = this.options._parent;\n    this.key = this.config.key || this.options._key || this.config.id || '(machine)';\n    this.machine = this.parent ? this.parent.machine : this;\n    this.path = this.parent ? this.parent.path.concat(this.key) : [];\n    this.delimiter = this.config.delimiter || (this.parent ? this.parent.delimiter : STATE_DELIMITER);\n    this.id = this.config.id || __spread([this.machine.key], this.path).join(this.delimiter);\n    this.version = this.parent ? this.parent.version : this.config.version;\n    this.type = this.config.type || (this.config.parallel ? 'parallel' : this.config.states && keys(this.config.states).length ? 'compound' : this.config.history ? 'history' : 'atomic');\n\n    if (!IS_PRODUCTION) {\n      warn(!('parallel' in this.config), \"The \\\"parallel\\\" property is deprecated and will be removed in version 4.1. \" + (this.config.parallel ? \"Replace with `type: 'parallel'`\" : \"Use `type: '\" + this.type + \"'`\") + \" in the config for state node '\" + this.id + \"' instead.\");\n    }\n\n    this.initial = this.config.initial;\n    this.states = this.config.states ? mapValues(this.config.states, function (stateConfig, key) {\n      var _a;\n\n      var stateNode = new StateNode(stateConfig, {\n        _parent: _this,\n        _key: key\n      });\n      Object.assign(_this.idMap, __assign((_a = {}, _a[stateNode.id] = stateNode, _a), stateNode.idMap));\n      return stateNode;\n    }) : EMPTY_OBJECT; // Document order\n\n    var order = 0;\n\n    function dfs(stateNode) {\n      var e_1, _a;\n\n      stateNode.order = order++;\n\n      try {\n        for (var _b = __values(getChildren(stateNode)), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var child = _c.value;\n          dfs(child);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    }\n\n    dfs(this); // History config\n\n    this.history = this.config.history === true ? 'shallow' : this.config.history || false;\n    this._transient = !!this.config.always || (!this.config.on ? false : Array.isArray(this.config.on) ? this.config.on.some(function (_a) {\n      var event = _a.event;\n      return event === NULL_EVENT;\n    }) : NULL_EVENT in this.config.on);\n    this.strict = !!this.config.strict; // TODO: deprecate (entry)\n\n    this.onEntry = toArray(this.config.entry || this.config.onEntry).map(function (action) {\n      return toActionObject(action);\n    }); // TODO: deprecate (exit)\n\n    this.onExit = toArray(this.config.exit || this.config.onExit).map(function (action) {\n      return toActionObject(action);\n    });\n    this.meta = this.config.meta;\n    this.doneData = this.type === 'final' ? this.config.data : undefined;\n    this.invoke = toArray(this.config.invoke).map(function (invokeConfig, i) {\n      var _a, _b;\n\n      if (isMachine(invokeConfig)) {\n        _this.machine.options.services = __assign((_a = {}, _a[invokeConfig.id] = invokeConfig, _a), _this.machine.options.services);\n        return toInvokeDefinition({\n          src: invokeConfig.id,\n          id: invokeConfig.id\n        });\n      } else if (isString(invokeConfig.src)) {\n        return toInvokeDefinition(__assign(__assign({}, invokeConfig), {\n          id: invokeConfig.id || invokeConfig.src,\n          src: invokeConfig.src\n        }));\n      } else if (isMachine(invokeConfig.src) || isFunction(invokeConfig.src)) {\n        var invokeSrc = _this.id + \":invocation[\" + i + \"]\"; // TODO: util function\n\n        _this.machine.options.services = __assign((_b = {}, _b[invokeSrc] = invokeConfig.src, _b), _this.machine.options.services);\n        return toInvokeDefinition(__assign(__assign({\n          id: invokeSrc\n        }, invokeConfig), {\n          src: invokeSrc\n        }));\n      } else {\n        var invokeSource = invokeConfig.src;\n        return toInvokeDefinition(__assign(__assign({\n          id: invokeSource.type\n        }, invokeConfig), {\n          src: invokeSource\n        }));\n      }\n    });\n    this.activities = toArray(this.config.activities).concat(this.invoke).map(function (activity) {\n      return toActivityDefinition(activity);\n    });\n    this.transition = this.transition.bind(this); // TODO: this is the real fix for initialization once\n    // state node getters are deprecated\n    // if (!this.parent) {\n    //   this._init();\n    // }\n  }\n\n  StateNode.prototype._init = function () {\n    if (this.__cache.transitions) {\n      return;\n    }\n\n    getAllStateNodes(this).forEach(function (stateNode) {\n      return stateNode.on;\n    });\n  };\n  /**\r\n   * Clones this state machine with custom options and context.\r\n   *\r\n   * @param options Options (actions, guards, activities, services) to recursively merge with the existing options.\r\n   * @param context Custom context (will override predefined context)\r\n   */\n\n\n  StateNode.prototype.withConfig = function (options, context) {\n    if (context === void 0) {\n      context = this.context;\n    }\n\n    var _a = this.options,\n        actions = _a.actions,\n        activities = _a.activities,\n        guards = _a.guards,\n        services = _a.services,\n        delays = _a.delays;\n    return new StateNode(this.config, {\n      actions: __assign(__assign({}, actions), options.actions),\n      activities: __assign(__assign({}, activities), options.activities),\n      guards: __assign(__assign({}, guards), options.guards),\n      services: __assign(__assign({}, services), options.services),\n      delays: __assign(__assign({}, delays), options.delays)\n    }, context);\n  };\n  /**\r\n   * Clones this state machine with custom context.\r\n   *\r\n   * @param context Custom context (will override predefined context, not recursive)\r\n   */\n\n\n  StateNode.prototype.withContext = function (context) {\n    return new StateNode(this.config, this.options, context);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"definition\", {\n    /**\r\n     * The well-structured state node definition.\r\n     */\n    get: function () {\n      return {\n        id: this.id,\n        key: this.key,\n        version: this.version,\n        context: this.context,\n        type: this.type,\n        initial: this.initial,\n        history: this.history,\n        states: mapValues(this.states, function (state) {\n          return state.definition;\n        }),\n        on: this.on,\n        transitions: this.transitions,\n        entry: this.onEntry,\n        exit: this.onExit,\n        activities: this.activities || [],\n        meta: this.meta,\n        order: this.order || -1,\n        data: this.doneData,\n        invoke: this.invoke\n      };\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.toJSON = function () {\n    return this.definition;\n  };\n\n  Object.defineProperty(StateNode.prototype, \"on\", {\n    /**\r\n     * The mapping of events to transitions.\r\n     */\n    get: function () {\n      if (this.__cache.on) {\n        return this.__cache.on;\n      }\n\n      var transitions = this.transitions;\n      return this.__cache.on = transitions.reduce(function (map, transition) {\n        map[transition.eventType] = map[transition.eventType] || [];\n        map[transition.eventType].push(transition);\n        return map;\n      }, {});\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"after\", {\n    get: function () {\n      return this.__cache.delayedTransitions || (this.__cache.delayedTransitions = this.getDelayedTransitions(), this.__cache.delayedTransitions);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"transitions\", {\n    /**\r\n     * All the transitions that can be taken from this state node.\r\n     */\n    get: function () {\n      return this.__cache.transitions || (this.__cache.transitions = this.formatTransitions(), this.__cache.transitions);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.getCandidates = function (eventName) {\n    if (this.__cache.candidates[eventName]) {\n      return this.__cache.candidates[eventName];\n    }\n\n    var transient = eventName === NULL_EVENT;\n    var candidates = this.transitions.filter(function (transition) {\n      var sameEventType = transition.eventType === eventName; // null events should only match against eventless transitions\n\n      return transient ? sameEventType : sameEventType || transition.eventType === WILDCARD;\n    });\n    this.__cache.candidates[eventName] = candidates;\n    return candidates;\n  };\n  /**\r\n   * All delayed transitions from the config.\r\n   */\n\n\n  StateNode.prototype.getDelayedTransitions = function () {\n    var _this = this;\n\n    var afterConfig = this.config.after;\n\n    if (!afterConfig) {\n      return [];\n    }\n\n    var mutateEntryExit = function (delay, i) {\n      var delayRef = isFunction(delay) ? _this.id + \":delay[\" + i + \"]\" : delay;\n      var eventType = after(delayRef, _this.id);\n\n      _this.onEntry.push(send(eventType, {\n        delay: delay\n      }));\n\n      _this.onExit.push(cancel(eventType));\n\n      return eventType;\n    };\n\n    var delayedTransitions = isArray(afterConfig) ? afterConfig.map(function (transition, i) {\n      var eventType = mutateEntryExit(transition.delay, i);\n      return __assign(__assign({}, transition), {\n        event: eventType\n      });\n    }) : flatten(keys(afterConfig).map(function (delay, i) {\n      var configTransition = afterConfig[delay];\n      var resolvedTransition = isString(configTransition) ? {\n        target: configTransition\n      } : configTransition;\n      var resolvedDelay = !isNaN(+delay) ? +delay : delay;\n      var eventType = mutateEntryExit(resolvedDelay, i);\n      return toArray(resolvedTransition).map(function (transition) {\n        return __assign(__assign({}, transition), {\n          event: eventType,\n          delay: resolvedDelay\n        });\n      });\n    }));\n    return delayedTransitions.map(function (delayedTransition) {\n      var delay = delayedTransition.delay;\n      return __assign(__assign({}, _this.formatTransition(delayedTransition)), {\n        delay: delay\n      });\n    });\n  };\n  /**\r\n   * Returns the state nodes represented by the current state value.\r\n   *\r\n   * @param state The state value or State instance\r\n   */\n\n\n  StateNode.prototype.getStateNodes = function (state) {\n    var _a;\n\n    var _this = this;\n\n    if (!state) {\n      return [];\n    }\n\n    var stateValue = state instanceof State ? state.value : toStateValue(state, this.delimiter);\n\n    if (isString(stateValue)) {\n      var initialStateValue = this.getStateNode(stateValue).initial;\n      return initialStateValue !== undefined ? this.getStateNodes((_a = {}, _a[stateValue] = initialStateValue, _a)) : [this.states[stateValue]];\n    }\n\n    var subStateKeys = keys(stateValue);\n    var subStateNodes = subStateKeys.map(function (subStateKey) {\n      return _this.getStateNode(subStateKey);\n    });\n    return subStateNodes.concat(subStateKeys.reduce(function (allSubStateNodes, subStateKey) {\n      var subStateNode = _this.getStateNode(subStateKey).getStateNodes(stateValue[subStateKey]);\n\n      return allSubStateNodes.concat(subStateNode);\n    }, []));\n  };\n  /**\r\n   * Returns `true` if this state node explicitly handles the given event.\r\n   *\r\n   * @param event The event in question\r\n   */\n\n\n  StateNode.prototype.handles = function (event) {\n    var eventType = getEventType(event);\n    return this.events.includes(eventType);\n  };\n  /**\r\n   * Resolves the given `state` to a new `State` instance relative to this machine.\r\n   *\r\n   * This ensures that `.events` and `.nextEvents` represent the correct values.\r\n   *\r\n   * @param state The state to resolve\r\n   */\n\n\n  StateNode.prototype.resolveState = function (state) {\n    var configuration = Array.from(getConfiguration([], this.getStateNodes(state.value)));\n    return new State(__assign(__assign({}, state), {\n      value: this.resolve(state.value),\n      configuration: configuration\n    }));\n  };\n\n  StateNode.prototype.transitionLeafNode = function (stateValue, state, _event) {\n    var stateNode = this.getStateNode(stateValue);\n    var next = stateNode.next(state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionCompoundNode = function (stateValue, state, _event) {\n    var subStateKeys = keys(stateValue);\n    var stateNode = this.getStateNode(subStateKeys[0]);\n\n    var next = stateNode._transition(stateValue[subStateKeys[0]], state, _event);\n\n    if (!next || !next.transitions.length) {\n      return this.next(state, _event);\n    }\n\n    return next;\n  };\n\n  StateNode.prototype.transitionParallelNode = function (stateValue, state, _event) {\n    var e_2, _a;\n\n    var transitionMap = {};\n\n    try {\n      for (var _b = __values(keys(stateValue)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var subStateKey = _c.value;\n        var subStateValue = stateValue[subStateKey];\n\n        if (!subStateValue) {\n          continue;\n        }\n\n        var subStateNode = this.getStateNode(subStateKey);\n\n        var next = subStateNode._transition(subStateValue, state, _event);\n\n        if (next) {\n          transitionMap[subStateKey] = next;\n        }\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    var stateTransitions = keys(transitionMap).map(function (key) {\n      return transitionMap[key];\n    });\n    var enabledTransitions = flatten(stateTransitions.map(function (st) {\n      return st.transitions;\n    }));\n    var willTransition = stateTransitions.some(function (st) {\n      return st.transitions.length > 0;\n    });\n\n    if (!willTransition) {\n      return this.next(state, _event);\n    }\n\n    var entryNodes = flatten(stateTransitions.map(function (t) {\n      return t.entrySet;\n    }));\n    var configuration = flatten(keys(transitionMap).map(function (key) {\n      return transitionMap[key].configuration;\n    }));\n    return {\n      transitions: enabledTransitions,\n      entrySet: entryNodes,\n      exitSet: flatten(stateTransitions.map(function (t) {\n        return t.exitSet;\n      })),\n      configuration: configuration,\n      source: state,\n      actions: flatten(keys(transitionMap).map(function (key) {\n        return transitionMap[key].actions;\n      }))\n    };\n  };\n\n  StateNode.prototype._transition = function (stateValue, state, _event) {\n    // leaf node\n    if (isString(stateValue)) {\n      return this.transitionLeafNode(stateValue, state, _event);\n    } // hierarchical node\n\n\n    if (keys(stateValue).length === 1) {\n      return this.transitionCompoundNode(stateValue, state, _event);\n    } // orthogonal node\n\n\n    return this.transitionParallelNode(stateValue, state, _event);\n  };\n\n  StateNode.prototype.next = function (state, _event) {\n    var e_3, _a;\n\n    var _this = this;\n\n    var eventName = _event.name;\n    var actions = [];\n    var nextStateNodes = [];\n    var selectedTransition;\n\n    try {\n      for (var _b = __values(this.getCandidates(eventName)), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var candidate = _c.value;\n        var cond = candidate.cond,\n            stateIn = candidate.in;\n        var resolvedContext = state.context;\n        var isInState = stateIn ? isString(stateIn) && isStateId(stateIn) ? // Check if in state by ID\n        state.matches(toStateValue(this.getStateNodeById(stateIn).path, this.delimiter)) : // Check if in state by relative grandparent\n        matchesState(toStateValue(stateIn, this.delimiter), path(this.path.slice(0, -2))(state.value)) : true;\n        var guardPassed = false;\n\n        try {\n          guardPassed = !cond || evaluateGuard(this.machine, cond, resolvedContext, _event, state);\n        } catch (err) {\n          throw new Error(\"Unable to evaluate guard '\" + (cond.name || cond.type) + \"' in transition for event '\" + eventName + \"' in state node '\" + this.id + \"':\\n\" + err.message);\n        }\n\n        if (guardPassed && isInState) {\n          if (candidate.target !== undefined) {\n            nextStateNodes = candidate.target;\n          }\n\n          actions.push.apply(actions, __spread(candidate.actions));\n          selectedTransition = candidate;\n          break;\n        }\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    if (!selectedTransition) {\n      return undefined;\n    }\n\n    if (!nextStateNodes.length) {\n      return {\n        transitions: [selectedTransition],\n        entrySet: [],\n        exitSet: [],\n        configuration: state.value ? [this] : [],\n        source: state,\n        actions: actions\n      };\n    }\n\n    var allNextStateNodes = flatten(nextStateNodes.map(function (stateNode) {\n      return _this.getRelativeStateNodes(stateNode, state.historyValue);\n    }));\n    var isInternal = !!selectedTransition.internal;\n    var reentryNodes = isInternal ? [] : flatten(allNextStateNodes.map(function (n) {\n      return _this.nodesFromChild(n);\n    }));\n    return {\n      transitions: [selectedTransition],\n      entrySet: reentryNodes,\n      exitSet: isInternal ? [] : [this],\n      configuration: allNextStateNodes,\n      source: state,\n      actions: actions\n    };\n  };\n\n  StateNode.prototype.nodesFromChild = function (childStateNode) {\n    if (childStateNode.escapes(this)) {\n      return [];\n    }\n\n    var nodes = [];\n    var marker = childStateNode;\n\n    while (marker && marker !== this) {\n      nodes.push(marker);\n      marker = marker.parent;\n    }\n\n    nodes.push(this); // inclusive\n\n    return nodes;\n  };\n  /**\r\n   * Whether the given state node \"escapes\" this state node. If the `stateNode` is equal to or the parent of\r\n   * this state node, it does not escape.\r\n   */\n\n\n  StateNode.prototype.escapes = function (stateNode) {\n    if (this === stateNode) {\n      return false;\n    }\n\n    var parent = this.parent;\n\n    while (parent) {\n      if (parent === stateNode) {\n        return false;\n      }\n\n      parent = parent.parent;\n    }\n\n    return true;\n  };\n\n  StateNode.prototype.getActions = function (transition, currentContext, _event, prevState) {\n    var e_4, _a, e_5, _b;\n\n    var prevConfig = getConfiguration([], prevState ? this.getStateNodes(prevState.value) : [this]);\n    var resolvedConfig = transition.configuration.length ? getConfiguration(prevConfig, transition.configuration) : prevConfig;\n\n    try {\n      for (var resolvedConfig_1 = __values(resolvedConfig), resolvedConfig_1_1 = resolvedConfig_1.next(); !resolvedConfig_1_1.done; resolvedConfig_1_1 = resolvedConfig_1.next()) {\n        var sn = resolvedConfig_1_1.value;\n\n        if (!has(prevConfig, sn)) {\n          transition.entrySet.push(sn);\n        }\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (resolvedConfig_1_1 && !resolvedConfig_1_1.done && (_a = resolvedConfig_1.return)) _a.call(resolvedConfig_1);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    try {\n      for (var prevConfig_1 = __values(prevConfig), prevConfig_1_1 = prevConfig_1.next(); !prevConfig_1_1.done; prevConfig_1_1 = prevConfig_1.next()) {\n        var sn = prevConfig_1_1.value;\n\n        if (!has(resolvedConfig, sn) || has(transition.exitSet, sn.parent)) {\n          transition.exitSet.push(sn);\n        }\n      }\n    } catch (e_5_1) {\n      e_5 = {\n        error: e_5_1\n      };\n    } finally {\n      try {\n        if (prevConfig_1_1 && !prevConfig_1_1.done && (_b = prevConfig_1.return)) _b.call(prevConfig_1);\n      } finally {\n        if (e_5) throw e_5.error;\n      }\n    }\n\n    if (!transition.source) {\n      transition.exitSet = []; // Ensure that root StateNode (machine) is entered\n\n      transition.entrySet.push(this);\n    }\n\n    var doneEvents = flatten(transition.entrySet.map(function (sn) {\n      var events = [];\n\n      if (sn.type !== 'final') {\n        return events;\n      }\n\n      var parent = sn.parent;\n\n      if (!parent.parent) {\n        return events;\n      }\n\n      events.push(done(sn.id, sn.doneData), // TODO: deprecate - final states should not emit done events for their own state.\n      done(parent.id, sn.doneData ? mapContext(sn.doneData, currentContext, _event) : undefined));\n      var grandparent = parent.parent;\n\n      if (grandparent.type === 'parallel') {\n        if (getChildren(grandparent).every(function (parentNode) {\n          return isInFinalState(transition.configuration, parentNode);\n        })) {\n          events.push(done(grandparent.id));\n        }\n      }\n\n      return events;\n    }));\n    transition.exitSet.sort(function (a, b) {\n      return b.order - a.order;\n    });\n    transition.entrySet.sort(function (a, b) {\n      return a.order - b.order;\n    });\n    var entryStates = new Set(transition.entrySet);\n    var exitStates = new Set(transition.exitSet);\n\n    var _c = __read([flatten(Array.from(entryStates).map(function (stateNode) {\n      return __spread(stateNode.activities.map(function (activity) {\n        return start(activity);\n      }), stateNode.onEntry);\n    })).concat(doneEvents.map(raise)), flatten(Array.from(exitStates).map(function (stateNode) {\n      return __spread(stateNode.onExit, stateNode.activities.map(function (activity) {\n        return stop(activity);\n      }));\n    }))], 2),\n        entryActions = _c[0],\n        exitActions = _c[1];\n\n    var actions = toActionObjects(exitActions.concat(transition.actions).concat(entryActions), this.machine.options.actions);\n    return actions;\n  };\n  /**\r\n   * Determines the next state given the current `state` and sent `event`.\r\n   *\r\n   * @param state The current State instance or state value\r\n   * @param event The event that was sent at the current state\r\n   * @param context The current context (extended state) of the current state\r\n   */\n\n\n  StateNode.prototype.transition = function (state, event, context) {\n    if (state === void 0) {\n      state = this.initialState;\n    }\n\n    var _event = toSCXMLEvent(event);\n\n    var currentState;\n\n    if (state instanceof State) {\n      currentState = context === undefined ? state : this.resolveState(State.from(state, context));\n    } else {\n      var resolvedStateValue = isString(state) ? this.resolve(pathToStateValue(this.getResolvedPath(state))) : this.resolve(state);\n      var resolvedContext = context ? context : this.machine.context;\n      currentState = this.resolveState(State.from(resolvedStateValue, resolvedContext));\n    }\n\n    if (!IS_PRODUCTION && _event.name === WILDCARD) {\n      throw new Error(\"An event cannot have the wildcard type ('\" + WILDCARD + \"')\");\n    }\n\n    if (this.strict) {\n      if (!this.events.includes(_event.name) && !isBuiltInEvent(_event.name)) {\n        throw new Error(\"Machine '\" + this.id + \"' does not accept event '\" + _event.name + \"'\");\n      }\n    }\n\n    var stateTransition = this._transition(currentState.value, currentState, _event) || {\n      transitions: [],\n      configuration: [],\n      entrySet: [],\n      exitSet: [],\n      source: currentState,\n      actions: []\n    };\n    var prevConfig = getConfiguration([], this.getStateNodes(currentState.value));\n    var resolvedConfig = stateTransition.configuration.length ? getConfiguration(prevConfig, stateTransition.configuration) : prevConfig;\n    stateTransition.configuration = __spread(resolvedConfig);\n    return this.resolveTransition(stateTransition, currentState, _event);\n  };\n\n  StateNode.prototype.resolveRaisedTransition = function (state, _event, originalEvent) {\n    var _a;\n\n    var currentActions = state.actions;\n    state = this.transition(state, _event); // Save original event to state\n    // TODO: this should be the raised event! Delete in V5 (breaking)\n\n    state._event = originalEvent;\n    state.event = originalEvent.data;\n\n    (_a = state.actions).unshift.apply(_a, __spread(currentActions));\n\n    return state;\n  };\n\n  StateNode.prototype.resolveTransition = function (stateTransition, currentState, _event, context) {\n    var e_6, _a;\n\n    var _this = this;\n\n    if (_event === void 0) {\n      _event = initEvent;\n    }\n\n    if (context === void 0) {\n      context = this.machine.context;\n    }\n\n    var configuration = stateTransition.configuration; // Transition will \"apply\" if:\n    // - this is the initial state (there is no current state)\n    // - OR there are transitions\n\n    var willTransition = !currentState || stateTransition.transitions.length > 0;\n    var resolvedStateValue = willTransition ? getValue(this.machine, configuration) : undefined;\n    var historyValue = currentState ? currentState.historyValue ? currentState.historyValue : stateTransition.source ? this.machine.historyValue(currentState.value) : undefined : undefined;\n    var currentContext = currentState ? currentState.context : context;\n    var actions = this.getActions(stateTransition, currentContext, _event, currentState);\n    var activities = currentState ? __assign({}, currentState.activities) : {};\n\n    try {\n      for (var actions_1 = __values(actions), actions_1_1 = actions_1.next(); !actions_1_1.done; actions_1_1 = actions_1.next()) {\n        var action = actions_1_1.value;\n\n        if (action.type === start$1) {\n          activities[action.activity.id || action.activity.type] = action;\n        } else if (action.type === stop$1) {\n          activities[action.activity.id || action.activity.type] = false;\n        }\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (actions_1_1 && !actions_1_1.done && (_a = actions_1.return)) _a.call(actions_1);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    var _b = __read(resolveActions(this, currentState, currentContext, _event, actions), 2),\n        resolvedActions = _b[0],\n        updatedContext = _b[1];\n\n    var _c = __read(partition(resolvedActions, function (action) {\n      return action.type === raise$1 || action.type === send$1 && action.to === SpecialTargets.Internal;\n    }), 2),\n        raisedEvents = _c[0],\n        nonRaisedActions = _c[1];\n\n    var invokeActions = resolvedActions.filter(function (action) {\n      var _a;\n\n      return action.type === start$1 && ((_a = action.activity) === null || _a === void 0 ? void 0 : _a.type) === invoke;\n    });\n    var children = invokeActions.reduce(function (acc, action) {\n      acc[action.activity.id] = createInvocableActor(action.activity, _this.machine, updatedContext, _event);\n      return acc;\n    }, currentState ? __assign({}, currentState.children) : {});\n    var resolvedConfiguration = resolvedStateValue ? stateTransition.configuration : currentState ? currentState.configuration : [];\n    var meta = resolvedConfiguration.reduce(function (acc, stateNode) {\n      if (stateNode.meta !== undefined) {\n        acc[stateNode.id] = stateNode.meta;\n      }\n\n      return acc;\n    }, {});\n    var isDone = isInFinalState(resolvedConfiguration, this);\n    var nextState = new State({\n      value: resolvedStateValue || currentState.value,\n      context: updatedContext,\n      _event: _event,\n      // Persist _sessionid between states\n      _sessionid: currentState ? currentState._sessionid : null,\n      historyValue: resolvedStateValue ? historyValue ? updateHistoryValue(historyValue, resolvedStateValue) : undefined : currentState ? currentState.historyValue : undefined,\n      history: !resolvedStateValue || stateTransition.source ? currentState : undefined,\n      actions: resolvedStateValue ? nonRaisedActions : [],\n      activities: resolvedStateValue ? activities : currentState ? currentState.activities : {},\n      meta: resolvedStateValue ? meta : currentState ? currentState.meta : undefined,\n      events: [],\n      configuration: resolvedConfiguration,\n      transitions: stateTransition.transitions,\n      children: children,\n      done: isDone\n    });\n    var didUpdateContext = currentContext !== updatedContext;\n    nextState.changed = _event.name === update || didUpdateContext; // Dispose of penultimate histories to prevent memory leaks\n\n    var history = nextState.history;\n\n    if (history) {\n      delete history.history;\n    }\n\n    if (!resolvedStateValue) {\n      return nextState;\n    }\n\n    var maybeNextState = nextState;\n\n    if (!isDone) {\n      var isTransient = this._transient || configuration.some(function (stateNode) {\n        return stateNode._transient;\n      });\n\n      if (isTransient) {\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, {\n          type: nullEvent\n        }, _event);\n      }\n\n      while (raisedEvents.length) {\n        var raisedEvent = raisedEvents.shift();\n        maybeNextState = this.resolveRaisedTransition(maybeNextState, raisedEvent._event, _event);\n      }\n    } // Detect if state changed\n\n\n    var changed = maybeNextState.changed || (history ? !!maybeNextState.actions.length || didUpdateContext || typeof history.value !== typeof maybeNextState.value || !stateValuesEqual(maybeNextState.value, history.value) : undefined);\n    maybeNextState.changed = changed; // Preserve original history after raised events\n\n    maybeNextState.historyValue = nextState.historyValue;\n    maybeNextState.history = history;\n    return maybeNextState;\n  };\n  /**\r\n   * Returns the child state node from its relative `stateKey`, or throws.\r\n   */\n\n\n  StateNode.prototype.getStateNode = function (stateKey) {\n    if (isStateId(stateKey)) {\n      return this.machine.getStateNodeById(stateKey);\n    }\n\n    if (!this.states) {\n      throw new Error(\"Unable to retrieve child state '\" + stateKey + \"' from '\" + this.id + \"'; no child states exist.\");\n    }\n\n    var result = this.states[stateKey];\n\n    if (!result) {\n      throw new Error(\"Child state '\" + stateKey + \"' does not exist on '\" + this.id + \"'\");\n    }\n\n    return result;\n  };\n  /**\r\n   * Returns the state node with the given `stateId`, or throws.\r\n   *\r\n   * @param stateId The state ID. The prefix \"#\" is removed.\r\n   */\n\n\n  StateNode.prototype.getStateNodeById = function (stateId) {\n    var resolvedStateId = isStateId(stateId) ? stateId.slice(STATE_IDENTIFIER.length) : stateId;\n\n    if (resolvedStateId === this.id) {\n      return this;\n    }\n\n    var stateNode = this.machine.idMap[resolvedStateId];\n\n    if (!stateNode) {\n      throw new Error(\"Child state node '#\" + resolvedStateId + \"' does not exist on machine '\" + this.id + \"'\");\n    }\n\n    return stateNode;\n  };\n  /**\r\n   * Returns the relative state node from the given `statePath`, or throws.\r\n   *\r\n   * @param statePath The string or string array relative path to the state node.\r\n   */\n\n\n  StateNode.prototype.getStateNodeByPath = function (statePath) {\n    if (typeof statePath === 'string' && isStateId(statePath)) {\n      try {\n        return this.getStateNodeById(statePath.slice(1));\n      } catch (e) {// try individual paths\n        // throw e;\n      }\n    }\n\n    var arrayStatePath = toStatePath(statePath, this.delimiter).slice();\n    var currentStateNode = this;\n\n    while (arrayStatePath.length) {\n      var key = arrayStatePath.shift();\n\n      if (!key.length) {\n        break;\n      }\n\n      currentStateNode = currentStateNode.getStateNode(key);\n    }\n\n    return currentStateNode;\n  };\n  /**\r\n   * Resolves a partial state value with its full representation in this machine.\r\n   *\r\n   * @param stateValue The partial state value to resolve.\r\n   */\n\n\n  StateNode.prototype.resolve = function (stateValue) {\n    var _a;\n\n    var _this = this;\n\n    if (!stateValue) {\n      return this.initialStateValue || EMPTY_OBJECT; // TODO: type-specific properties\n    }\n\n    switch (this.type) {\n      case 'parallel':\n        return mapValues(this.initialStateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(stateValue[subStateKey] || subStateValue) : EMPTY_OBJECT;\n        });\n\n      case 'compound':\n        if (isString(stateValue)) {\n          var subStateNode = this.getStateNode(stateValue);\n\n          if (subStateNode.type === 'parallel' || subStateNode.type === 'compound') {\n            return _a = {}, _a[stateValue] = subStateNode.initialStateValue, _a;\n          }\n\n          return stateValue;\n        }\n\n        if (!keys(stateValue).length) {\n          return this.initialStateValue || {};\n        }\n\n        return mapValues(stateValue, function (subStateValue, subStateKey) {\n          return subStateValue ? _this.getStateNode(subStateKey).resolve(subStateValue) : EMPTY_OBJECT;\n        });\n\n      default:\n        return stateValue || EMPTY_OBJECT;\n    }\n  };\n\n  StateNode.prototype.getResolvedPath = function (stateIdentifier) {\n    if (isStateId(stateIdentifier)) {\n      var stateNode = this.machine.idMap[stateIdentifier.slice(STATE_IDENTIFIER.length)];\n\n      if (!stateNode) {\n        throw new Error(\"Unable to find state node '\" + stateIdentifier + \"'\");\n      }\n\n      return stateNode.path;\n    }\n\n    return toStatePath(stateIdentifier, this.delimiter);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateValue\", {\n    get: function () {\n      var _a;\n\n      if (this.__cache.initialStateValue) {\n        return this.__cache.initialStateValue;\n      }\n\n      var initialStateValue;\n\n      if (this.type === 'parallel') {\n        initialStateValue = mapFilterValues(this.states, function (state) {\n          return state.initialStateValue || EMPTY_OBJECT;\n        }, function (stateNode) {\n          return !(stateNode.type === 'history');\n        });\n      } else if (this.initial !== undefined) {\n        if (!this.states[this.initial]) {\n          throw new Error(\"Initial state '\" + this.initial + \"' not found on '\" + this.key + \"'\");\n        }\n\n        initialStateValue = isLeafNode(this.states[this.initial]) ? this.initial : (_a = {}, _a[this.initial] = this.states[this.initial].initialStateValue, _a);\n      }\n\n      this.__cache.initialStateValue = initialStateValue;\n      return this.__cache.initialStateValue;\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.getInitialState = function (stateValue, context) {\n    var configuration = this.getStateNodes(stateValue);\n    return this.resolveTransition({\n      configuration: configuration,\n      entrySet: configuration,\n      exitSet: [],\n      transitions: [],\n      source: undefined,\n      actions: []\n    }, undefined, undefined, context);\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialState\", {\n    /**\r\n     * The initial State instance, which includes all actions to be executed from\r\n     * entering the initial state.\r\n     */\n    get: function () {\n      this._init(); // TODO: this should be in the constructor (see note in constructor)\n\n\n      var initialStateValue = this.initialStateValue;\n\n      if (!initialStateValue) {\n        throw new Error(\"Cannot retrieve initial state from simple state '\" + this.id + \"'.\");\n      }\n\n      return this.getInitialState(initialStateValue);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"target\", {\n    /**\r\n     * The target state value of the history state node, if it exists. This represents the\r\n     * default state value to transition to if no history value exists yet.\r\n     */\n    get: function () {\n      var target;\n\n      if (this.type === 'history') {\n        var historyConfig = this.config;\n\n        if (isString(historyConfig.target)) {\n          target = isStateId(historyConfig.target) ? pathToStateValue(this.machine.getStateNodeById(historyConfig.target).path.slice(this.path.length - 1)) : historyConfig.target;\n        } else {\n          target = historyConfig.target;\n        }\n      }\n\n      return target;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Returns the leaf nodes from a state path relative to this state node.\r\n   *\r\n   * @param relativeStateId The relative state path to retrieve the state nodes\r\n   * @param history The previous state to retrieve history\r\n   * @param resolve Whether state nodes should resolve to initial child state nodes\r\n   */\n\n  StateNode.prototype.getRelativeStateNodes = function (relativeStateId, historyValue, resolve) {\n    if (resolve === void 0) {\n      resolve = true;\n    }\n\n    return resolve ? relativeStateId.type === 'history' ? relativeStateId.resolveHistory(historyValue) : relativeStateId.initialStateNodes : [relativeStateId];\n  };\n\n  Object.defineProperty(StateNode.prototype, \"initialStateNodes\", {\n    get: function () {\n      var _this = this;\n\n      if (isLeafNode(this)) {\n        return [this];\n      } // Case when state node is compound but no initial state is defined\n\n\n      if (this.type === 'compound' && !this.initial) {\n        if (!IS_PRODUCTION) {\n          warn(false, \"Compound state node '\" + this.id + \"' has no initial state.\");\n        }\n\n        return [this];\n      }\n\n      var initialStateNodePaths = toStatePaths(this.initialStateValue);\n      return flatten(initialStateNodePaths.map(function (initialPath) {\n        return _this.getFromRelativePath(initialPath);\n      }));\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Retrieves state nodes from a relative path to this state node.\r\n   *\r\n   * @param relativePath The relative path from this state node\r\n   * @param historyValue\r\n   */\n\n  StateNode.prototype.getFromRelativePath = function (relativePath) {\n    if (!relativePath.length) {\n      return [this];\n    }\n\n    var _a = __read(relativePath),\n        stateKey = _a[0],\n        childStatePath = _a.slice(1);\n\n    if (!this.states) {\n      throw new Error(\"Cannot retrieve subPath '\" + stateKey + \"' from node with no states\");\n    }\n\n    var childStateNode = this.getStateNode(stateKey);\n\n    if (childStateNode.type === 'history') {\n      return childStateNode.resolveHistory();\n    }\n\n    if (!this.states[stateKey]) {\n      throw new Error(\"Child state '\" + stateKey + \"' does not exist on '\" + this.id + \"'\");\n    }\n\n    return this.states[stateKey].getFromRelativePath(childStatePath);\n  };\n\n  StateNode.prototype.historyValue = function (relativeStateValue) {\n    if (!keys(this.states).length) {\n      return undefined;\n    }\n\n    return {\n      current: relativeStateValue || this.initialStateValue,\n      states: mapFilterValues(this.states, function (stateNode, key) {\n        if (!relativeStateValue) {\n          return stateNode.historyValue();\n        }\n\n        var subStateValue = isString(relativeStateValue) ? undefined : relativeStateValue[key];\n        return stateNode.historyValue(subStateValue || stateNode.initialStateValue);\n      }, function (stateNode) {\n        return !stateNode.history;\n      })\n    };\n  };\n  /**\r\n   * Resolves to the historical value(s) of the parent state node,\r\n   * represented by state nodes.\r\n   *\r\n   * @param historyValue\r\n   */\n\n\n  StateNode.prototype.resolveHistory = function (historyValue) {\n    var _this = this;\n\n    if (this.type !== 'history') {\n      return [this];\n    }\n\n    var parent = this.parent;\n\n    if (!historyValue) {\n      var historyTarget = this.target;\n      return historyTarget ? flatten(toStatePaths(historyTarget).map(function (relativeChildPath) {\n        return parent.getFromRelativePath(relativeChildPath);\n      })) : parent.initialStateNodes;\n    }\n\n    var subHistoryValue = nestedPath(parent.path, 'states')(historyValue).current;\n\n    if (isString(subHistoryValue)) {\n      return [parent.getStateNode(subHistoryValue)];\n    }\n\n    return flatten(toStatePaths(subHistoryValue).map(function (subStatePath) {\n      return _this.history === 'deep' ? parent.getFromRelativePath(subStatePath) : [parent.states[subStatePath[0]]];\n    }));\n  };\n\n  Object.defineProperty(StateNode.prototype, \"stateIds\", {\n    /**\r\n     * All the state node IDs of this state node and its descendant state nodes.\r\n     */\n    get: function () {\n      var _this = this;\n\n      var childStateIds = flatten(keys(this.states).map(function (stateKey) {\n        return _this.states[stateKey].stateIds;\n      }));\n      return [this.id].concat(childStateIds);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"events\", {\n    /**\r\n     * All the event types accepted by this state node and its descendants.\r\n     */\n    get: function () {\n      var e_7, _a, e_8, _b;\n\n      if (this.__cache.events) {\n        return this.__cache.events;\n      }\n\n      var states = this.states;\n      var events = new Set(this.ownEvents);\n\n      if (states) {\n        try {\n          for (var _c = __values(keys(states)), _d = _c.next(); !_d.done; _d = _c.next()) {\n            var stateId = _d.value;\n            var state = states[stateId];\n\n            if (state.states) {\n              try {\n                for (var _e = (e_8 = void 0, __values(state.events)), _f = _e.next(); !_f.done; _f = _e.next()) {\n                  var event_1 = _f.value;\n                  events.add(\"\" + event_1);\n                }\n              } catch (e_8_1) {\n                e_8 = {\n                  error: e_8_1\n                };\n              } finally {\n                try {\n                  if (_f && !_f.done && (_b = _e.return)) _b.call(_e);\n                } finally {\n                  if (e_8) throw e_8.error;\n                }\n              }\n            }\n          }\n        } catch (e_7_1) {\n          e_7 = {\n            error: e_7_1\n          };\n        } finally {\n          try {\n            if (_d && !_d.done && (_a = _c.return)) _a.call(_c);\n          } finally {\n            if (e_7) throw e_7.error;\n          }\n        }\n      }\n\n      return this.__cache.events = Array.from(events);\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(StateNode.prototype, \"ownEvents\", {\n    /**\r\n     * All the events that have transitions directly from this state node.\r\n     *\r\n     * Excludes any inert events.\r\n     */\n    get: function () {\n      var events = new Set(this.transitions.filter(function (transition) {\n        return !(!transition.target && !transition.actions.length && transition.internal);\n      }).map(function (transition) {\n        return transition.eventType;\n      }));\n      return Array.from(events);\n    },\n    enumerable: false,\n    configurable: true\n  });\n\n  StateNode.prototype.resolveTarget = function (_target) {\n    var _this = this;\n\n    if (_target === undefined) {\n      // an undefined target signals that the state node should not transition from that state when receiving that event\n      return undefined;\n    }\n\n    return _target.map(function (target) {\n      if (!isString(target)) {\n        return target;\n      }\n\n      var isInternalTarget = target[0] === _this.delimiter; // If internal target is defined on machine,\n      // do not include machine key on target\n\n      if (isInternalTarget && !_this.parent) {\n        return _this.getStateNodeByPath(target.slice(1));\n      }\n\n      var resolvedTarget = isInternalTarget ? _this.key + target : target;\n\n      if (_this.parent) {\n        try {\n          var targetStateNode = _this.parent.getStateNodeByPath(resolvedTarget);\n\n          return targetStateNode;\n        } catch (err) {\n          throw new Error(\"Invalid transition definition for state node '\" + _this.id + \"':\\n\" + err.message);\n        }\n      } else {\n        return _this.getStateNodeByPath(resolvedTarget);\n      }\n    });\n  };\n\n  StateNode.prototype.formatTransition = function (transitionConfig) {\n    var _this = this;\n\n    var normalizedTarget = normalizeTarget(transitionConfig.target);\n    var internal = 'internal' in transitionConfig ? transitionConfig.internal : normalizedTarget ? normalizedTarget.some(function (_target) {\n      return isString(_target) && _target[0] === _this.delimiter;\n    }) : true;\n    var guards = this.machine.options.guards;\n    var target = this.resolveTarget(normalizedTarget);\n\n    var transition = __assign(__assign({}, transitionConfig), {\n      actions: toActionObjects(toArray(transitionConfig.actions)),\n      cond: toGuard(transitionConfig.cond, guards),\n      target: target,\n      source: this,\n      internal: internal,\n      eventType: transitionConfig.event,\n      toJSON: function () {\n        return __assign(__assign({}, transition), {\n          target: transition.target ? transition.target.map(function (t) {\n            return \"#\" + t.id;\n          }) : undefined,\n          source: \"#\" + _this.id\n        });\n      }\n    });\n\n    return transition;\n  };\n\n  StateNode.prototype.formatTransitions = function () {\n    var e_9, _a;\n\n    var _this = this;\n\n    var onConfig;\n\n    if (!this.config.on) {\n      onConfig = [];\n    } else if (Array.isArray(this.config.on)) {\n      onConfig = this.config.on;\n    } else {\n      var _b = this.config.on,\n          _c = WILDCARD,\n          _d = _b[_c],\n          wildcardConfigs = _d === void 0 ? [] : _d,\n          strictTransitionConfigs_1 = __rest(_b, [typeof _c === \"symbol\" ? _c : _c + \"\"]);\n\n      onConfig = flatten(keys(strictTransitionConfigs_1).map(function (key) {\n        if (!IS_PRODUCTION && key === NULL_EVENT) {\n          warn(false, \"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. \" + (\"Please check the `on` configuration for \\\"#\" + _this.id + \"\\\".\"));\n        }\n\n        var transitionConfigArray = toTransitionConfigArray(key, strictTransitionConfigs_1[key]);\n\n        if (!IS_PRODUCTION) {\n          validateArrayifiedTransitions(_this, key, transitionConfigArray);\n        }\n\n        return transitionConfigArray;\n      }).concat(toTransitionConfigArray(WILDCARD, wildcardConfigs)));\n    }\n\n    var eventlessConfig = this.config.always ? toTransitionConfigArray('', this.config.always) : [];\n    var doneConfig = this.config.onDone ? toTransitionConfigArray(String(done(this.id)), this.config.onDone) : [];\n\n    if (!IS_PRODUCTION) {\n      warn(!(this.config.onDone && !this.parent), \"Root nodes cannot have an \\\".onDone\\\" transition. Please check the config of \\\"\" + this.id + \"\\\".\");\n    }\n\n    var invokeConfig = flatten(this.invoke.map(function (invokeDef) {\n      var settleTransitions = [];\n\n      if (invokeDef.onDone) {\n        settleTransitions.push.apply(settleTransitions, __spread(toTransitionConfigArray(String(doneInvoke(invokeDef.id)), invokeDef.onDone)));\n      }\n\n      if (invokeDef.onError) {\n        settleTransitions.push.apply(settleTransitions, __spread(toTransitionConfigArray(String(error(invokeDef.id)), invokeDef.onError)));\n      }\n\n      return settleTransitions;\n    }));\n    var delayedTransitions = this.after;\n    var formattedTransitions = flatten(__spread(doneConfig, invokeConfig, onConfig, eventlessConfig).map(function (transitionConfig) {\n      return toArray(transitionConfig).map(function (transition) {\n        return _this.formatTransition(transition);\n      });\n    }));\n\n    try {\n      for (var delayedTransitions_1 = __values(delayedTransitions), delayedTransitions_1_1 = delayedTransitions_1.next(); !delayedTransitions_1_1.done; delayedTransitions_1_1 = delayedTransitions_1.next()) {\n        var delayedTransition = delayedTransitions_1_1.value;\n        formattedTransitions.push(delayedTransition);\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (delayedTransitions_1_1 && !delayedTransitions_1_1.done && (_a = delayedTransitions_1.return)) _a.call(delayedTransitions_1);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    }\n\n    return formattedTransitions;\n  };\n\n  return StateNode;\n}();\n\nexport { StateNode };","import { StateNode } from './StateNode.js';\n\nfunction Machine(config, options, initialContext) {\n  if (initialContext === void 0) {\n    initialContext = config.context;\n  }\n\n  var resolvedInitialContext = typeof initialContext === 'function' ? initialContext() : initialContext;\n  return new StateNode(config, options, resolvedInitialContext);\n}\n\nfunction createMachine(config, options) {\n  var resolvedInitialContext = typeof config.context === 'function' ? config.context() : config.context;\n  return new StateNode(config, options, resolvedInitialContext);\n}\n\nexport { Machine, createMachine };","import { __assign } from './_virtual/_tslib.js';\nvar defaultOptions = {\n  deferEvents: false\n};\n\nvar Scheduler =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  function Scheduler(options) {\n    this.processingEvent = false;\n    this.queue = [];\n    this.initialized = false;\n    this.options = __assign(__assign({}, defaultOptions), options);\n  }\n\n  Scheduler.prototype.initialize = function (callback) {\n    this.initialized = true;\n\n    if (callback) {\n      if (!this.options.deferEvents) {\n        this.schedule(callback);\n        return;\n      }\n\n      this.process(callback);\n    }\n\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.schedule = function (task) {\n    if (!this.initialized || this.processingEvent) {\n      this.queue.push(task);\n      return;\n    }\n\n    if (this.queue.length !== 0) {\n      throw new Error('Event queue should be empty when it is not processing events');\n    }\n\n    this.process(task);\n    this.flushEvents();\n  };\n\n  Scheduler.prototype.clear = function () {\n    this.queue = [];\n  };\n\n  Scheduler.prototype.flushEvents = function () {\n    var nextCallback = this.queue.shift();\n\n    while (nextCallback) {\n      this.process(nextCallback);\n      nextCallback = this.queue.shift();\n    }\n  };\n\n  Scheduler.prototype.process = function (callback) {\n    this.processingEvent = true;\n\n    try {\n      callback();\n    } catch (e) {\n      // there is no use to keep the future events\n      // as the situation is not anymore the same\n      this.clear();\n      throw e;\n    } finally {\n      this.processingEvent = false;\n    }\n  };\n\n  return Scheduler;\n}();\n\nexport { Scheduler };","var children = /*#__PURE__*/new Map();\nvar sessionIdIndex = 0;\nvar registry = {\n  bookId: function () {\n    return \"x:\" + sessionIdIndex++;\n  },\n  register: function (id, actor) {\n    children.set(id, actor);\n    return id;\n  },\n  get: function (id) {\n    return children.get(id);\n  },\n  free: function (id) {\n    children.delete(id);\n  }\n};\nexport { registry };","import { IS_PRODUCTION } from './environment.js';\n\nfunction getDevTools() {\n  var w = window;\n\n  if (!!w.__xstate__) {\n    return w.__xstate__;\n  }\n\n  return undefined;\n}\n\nfunction registerService(service) {\n  if (IS_PRODUCTION || typeof window === 'undefined') {\n    return;\n  }\n\n  var devTools = getDevTools();\n\n  if (devTools) {\n    devTools.register(service);\n  }\n}\n\nexport { registerService };","import { __values, __assign, __spread } from './_virtual/_tslib.js';\nimport { IS_PRODUCTION } from './environment.js';\nimport { warn, mapContext, isFunction, keys, toSCXMLEvent, toInvokeSource, isPromiseLike, isObservable, isMachine, reportUnhandledExceptionOnInvocation, symbolObservable, isArray, toEventObject, isString, uniqueId } from './utils.js';\nimport { ActionTypes, SpecialTargets } from './types.js';\nimport { isInFinalState } from './stateUtils.js';\nimport { errorPlatform, log, stop, start, cancel, send, update, error as error$1 } from './actionTypes.js';\nimport { doneInvoke, initEvent, getActionFunction, error } from './actions.js';\nimport { isState, State, bindActionToState } from './State.js';\nimport { provide, consume } from './serviceScope.js';\nimport { isActor, createDeferredActor } from './Actor.js';\nimport { Scheduler } from './scheduler.js';\nimport { registry } from './registry.js';\nimport { registerService } from './devTools.js';\nvar DEFAULT_SPAWN_OPTIONS = {\n  sync: false,\n  autoForward: false\n};\nvar InterpreterStatus;\n\n(function (InterpreterStatus) {\n  InterpreterStatus[InterpreterStatus[\"NotStarted\"] = 0] = \"NotStarted\";\n  InterpreterStatus[InterpreterStatus[\"Running\"] = 1] = \"Running\";\n  InterpreterStatus[InterpreterStatus[\"Stopped\"] = 2] = \"Stopped\";\n})(InterpreterStatus || (InterpreterStatus = {}));\n\nvar Interpreter =\n/*#__PURE__*/\n\n/** @class */\nfunction () {\n  /**\r\n   * Creates a new Interpreter instance (i.e., service) for the given machine with the provided options, if any.\r\n   *\r\n   * @param machine The machine to be interpreted\r\n   * @param options Interpreter options\r\n   */\n  function Interpreter(machine, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = Interpreter.defaultOptions;\n    }\n\n    this.machine = machine;\n    this.scheduler = new Scheduler();\n    this.delayedEventsMap = {};\n    this.listeners = new Set();\n    this.contextListeners = new Set();\n    this.stopListeners = new Set();\n    this.doneListeners = new Set();\n    this.eventListeners = new Set();\n    this.sendListeners = new Set();\n    /**\r\n     * Whether the service is started.\r\n     */\n\n    this.initialized = false;\n    this.status = InterpreterStatus.NotStarted;\n    this.children = new Map();\n    this.forwardTo = new Set();\n    /**\r\n     * Alias for Interpreter.prototype.start\r\n     */\n\n    this.init = this.start;\n    /**\r\n     * Sends an event to the running interpreter to trigger a transition.\r\n     *\r\n     * An array of events (batched) can be sent as well, which will send all\r\n     * batched events to the running interpreter. The listeners will be\r\n     * notified only **once** when all events are processed.\r\n     *\r\n     * @param event The event(s) to send\r\n     */\n\n    this.send = function (event, payload) {\n      if (isArray(event)) {\n        _this.batch(event);\n\n        return _this.state;\n      }\n\n      var _event = toSCXMLEvent(toEventObject(event, payload));\n\n      if (_this.status === InterpreterStatus.Stopped) {\n        // do nothing\n        if (!IS_PRODUCTION) {\n          warn(false, \"Event \\\"\" + _event.name + \"\\\" was sent to stopped service \\\"\" + _this.machine.id + \"\\\". This service has already reached its final state, and will not transition.\\nEvent: \" + JSON.stringify(_event.data));\n        }\n\n        return _this.state;\n      }\n\n      if (_this.status !== InterpreterStatus.Running && !_this.options.deferEvents) {\n        throw new Error(\"Event \\\"\" + _event.name + \"\\\" was sent to uninitialized service \\\"\" + _this.machine.id + \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\\nEvent: \" + JSON.stringify(_event.data));\n      }\n\n      _this.scheduler.schedule(function () {\n        // Forward copy of event to child actors\n        _this.forward(_event);\n\n        var nextState = _this.nextState(_event);\n\n        _this.update(nextState, _event);\n      });\n\n      return _this._state; // TODO: deprecate (should return void)\n      // tslint:disable-next-line:semicolon\n    };\n\n    this.sendTo = function (event, to) {\n      var isParent = _this.parent && (to === SpecialTargets.Parent || _this.parent.id === to);\n      var target = isParent ? _this.parent : isActor(to) ? to : _this.children.get(to) || registry.get(to);\n\n      if (!target) {\n        if (!isParent) {\n          throw new Error(\"Unable to send event to child '\" + to + \"' from service '\" + _this.id + \"'.\");\n        } // tslint:disable-next-line:no-console\n\n\n        if (!IS_PRODUCTION) {\n          warn(false, \"Service '\" + _this.id + \"' has no parent: unable to send event \" + event.type);\n        }\n\n        return;\n      }\n\n      if ('machine' in target) {\n        // Send SCXML events to machines\n        target.send(__assign(__assign({}, event), {\n          name: event.name === error$1 ? \"\" + error(_this.id) : event.name,\n          origin: _this.sessionId\n        }));\n      } else {\n        // Send normal events to other targets\n        target.send(event.data);\n      }\n    };\n\n    var resolvedOptions = __assign(__assign({}, Interpreter.defaultOptions), options);\n\n    var clock = resolvedOptions.clock,\n        logger = resolvedOptions.logger,\n        parent = resolvedOptions.parent,\n        id = resolvedOptions.id;\n    var resolvedId = id !== undefined ? id : machine.id;\n    this.id = resolvedId;\n    this.logger = logger;\n    this.clock = clock;\n    this.parent = parent;\n    this.options = resolvedOptions;\n    this.scheduler = new Scheduler({\n      deferEvents: this.options.deferEvents\n    });\n    this.sessionId = registry.bookId();\n  }\n\n  Object.defineProperty(Interpreter.prototype, \"initialState\", {\n    get: function () {\n      var _this = this;\n\n      if (this._initialState) {\n        return this._initialState;\n      }\n\n      return provide(this, function () {\n        _this._initialState = _this.machine.initialState;\n        return _this._initialState;\n      });\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Interpreter.prototype, \"state\", {\n    get: function () {\n      if (!IS_PRODUCTION) {\n        warn(this.status !== InterpreterStatus.NotStarted, \"Attempted to read state from uninitialized service '\" + this.id + \"'. Make sure the service is started first.\");\n      }\n\n      return this._state;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  /**\r\n   * Executes the actions of the given state, with that state's `context` and `event`.\r\n   *\r\n   * @param state The state whose actions will be executed\r\n   * @param actionsConfig The action implementations to use\r\n   */\n\n  Interpreter.prototype.execute = function (state, actionsConfig) {\n    var e_1, _a;\n\n    try {\n      for (var _b = __values(state.actions), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var action = _c.value;\n        this.exec(action, state, actionsConfig);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.update = function (state, _event) {\n    var e_2, _a, e_3, _b, e_4, _c, e_5, _d;\n\n    var _this = this; // Attach session ID to state\n\n\n    state._sessionid = this.sessionId; // Update state\n\n    this._state = state; // Execute actions\n\n    if (this.options.execute) {\n      this.execute(this.state);\n    } // Update children\n\n\n    this.children.forEach(function (child) {\n      _this.state.children[child.id] = child;\n    }); // Dev tools\n\n    if (this.devTools) {\n      this.devTools.send(_event.data, state);\n    } // Execute listeners\n\n\n    if (state.event) {\n      try {\n        for (var _e = __values(this.eventListeners), _f = _e.next(); !_f.done; _f = _e.next()) {\n          var listener = _f.value;\n          listener(state.event);\n        }\n      } catch (e_2_1) {\n        e_2 = {\n          error: e_2_1\n        };\n      } finally {\n        try {\n          if (_f && !_f.done && (_a = _e.return)) _a.call(_e);\n        } finally {\n          if (e_2) throw e_2.error;\n        }\n      }\n    }\n\n    try {\n      for (var _g = __values(this.listeners), _h = _g.next(); !_h.done; _h = _g.next()) {\n        var listener = _h.value;\n        listener(state, state.event);\n      }\n    } catch (e_3_1) {\n      e_3 = {\n        error: e_3_1\n      };\n    } finally {\n      try {\n        if (_h && !_h.done && (_b = _g.return)) _b.call(_g);\n      } finally {\n        if (e_3) throw e_3.error;\n      }\n    }\n\n    try {\n      for (var _j = __values(this.contextListeners), _k = _j.next(); !_k.done; _k = _j.next()) {\n        var contextListener = _k.value;\n        contextListener(this.state.context, this.state.history ? this.state.history.context : undefined);\n      }\n    } catch (e_4_1) {\n      e_4 = {\n        error: e_4_1\n      };\n    } finally {\n      try {\n        if (_k && !_k.done && (_c = _j.return)) _c.call(_j);\n      } finally {\n        if (e_4) throw e_4.error;\n      }\n    }\n\n    var isDone = isInFinalState(state.configuration || [], this.machine);\n\n    if (this.state.configuration && isDone) {\n      // get final child state node\n      var finalChildStateNode = state.configuration.find(function (sn) {\n        return sn.type === 'final' && sn.parent === _this.machine;\n      });\n      var doneData = finalChildStateNode && finalChildStateNode.doneData ? mapContext(finalChildStateNode.doneData, state.context, _event) : undefined;\n\n      try {\n        for (var _l = __values(this.doneListeners), _m = _l.next(); !_m.done; _m = _l.next()) {\n          var listener = _m.value;\n          listener(doneInvoke(this.id, doneData));\n        }\n      } catch (e_5_1) {\n        e_5 = {\n          error: e_5_1\n        };\n      } finally {\n        try {\n          if (_m && !_m.done && (_d = _l.return)) _d.call(_l);\n        } finally {\n          if (e_5) throw e_5.error;\n        }\n      }\n\n      this.stop();\n    }\n  };\n  /*\r\n   * Adds a listener that is notified whenever a state transition happens. The listener is called with\r\n   * the next state and the event object that caused the state transition.\r\n   *\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onTransition = function (listener) {\n    this.listeners.add(listener); // Send current state to listener\n\n    if (this.status === InterpreterStatus.Running) {\n      listener(this.state, this.state.event);\n    }\n\n    return this;\n  };\n\n  Interpreter.prototype.subscribe = function (nextListenerOrObserver, _, // TODO: error listener\n  completeListener) {\n    var _this = this;\n\n    if (!nextListenerOrObserver) {\n      return {\n        unsubscribe: function () {\n          return void 0;\n        }\n      };\n    }\n\n    var listener;\n    var resolvedCompleteListener = completeListener;\n\n    if (typeof nextListenerOrObserver === 'function') {\n      listener = nextListenerOrObserver;\n    } else {\n      listener = nextListenerOrObserver.next.bind(nextListenerOrObserver);\n      resolvedCompleteListener = nextListenerOrObserver.complete.bind(nextListenerOrObserver);\n    }\n\n    this.listeners.add(listener); // Send current state to listener\n\n    if (this.status === InterpreterStatus.Running) {\n      listener(this.state);\n    }\n\n    if (resolvedCompleteListener) {\n      this.onDone(resolvedCompleteListener);\n    }\n\n    return {\n      unsubscribe: function () {\n        listener && _this.listeners.delete(listener);\n        resolvedCompleteListener && _this.doneListeners.delete(resolvedCompleteListener);\n      }\n    };\n  };\n  /**\r\n   * Adds an event listener that is notified whenever an event is sent to the running interpreter.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onEvent = function (listener) {\n    this.eventListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds an event listener that is notified whenever a `send` event occurs.\r\n   * @param listener The event listener\r\n   */\n\n\n  Interpreter.prototype.onSend = function (listener) {\n    this.sendListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a context listener that is notified whenever the state context changes.\r\n   * @param listener The context listener\r\n   */\n\n\n  Interpreter.prototype.onChange = function (listener) {\n    this.contextListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a listener that is notified when the machine is stopped.\r\n   * @param listener The listener\r\n   */\n\n\n  Interpreter.prototype.onStop = function (listener) {\n    this.stopListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Adds a state listener that is notified when the statechart has reached its final state.\r\n   * @param listener The state listener\r\n   */\n\n\n  Interpreter.prototype.onDone = function (listener) {\n    this.doneListeners.add(listener);\n    return this;\n  };\n  /**\r\n   * Removes a listener.\r\n   * @param listener The listener to remove\r\n   */\n\n\n  Interpreter.prototype.off = function (listener) {\n    this.listeners.delete(listener);\n    this.eventListeners.delete(listener);\n    this.sendListeners.delete(listener);\n    this.stopListeners.delete(listener);\n    this.doneListeners.delete(listener);\n    this.contextListeners.delete(listener);\n    return this;\n  };\n  /**\r\n   * Starts the interpreter from the given state, or the initial state.\r\n   * @param initialState The state to start the statechart from\r\n   */\n\n\n  Interpreter.prototype.start = function (initialState) {\n    var _this = this;\n\n    if (this.status === InterpreterStatus.Running) {\n      // Do not restart the service if it is already started\n      return this;\n    }\n\n    registry.register(this.sessionId, this);\n    this.initialized = true;\n    this.status = InterpreterStatus.Running;\n    var resolvedState = initialState === undefined ? this.initialState : provide(this, function () {\n      return isState(initialState) ? _this.machine.resolveState(initialState) : _this.machine.resolveState(State.from(initialState, _this.machine.context));\n    });\n\n    if (this.options.devTools) {\n      this.attachDev();\n    }\n\n    this.scheduler.initialize(function () {\n      _this.update(resolvedState, initEvent);\n    });\n    return this;\n  };\n  /**\r\n   * Stops the interpreter and unsubscribe all listeners.\r\n   *\r\n   * This will also notify the `onStop` listeners.\r\n   */\n\n\n  Interpreter.prototype.stop = function () {\n    var e_6, _a, e_7, _b, e_8, _c, e_9, _d, e_10, _e;\n\n    var _this = this;\n\n    try {\n      for (var _f = __values(this.listeners), _g = _f.next(); !_g.done; _g = _f.next()) {\n        var listener = _g.value;\n        this.listeners.delete(listener);\n      }\n    } catch (e_6_1) {\n      e_6 = {\n        error: e_6_1\n      };\n    } finally {\n      try {\n        if (_g && !_g.done && (_a = _f.return)) _a.call(_f);\n      } finally {\n        if (e_6) throw e_6.error;\n      }\n    }\n\n    try {\n      for (var _h = __values(this.stopListeners), _j = _h.next(); !_j.done; _j = _h.next()) {\n        var listener = _j.value; // call listener, then remove\n\n        listener();\n        this.stopListeners.delete(listener);\n      }\n    } catch (e_7_1) {\n      e_7 = {\n        error: e_7_1\n      };\n    } finally {\n      try {\n        if (_j && !_j.done && (_b = _h.return)) _b.call(_h);\n      } finally {\n        if (e_7) throw e_7.error;\n      }\n    }\n\n    try {\n      for (var _k = __values(this.contextListeners), _l = _k.next(); !_l.done; _l = _k.next()) {\n        var listener = _l.value;\n        this.contextListeners.delete(listener);\n      }\n    } catch (e_8_1) {\n      e_8 = {\n        error: e_8_1\n      };\n    } finally {\n      try {\n        if (_l && !_l.done && (_c = _k.return)) _c.call(_k);\n      } finally {\n        if (e_8) throw e_8.error;\n      }\n    }\n\n    try {\n      for (var _m = __values(this.doneListeners), _o = _m.next(); !_o.done; _o = _m.next()) {\n        var listener = _o.value;\n        this.doneListeners.delete(listener);\n      }\n    } catch (e_9_1) {\n      e_9 = {\n        error: e_9_1\n      };\n    } finally {\n      try {\n        if (_o && !_o.done && (_d = _m.return)) _d.call(_m);\n      } finally {\n        if (e_9) throw e_9.error;\n      }\n    }\n\n    this.state.configuration.forEach(function (stateNode) {\n      var e_11, _a;\n\n      try {\n        for (var _b = __values(stateNode.definition.exit), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var action = _c.value;\n\n          _this.exec(action, _this.state);\n        }\n      } catch (e_11_1) {\n        e_11 = {\n          error: e_11_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n        } finally {\n          if (e_11) throw e_11.error;\n        }\n      }\n    }); // Stop all children\n\n    this.children.forEach(function (child) {\n      if (isFunction(child.stop)) {\n        child.stop();\n      }\n    });\n\n    try {\n      // Cancel all delayed events\n      for (var _p = __values(keys(this.delayedEventsMap)), _q = _p.next(); !_q.done; _q = _p.next()) {\n        var key = _q.value;\n        this.clock.clearTimeout(this.delayedEventsMap[key]);\n      }\n    } catch (e_10_1) {\n      e_10 = {\n        error: e_10_1\n      };\n    } finally {\n      try {\n        if (_q && !_q.done && (_e = _p.return)) _e.call(_p);\n      } finally {\n        if (e_10) throw e_10.error;\n      }\n    }\n\n    this.scheduler.clear();\n    this.initialized = false;\n    this.status = InterpreterStatus.Stopped;\n    registry.free(this.sessionId);\n    return this;\n  };\n\n  Interpreter.prototype.batch = function (events) {\n    var _this = this;\n\n    if (this.status === InterpreterStatus.NotStarted && this.options.deferEvents) {\n      // tslint:disable-next-line:no-console\n      if (!IS_PRODUCTION) {\n        warn(false, events.length + \" event(s) were sent to uninitialized service \\\"\" + this.machine.id + \"\\\" and are deferred. Make sure .start() is called for this service.\\nEvent: \" + JSON.stringify(event));\n      }\n    } else if (this.status !== InterpreterStatus.Running) {\n      throw new Error( // tslint:disable-next-line:max-line-length\n      events.length + \" event(s) were sent to uninitialized service \\\"\" + this.machine.id + \"\\\". Make sure .start() is called for this service, or set { deferEvents: true } in the service options.\");\n    }\n\n    this.scheduler.schedule(function () {\n      var e_12, _a;\n\n      var nextState = _this.state;\n      var batchChanged = false;\n      var batchedActions = [];\n\n      var _loop_1 = function (event_1) {\n        var _event = toSCXMLEvent(event_1);\n\n        _this.forward(_event);\n\n        nextState = provide(_this, function () {\n          return _this.machine.transition(nextState, _event);\n        });\n        batchedActions.push.apply(batchedActions, __spread(nextState.actions.map(function (a) {\n          return bindActionToState(a, nextState);\n        })));\n        batchChanged = batchChanged || !!nextState.changed;\n      };\n\n      try {\n        for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n          var event_1 = events_1_1.value;\n\n          _loop_1(event_1);\n        }\n      } catch (e_12_1) {\n        e_12 = {\n          error: e_12_1\n        };\n      } finally {\n        try {\n          if (events_1_1 && !events_1_1.done && (_a = events_1.return)) _a.call(events_1);\n        } finally {\n          if (e_12) throw e_12.error;\n        }\n      }\n\n      nextState.changed = batchChanged;\n      nextState.actions = batchedActions;\n\n      _this.update(nextState, toSCXMLEvent(events[events.length - 1]));\n    });\n  };\n  /**\r\n   * Returns a send function bound to this interpreter instance.\r\n   *\r\n   * @param event The event to be sent by the sender.\r\n   */\n\n\n  Interpreter.prototype.sender = function (event) {\n    return this.send.bind(this, event);\n  };\n  /**\r\n   * Returns the next state given the interpreter's current state and the event.\r\n   *\r\n   * This is a pure method that does _not_ update the interpreter's state.\r\n   *\r\n   * @param event The event to determine the next state\r\n   */\n\n\n  Interpreter.prototype.nextState = function (event) {\n    var _this = this;\n\n    var _event = toSCXMLEvent(event);\n\n    if (_event.name.indexOf(errorPlatform) === 0 && !this.state.nextEvents.some(function (nextEvent) {\n      return nextEvent.indexOf(errorPlatform) === 0;\n    })) {\n      throw _event.data.data;\n    }\n\n    var nextState = provide(this, function () {\n      return _this.machine.transition(_this.state, _event);\n    });\n    return nextState;\n  };\n\n  Interpreter.prototype.forward = function (event) {\n    var e_13, _a;\n\n    try {\n      for (var _b = __values(this.forwardTo), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var id = _c.value;\n        var child = this.children.get(id);\n\n        if (!child) {\n          throw new Error(\"Unable to forward event '\" + event + \"' from interpreter '\" + this.id + \"' to nonexistant child '\" + id + \"'.\");\n        }\n\n        child.send(event);\n      }\n    } catch (e_13_1) {\n      e_13 = {\n        error: e_13_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_13) throw e_13.error;\n      }\n    }\n  };\n\n  Interpreter.prototype.defer = function (sendAction) {\n    var _this = this;\n\n    this.delayedEventsMap[sendAction.id] = this.clock.setTimeout(function () {\n      if (sendAction.to) {\n        _this.sendTo(sendAction._event, sendAction.to);\n      } else {\n        _this.send(sendAction._event);\n      }\n    }, sendAction.delay);\n  };\n\n  Interpreter.prototype.cancel = function (sendId) {\n    this.clock.clearTimeout(this.delayedEventsMap[sendId]);\n    delete this.delayedEventsMap[sendId];\n  };\n\n  Interpreter.prototype.exec = function (action, state, actionFunctionMap) {\n    if (actionFunctionMap === void 0) {\n      actionFunctionMap = this.machine.options.actions;\n    }\n\n    var context = state.context,\n        _event = state._event;\n    var actionOrExec = action.exec || getActionFunction(action.type, actionFunctionMap);\n    var exec = isFunction(actionOrExec) ? actionOrExec : actionOrExec ? actionOrExec.exec : action.exec;\n\n    if (exec) {\n      try {\n        return exec(context, _event.data, {\n          action: action,\n          state: this.state,\n          _event: _event\n        });\n      } catch (err) {\n        if (this.parent) {\n          this.parent.send({\n            type: 'xstate.error',\n            data: err\n          });\n        }\n\n        throw err;\n      }\n    }\n\n    switch (action.type) {\n      case send:\n        var sendAction = action;\n\n        if (typeof sendAction.delay === 'number') {\n          this.defer(sendAction);\n          return;\n        } else {\n          if (sendAction.to) {\n            this.sendTo(sendAction._event, sendAction.to);\n          } else {\n            this.send(sendAction._event);\n          }\n        }\n\n        break;\n\n      case cancel:\n        this.cancel(action.sendId);\n        break;\n\n      case start:\n        {\n          var activity = action.activity; // If the activity will be stopped right after it's started\n          // (such as in transient states)\n          // don't bother starting the activity.\n\n          if (!this.state.activities[activity.id || activity.type]) {\n            break;\n          } // Invoked services\n\n\n          if (activity.type === ActionTypes.Invoke) {\n            var invokeSource = toInvokeSource(activity.src);\n            var serviceCreator = this.machine.options.services ? this.machine.options.services[invokeSource.type] : undefined;\n            var id = activity.id,\n                data = activity.data;\n\n            if (!IS_PRODUCTION) {\n              warn(!('forward' in activity), // tslint:disable-next-line:max-line-length\n              \"`forward` property is deprecated (found in invocation of '\" + activity.src + \"' in in machine '\" + this.machine.id + \"'). \" + \"Please use `autoForward` instead.\");\n            }\n\n            var autoForward = 'autoForward' in activity ? activity.autoForward : !!activity.forward;\n\n            if (!serviceCreator) {\n              // tslint:disable-next-line:no-console\n              if (!IS_PRODUCTION) {\n                warn(false, \"No service found for invocation '\" + activity.src + \"' in machine '\" + this.machine.id + \"'.\");\n              }\n\n              return;\n            }\n\n            var resolvedData = data ? mapContext(data, context, _event) : undefined;\n            var source = isFunction(serviceCreator) ? serviceCreator(context, _event.data, {\n              data: resolvedData,\n              src: invokeSource\n            }) : serviceCreator;\n\n            if (isPromiseLike(source)) {\n              this.spawnPromise(Promise.resolve(source), id);\n            } else if (isFunction(source)) {\n              this.spawnCallback(source, id);\n            } else if (isObservable(source)) {\n              this.spawnObservable(source, id);\n            } else if (isMachine(source)) {\n              // TODO: try/catch here\n              this.spawnMachine(resolvedData ? source.withContext(resolvedData) : source, {\n                id: id,\n                autoForward: autoForward\n              });\n            }\n          } else {\n            this.spawnActivity(activity);\n          }\n\n          break;\n        }\n\n      case stop:\n        {\n          this.stopChild(action.activity.id);\n          break;\n        }\n\n      case log:\n        var label = action.label,\n            value = action.value;\n\n        if (label) {\n          this.logger(label, value);\n        } else {\n          this.logger(value);\n        }\n\n        break;\n\n      default:\n        if (!IS_PRODUCTION) {\n          warn(false, \"No implementation found for action type '\" + action.type + \"'\");\n        }\n\n        break;\n    }\n\n    return undefined;\n  };\n\n  Interpreter.prototype.removeChild = function (childId) {\n    this.children.delete(childId);\n    this.forwardTo.delete(childId);\n    delete this.state.children[childId];\n  };\n\n  Interpreter.prototype.stopChild = function (childId) {\n    var child = this.children.get(childId);\n\n    if (!child) {\n      return;\n    }\n\n    this.removeChild(childId);\n\n    if (isFunction(child.stop)) {\n      child.stop();\n    }\n  };\n\n  Interpreter.prototype.spawn = function (entity, name, options) {\n    if (isPromiseLike(entity)) {\n      return this.spawnPromise(Promise.resolve(entity), name);\n    } else if (isFunction(entity)) {\n      return this.spawnCallback(entity, name);\n    } else if (isActor(entity)) {\n      return this.spawnActor(entity);\n    } else if (isObservable(entity)) {\n      return this.spawnObservable(entity, name);\n    } else if (isMachine(entity)) {\n      return this.spawnMachine(entity, __assign(__assign({}, options), {\n        id: name\n      }));\n    } else {\n      throw new Error(\"Unable to spawn entity \\\"\" + name + \"\\\" of type \\\"\" + typeof entity + \"\\\".\");\n    }\n  };\n\n  Interpreter.prototype.spawnMachine = function (machine, options) {\n    var _this = this;\n\n    if (options === void 0) {\n      options = {};\n    }\n\n    var childService = new Interpreter(machine, __assign(__assign({}, this.options), {\n      parent: this,\n      id: options.id || machine.id\n    }));\n\n    var resolvedOptions = __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), options);\n\n    if (resolvedOptions.sync) {\n      childService.onTransition(function (state) {\n        _this.send(update, {\n          state: state,\n          id: childService.id\n        });\n      });\n    }\n\n    var actor = childService;\n    this.children.set(childService.id, actor);\n\n    if (resolvedOptions.autoForward) {\n      this.forwardTo.add(childService.id);\n    }\n\n    childService.onDone(function (doneEvent) {\n      _this.removeChild(childService.id);\n\n      _this.send(toSCXMLEvent(doneEvent, {\n        origin: childService.id\n      }));\n    }).start();\n    return actor;\n  };\n\n  Interpreter.prototype.spawnPromise = function (promise, id) {\n    var _this = this;\n\n    var canceled = false;\n    promise.then(function (response) {\n      if (!canceled) {\n        _this.removeChild(id);\n\n        _this.send(toSCXMLEvent(doneInvoke(id, response), {\n          origin: id\n        }));\n      }\n    }, function (errorData) {\n      if (!canceled) {\n        _this.removeChild(id);\n\n        var errorEvent = error(id, errorData);\n\n        try {\n          // Send \"error.platform.id\" to this (parent).\n          _this.send(toSCXMLEvent(errorEvent, {\n            origin: id\n          }));\n        } catch (error) {\n          reportUnhandledExceptionOnInvocation(errorData, error, id);\n\n          if (_this.devTools) {\n            _this.devTools.send(errorEvent, _this.state);\n          }\n\n          if (_this.machine.strict) {\n            // it would be better to always stop the state machine if unhandled\n            // exception/promise rejection happens but because we don't want to\n            // break existing code so enforce it on strict mode only especially so\n            // because documentation says that onError is optional\n            _this.stop();\n          }\n        }\n      }\n    });\n    var actor = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        var unsubscribed = false;\n        promise.then(function (response) {\n          if (unsubscribed) {\n            return;\n          }\n\n          next && next(response);\n\n          if (unsubscribed) {\n            return;\n          }\n\n          complete && complete();\n        }, function (err) {\n          if (unsubscribed) {\n            return;\n          }\n\n          handleError(err);\n        });\n        return {\n          unsubscribe: function () {\n            return unsubscribed = true;\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    };\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnCallback = function (callback, id) {\n    var _this = this;\n\n    var canceled = false;\n    var receivers = new Set();\n    var listeners = new Set();\n\n    var receive = function (e) {\n      listeners.forEach(function (listener) {\n        return listener(e);\n      });\n\n      if (canceled) {\n        return;\n      }\n\n      _this.send(e);\n    };\n\n    var callbackStop;\n\n    try {\n      callbackStop = callback(receive, function (newListener) {\n        receivers.add(newListener);\n      });\n    } catch (err) {\n      this.send(error(id, err));\n    }\n\n    if (isPromiseLike(callbackStop)) {\n      // it turned out to be an async function, can't reliably check this before calling `callback`\n      // because transpiled async functions are not recognizable\n      return this.spawnPromise(callbackStop, id);\n    }\n\n    var actor = {\n      id: id,\n      send: function (event) {\n        return receivers.forEach(function (receiver) {\n          return receiver(event);\n        });\n      },\n      subscribe: function (next) {\n        listeners.add(next);\n        return {\n          unsubscribe: function () {\n            listeners.delete(next);\n          }\n        };\n      },\n      stop: function () {\n        canceled = true;\n\n        if (isFunction(callbackStop)) {\n          callbackStop();\n        }\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    };\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnObservable = function (source, id) {\n    var _this = this;\n\n    var subscription = source.subscribe(function (value) {\n      _this.send(toSCXMLEvent(value, {\n        origin: id\n      }));\n    }, function (err) {\n      _this.removeChild(id);\n\n      _this.send(toSCXMLEvent(error(id, err), {\n        origin: id\n      }));\n    }, function () {\n      _this.removeChild(id);\n\n      _this.send(toSCXMLEvent(doneInvoke(id), {\n        origin: id\n      }));\n    });\n    var actor = {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function (next, handleError, complete) {\n        return source.subscribe(next, handleError, complete);\n      },\n      stop: function () {\n        return subscription.unsubscribe();\n      },\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    };\n    this.children.set(id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActor = function (actor) {\n    this.children.set(actor.id, actor);\n    return actor;\n  };\n\n  Interpreter.prototype.spawnActivity = function (activity) {\n    var implementation = this.machine.options && this.machine.options.activities ? this.machine.options.activities[activity.type] : undefined;\n\n    if (!implementation) {\n      if (!IS_PRODUCTION) {\n        warn(false, \"No implementation found for activity '\" + activity.type + \"'\");\n      } // tslint:disable-next-line:no-console\n\n\n      return;\n    } // Start implementation\n\n\n    var dispose = implementation(this.state.context, activity);\n    this.spawnEffect(activity.id, dispose);\n  };\n\n  Interpreter.prototype.spawnEffect = function (id, dispose) {\n    this.children.set(id, {\n      id: id,\n      send: function () {\n        return void 0;\n      },\n      subscribe: function () {\n        return {\n          unsubscribe: function () {\n            return void 0;\n          }\n        };\n      },\n      stop: dispose || undefined,\n      toJSON: function () {\n        return {\n          id: id\n        };\n      }\n    });\n  };\n\n  Interpreter.prototype.attachDev = function () {\n    if (this.options.devTools && typeof window !== 'undefined') {\n      if (window.__REDUX_DEVTOOLS_EXTENSION__) {\n        var devToolsOptions = typeof this.options.devTools === 'object' ? this.options.devTools : undefined;\n        this.devTools = window.__REDUX_DEVTOOLS_EXTENSION__.connect(__assign(__assign({\n          name: this.id,\n          autoPause: true,\n          stateSanitizer: function (state) {\n            return {\n              value: state.value,\n              context: state.context,\n              actions: state.actions\n            };\n          }\n        }, devToolsOptions), {\n          features: __assign({\n            jump: false,\n            skip: false\n          }, devToolsOptions ? devToolsOptions.features : undefined)\n        }), this.machine);\n        this.devTools.init(this.state);\n      } // add XState-specific dev tooling hook\n\n\n      registerService(this);\n    }\n  };\n\n  Interpreter.prototype.toJSON = function () {\n    return {\n      id: this.id\n    };\n  };\n\n  Interpreter.prototype[symbolObservable] = function () {\n    return this;\n  };\n  /**\r\n   * The default interpreter options:\r\n   *\r\n   * - `clock` uses the global `setTimeout` and `clearTimeout` functions\r\n   * - `logger` uses the global `console.log()` method\r\n   */\n\n\n  Interpreter.defaultOptions = /*#__PURE__*/function (global) {\n    return {\n      execute: true,\n      deferEvents: true,\n      clock: {\n        setTimeout: function (fn, ms) {\n          return global.setTimeout.call(null, fn, ms);\n        },\n        clearTimeout: function (id) {\n          return global.clearTimeout.call(null, id);\n        }\n      },\n      logger: global.console.log.bind(console),\n      devTools: false\n    };\n  }(typeof self !== 'undefined' ? self : global);\n\n  Interpreter.interpret = interpret;\n  return Interpreter;\n}();\n\nvar resolveSpawnOptions = function (nameOrOptions) {\n  if (isString(nameOrOptions)) {\n    return __assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n      name: nameOrOptions\n    });\n  }\n\n  return __assign(__assign(__assign({}, DEFAULT_SPAWN_OPTIONS), {\n    name: uniqueId()\n  }), nameOrOptions);\n};\n\nfunction spawn(entity, nameOrOptions) {\n  var resolvedOptions = resolveSpawnOptions(nameOrOptions);\n  return consume(function (service) {\n    if (!IS_PRODUCTION) {\n      var isLazyEntity = isMachine(entity) || isFunction(entity);\n      warn(!!service || isLazyEntity, \"Attempted to spawn an Actor (ID: \\\"\" + (isMachine(entity) ? entity.id : 'undefined') + \"\\\") outside of a service. This will have no effect.\");\n    }\n\n    if (service) {\n      return service.spawn(entity, resolvedOptions.name, resolvedOptions);\n    } else {\n      return createDeferredActor(entity, resolvedOptions.name);\n    }\n  });\n}\n/**\r\n * Creates a new Interpreter instance for the given machine with the provided options, if any.\r\n *\r\n * @param machine The machine to interpret\r\n * @param options Interpreter options\r\n */\n\n\nfunction interpret(machine, options) {\n  var interpreter = new Interpreter(machine, options);\n  return interpreter;\n}\n\nexport { Interpreter, InterpreterStatus, interpret, spawn };","import { __values, __read } from './_virtual/_tslib.js';\nimport { State } from './State.js';\n\nfunction matchState(state, patterns, defaultValue) {\n  var e_1, _a;\n\n  var resolvedState = State.from(state, state instanceof State ? state.context : undefined);\n\n  try {\n    for (var patterns_1 = __values(patterns), patterns_1_1 = patterns_1.next(); !patterns_1_1.done; patterns_1_1 = patterns_1.next()) {\n      var _b = __read(patterns_1_1.value, 2),\n          stateValue = _b[0],\n          getValue = _b[1];\n\n      if (resolvedState.matches(stateValue)) {\n        return getValue(resolvedState);\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (patterns_1_1 && !patterns_1_1.done && (_a = patterns_1.return)) _a.call(patterns_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n\n  return defaultValue(resolvedState);\n}\n\nexport { matchState };","export { matchesState } from './utils.js';\nexport { mapState } from './mapState.js';\nexport { ActionTypes, SpecialTargets } from './types.js';\nimport { raise, send, sendParent, sendUpdate, log, cancel, start, stop, assign, after, done, respond, forwardTo, escalate, choose, pure } from './actions.js';\nexport { assign, doneInvoke, forwardTo, send, sendParent, sendUpdate } from './actions.js';\nexport { State } from './State.js';\nexport { StateNode } from './StateNode.js';\nexport { Machine, createMachine } from './Machine.js';\nexport { Interpreter, InterpreterStatus, interpret, spawn } from './interpreter.js';\nexport { matchState } from './match.js';\nvar actions = {\n  raise: raise,\n  send: send,\n  sendParent: sendParent,\n  sendUpdate: sendUpdate,\n  log: log,\n  cancel: cancel,\n  start: start,\n  stop: stop,\n  assign: assign,\n  after: after,\n  done: done,\n  respond: respond,\n  forwardTo: forwardTo,\n  escalate: escalate,\n  choose: choose,\n  pure: pure\n};\nexport { actions };","import { Machine } from \"xstate\";\n\nconst machine = Machine({\n  // Initial state\n  initial: \"unanswered\",\n  // State definitions\n  states: {\n    unanswered: {\n      on: {\n        // state transition (shorthand)\n        // this is equivalent to { target: 'answered' }\n        // INPUT is an event\n        INPUT: {\n          target: \"answered\",\n        },\n      },\n    },\n    answered: {\n      on: {\n        SUBMIT: \"corrected\",\n      },\n    },\n    corrected: {\n      type: \"final\",\n    },\n  },\n});\n\nexport default machine;\n","import { interpret } from \"xstate\";\n\nimport machine from \"./machine.js\";\n\n// Interpret the machine, and add a listener for whenever a transition occurs.\nconst service = interpret(machine).onTransition((state) => {\n  console.log(state.value);\n\n  if (state.matches(\"unanswered\")) {\n    document.querySelector(\".btn\").classList.add(\"disabled\");\n    document.querySelector(\".btn\").setAttribute(\"disabled\", true);\n  }\n\n  if (state.matches(\"answered\")) {\n    document.querySelector(\".btn\").classList.remove(\"disabled\");\n    document.querySelector(\".btn\").removeAttribute(\"disabled\");\n  }\n});\n\nexport default service;\n","import allSolutions from \"../data.js\";\nimport service from \"./scripts/service.js\";\n\nconst path = window.location.pathname;\n\nfunction getDirectoryPathFromURL(path) {\n  if (!path) return;\n\n  const pathArray = path.split(\"/\");\n  const directoryPath = pathArray[pathArray.length - 2];\n\n  return directoryPath;\n}\n\nfunction getFilePathFromURL(path) {\n  if (!path) return;\n\n  const pathArray = path.split(\"/\");\n  const filePath = pathArray[pathArray.length - 1].substring(0, 4);\n\n  return filePath;\n}\n\nconst solutions =\n  allSolutions[getDirectoryPathFromURL(path)][getFilePathFromURL(path)];\n\nconst form = getFilePathFromURL(path);\nconst esercizio = document.getElementById(form);\n\nexport { solutions, esercizio, service };\n","import { solutions, esercizio, service } from \"../index.js\";\n\nconst answers = {};\n\nconst checkAnswers = (answers, solutions) => {\n  if (!answers || !solutions) return;\n\n  const fields = Array.from(esercizio.querySelectorAll(\"input[type='radio']\"));\n  const checkedFields = fields.filter((field) => field.checked);\n\n  checkedFields?.forEach((field) => {\n    field.parentNode.parentNode.querySelectorAll(\"label\").forEach((label) => {\n      label.classList.remove(\"right\");\n      label.classList.remove(\"wrong\");\n    });\n\n    answers[field.name] === solutions[field.name]\n      ? field.parentNode.classList.add(\"right\")\n      : field.parentNode.classList.add(\"wrong\");\n  });\n};\n\nesercizio?.addEventListener(\"change\", (e) => {\n  e.target.checked && (answers[e.target.name] = e.target.value);\n\n  // Send event\n  service.send(\"INPUT\");\n});\n\nesercizio?.addEventListener(\"submit\", (e) => {\n  e.preventDefault();\n\n  checkAnswers(answers, solutions);\n\n  service.send(\"SUBMIT\");\n\n  // Stop the service when you are no longer using it.\n  service.stop();\n});\n\n// Start the service\nservice.start();\n"]}